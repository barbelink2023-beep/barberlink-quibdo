<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarberLink - Tu Corte de Innovación</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #00D68F 0%, #00B87A 100%); min-height: 100vh; }
        .landing-page { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 30px; text-align: center; color: white; }
        .landing-logo { margin-bottom: -120px; margin-top:-55px }
        .landing-logo span { display: inline-block; background: white; color: #00D68F; padding: 10px 20px; border-radius: 10px; margin: 0 5px; }
        .landing-tagline { font-size: 1.2rem; margin-bottom: 40px; opacity: 0.95; }
        .landing-cta { padding: 25px 40px; background: #FF5D9E; color: white; border: none; border-radius: 25px; font-size: 1.5rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(255, 93, 158, 0.4); margin-bottom: 15px; }
        .landing-cta:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(255, 93, 158, 0.6); }
        .landing-signin { margin-top: 20px; color: white; font-size: 0.9rem; }
        .landing-signin a { color: white; text-decoration: underline; cursor: pointer; }
        .auth-container { display: none; max-width: 400px; width: 90%; background: white; border-radius: 20px; padding: 40px 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 3000; }
        .auth-container.active { display: block; }
        .auth-header { text-align: center; margin-bottom: 30px; }
        .auth-header h2 { color: #00D68F; margin-bottom: 10px; }
        .auth-header p { color: #666; font-size: 0.9rem; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: 600; font-size: 0.9rem; }
        .form-group input { width: 100%; padding: 12px 15px; border: 2px solid #E5E5E5; border-radius: 10px; font-size: 1rem; transition: all 0.3s ease; }
        .form-group input:focus { outline: none; border-color: #00D68F; }
        .form-actions { display: flex; gap: 10px; margin-top: 25px; }
        .auth-btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .auth-btn-primary { background: #00D68F; color: white; }
        .auth-btn-secondary { background: #FF5D9E; color: white; }
        .auth-btn:hover { transform: scale(1.05); }
        .auth-toggle { text-align: center; margin-top: 20px; color: #666; font-size: 0.9rem; }
        .auth-toggle a { color: #00D68F; font-weight: 600; cursor: pointer; }
        .app-container { display: none; max-width: 1400px; margin: 0 auto; background: #F5F5F5; min-height: 100vh; }
        .app-container.active { display: block; }
        .main-header { background: #00D68F; color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header-logo { font-size: 1.5rem; font-weight: bold; letter-spacing: 2px; cursor: pointer; }
        .header-user { display: flex; align-items: center; gap: 15px; }
        .user-avatar { width: 40px; height: 40px; background: white; color: #00D68F; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; }
        .main-nav { background: white; padding: 15px 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .search-bar { max-width: 600px; margin: 0 auto; position: relative; display: flex; align-items: center; background: #F5F5F5; border-radius: 25px; padding: 5px 10px; }
        .search-icon { color: #666; margin: 0 10px; }
        .search-input { flex: 1; border: none; background: transparent; padding: 12px; font-size: 1rem; outline: none; }
        .main-content { padding: 20px; padding-bottom: 100px; }
        .categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .category-card { background: white; border-radius: 15px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        .category-card:hover { transform: translateY(-5px); box-shadow: 0 5px 20px rgba(0,0,0,0.15); }
        .category-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .category-name { font-weight: 600; color: #333; }
        .map-search-container { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .section-title { font-size: 1.3rem; color: #333; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        #barberMap { width: 100%; height: 500px; border-radius: 15px; margin-bottom: 20px; }
        .barbers-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .barber-card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); transition: all 0.3s ease; cursor: pointer; }
        .barber-card:hover { transform: translateY(-3px); box-shadow: 0 5px 20px rgba(0,0,0,0.15); }
        .barber-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .barber-avatar { width: 60px; height: 60px; background: linear-gradient(135deg, #00D68F, #00B87A); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.3rem; }
        .barber-info h4 { margin: 0 0 5px 0; color: #333; }
        .barber-specialty { color: #666; font-size: 0.9rem; }
        .barber-rating { display: flex; align-items: center; gap: 5px; margin-bottom: 10px; }
        .stars { color: #FFD700; }
        .rating-text { color: #666; font-size: 0.9rem; }
        .barber-distance { color: #00D68F; font-weight: 600; font-size: 0.9rem; }
        .barber-actions { display: flex; gap: 10px; margin-top: 15px; }
        .btn { flex: 1; padding: 10px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .btn-primary { background: #FF5D9E; color: white; }
        .btn-secondary { background: #F5F5F5; color: #333; }
        .btn:hover { transform: scale(1.05); }
        .booking-modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; }
        .booking-modal.active { display: flex; }
        .booking-content { background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .booking-header { text-align: center; margin-bottom: 25px; }
        .booking-header h2 { color: #00D68F; margin-bottom: 10px; }
        .date-selector { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; margin-bottom: 20px; }
        .date-item { padding: 10px; text-align: center; border: 2px solid #E5E5E5; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; }
        .date-item:hover, .date-item.selected { background: #00D68F; color: white; border-color: #00D68F; }
        .time-slots { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .time-slot { padding: 12px; text-align: center; border: 2px solid #E5E5E5; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; }
        .time-slot:hover, .time-slot.selected { background: #FF5D9E; color: white; border-color: #FF5D9E; }
        .service-selector { margin-bottom: 20px; }
        .service-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #F5F5F5; border-radius: 10px; margin-bottom: 10px; cursor: pointer; transition: all 0.3s ease; }
        .service-item:hover, .service-item.selected { background: #00D68F; color: white; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .product-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.08); transition: all 0.3s ease; cursor: pointer; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 5px 20px rgba(0,0,0,0.15); }
        .product-image { width: 100%; height: 200px; background: linear-gradient(135deg, #E5E5E5, #D5D5D5); display: flex; align-items: center; justify-content: center; font-size: 3rem; }
        .product-info { padding: 15px; }
        .product-name { font-weight: 600; color: #333; margin-bottom: 5px; }
        .product-price { color: #00D68F; font-size: 1.2rem; font-weight: bold; margin-bottom: 10px; }
        .add-to-cart { width: 100%; padding: 10px; background: #FF5D9E; color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .add-to-cart:hover { background: #FF4D8E; }
        .cart-badge { position: absolute; top: -8px; right: -8px; background: #FF5D9E; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: white; display: flex; justify-content: space-around; padding: 10px 0; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 5px; padding: 10px 20px; cursor: pointer; color: #666; transition: all 0.3s ease; text-decoration: none; position: relative; }
        .nav-item.active { color: #00D68F; }
        .nav-item i { font-size: 1.3rem; }
        .nav-item span { font-size: 0.75rem; }
        .user-menu { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; }
        .user-menu.active { display: flex; }
        .user-menu-content { background: white; max-height: 600px; border-radius: 20px; padding: 20px; max-width: 400px; width: 88%; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        .user-menu-header { text-align: center; margin-bottom: 15px; }
        .user-menu-avatar { width: 80px; height: 80px; background: linear-gradient(135deg, #FF5D9E, #FF8E8E); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; font-weight: bold; margin: 0 auto 15px; }
        .user-menu-name { font-size: 1.3rem; font-weight: 600; color: #333; }
        .menu-options { display: flex; flex-direction: column; gap: 15px; }
        .menu-option { display: flex; align-items: center; gap: 15px; padding: 10px; background: #F5F5F5; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; }
        .menu-option:hover { background: #E5E5E5; transform: translateX(5px); }
        .menu-option i { font-size: 1.2rem; color: #00D68F; }
        .close-menu { margin-top: 10px; padding: 10px; background: #FF5D9E; color: white; border: none; border-radius: 10px; width: 100%; font-weight: 600; cursor: pointer; }
        .barber-profile { display: none; background: white; min-height: 100vh; padding-bottom: 80px; }
        .barber-profile.active { display: block; }
        .profile-header { background: linear-gradient(135deg, #00D68F, #00B87A); padding: 30px 20px; text-align: center; color: white; position: relative; }
        .profile-avatar { width: 100px; height: 100px; background: white; color: #00D68F; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: bold; margin: 0 auto 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .profile-name { font-size: 1.5rem; margin-bottom: 5px; }
        .profile-title { opacity: 0.9; margin-bottom: 15px; }
        .profile-rating { display: flex; justify-content: center; align-items: center; gap: 10px; }
        .profile-content { padding: 20px; }
        .profile-section { margin-bottom: 30px; }
        .profile-section h3 { color: #333; margin-bottom: 15px; font-size: 1.1rem; }
        .profile-description { color: #666; line-height: 1.6; background: #F5F5F5; padding: 15px; border-radius: 10px; }
        .gallery-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .gallery-item { aspect-ratio: 1; background: linear-gradient(135deg, #E5E5E5, #D5D5D5); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #999; }
        .back-button { position: absolute; top: 20px; left: 20px; width: 40px; height: 40px; background: rgba(255,255,255,0.3); border: none; border-radius: 50%; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
        .loading-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 3000; align-items: center; justify-content: center; }
        .loading-overlay.active { display: flex; }
        .loading-spinner { width: 50px; height: 50px; border: 5px solid #F5F5F5; border-top-color: #00D68F; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
    @media (max-width: 768px) { .landing-logo { font-size: 0.5rem; } img#logo_barber {
    width: 370px; height: 416px; } div#homeSuggestionsDropdown { top: 87% !important;left: 20px !important; max-width: 338px !important; } input#minPriceFilter { max-width: 99px; } input#maxPriceFilter {  max-width: 99px; } input#maxPrice {  max-width: 133px; } input#minPrice { max-width: 140px; } input#minPriceFilter { max-width: 99px;}  .ai-barber-avatar { width: 48px !important; height: 36px !important; } .landing-tagline { font-size: 1.0rem; margin-bottom: 18px;  margin-top: 22px;} .categories-grid { grid-template-columns: repeat(2, 1fr); } .barbers-list { grid-template-columns: 1fr; } #barberMap { height: 300px; } .time-slots { grid-template-columns: repeat(2, 1fr); } }




/* ================================ */
/* HOME MEJORADO - SECCIONES NUEVAS */
/* ================================ */

/* Hero Section */
.home-hero {
    background: linear-gradient(135deg, #00D68F 0%, #00B87A 100%);
    border-radius: 20px;
    padding: 30px 20px;
    margin-bottom: 25px;
    color: white;
    text-align: center;
    box-shadow: 0 5px 25px rgba(0, 214, 143, 0.3);
}

.hero-content {
    margin-bottom: 25px;
}

.hero-title {
    font-size: 1.8rem;
    margin: 0 0 10px 0;
    font-weight: 700;
}

.hero-subtitle {
    font-size: 1rem;
    opacity: 0.95;
    margin: 0 0 20px 0;
}

.hero-cta {
    background: white;
    color: #00D68F;
    border: none;
    padding: 12px 30px;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.hero-cta:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

.hero-stats {
    display: flex;
    justify-content: space-around;
    padding-top: 20px;
    border-top: 1px solid rgba(255,255,255,0.3);
}

.hero-stat-item {
    text-align: center;
}

.hero-stat-number {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 5px;
}

.hero-stat-label {
    font-size: 0.85rem;
    opacity: 0.9;
}

/* Búsqueda Rápida Home */
.home-quick-search {
    margin-bottom: 25px;
}

.quick-search-container {
    background: white;
    border-radius: 25px;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 3px 15px rgba(0,0,0,0.1);
}

.quick-search-container i {
    color: #00D68F;
    font-size: 1.2rem;
}

.quick-search-input {
    flex: 1;
    border: none;
    font-size: 1rem;
    outline: none;
}

/* Secciones Generales */
.home-section {
    margin-bottom: 30px;
}

.section-header-home {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.section-title-home {
    font-size: 1.2rem;
    color: #333;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.section-link {
    color: #00D68F;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 5px;
}

/* Barberos Destacados */
.featured-barbers-slider {
    display: flex;
    gap: 15px;
    overflow-x: auto;
    padding-bottom: 10px;
    scroll-snap-type: x mandatory;
}

.featured-barbers-slider::-webkit-scrollbar {
    height: 6px;
}

.featured-barbers-slider::-webkit-scrollbar-track {
    background: #F5F5F5;
    border-radius: 3px;
}

.featured-barbers-slider::-webkit-scrollbar-thumb {
    background: #00D68F;
    border-radius: 3px;
}

.featured-barber-card {
    min-width: 200px;
    background: white;
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 3px 15px rgba(0,0,0,0.1);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    scroll-snap-align: start;
}

.featured-barber-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.featured-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: linear-gradient(135deg, #FFD700, #FFA500);
    color: white;
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
}

.featured-barber-avatar {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00D68F, #00B87A);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    font-weight: bold;
    margin: 0 auto 12px;
    box-shadow: 0 4px 15px rgba(0, 214, 143, 0.3);
}

.featured-barber-card h4 {
    margin: 0 0 5px 0;
    color: #333;
    font-size: 1rem;
}

.featured-specialty {
    color: #666;
    font-size: 0.85rem;
    margin: 0 0 10px 0;
}

.featured-rating {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin-bottom: 8px;
    font-size: 0.85rem;
}

.featured-rating .stars {
    color: #FFD700;
}

.featured-price {
    color: #00D68F;
    font-weight: 600;
    font-size: 0.95rem;
    margin-bottom: 12px;
}

.btn-featured-book {
    width: 100%;
    padding: 10px;
    background: #FF5D9E;
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-featured-book:hover {
    background: #FF4D8E;
    transform: scale(1.05);
}

/* Barberos Cercanos */
.nearby-barbers-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.nearby-barber-item {
    background: white;
    border-radius: 12px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.3s ease;
}

.nearby-barber-item:hover {
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.12);
}

.nearby-barber-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #FF5D9E, #FF8E8E);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1rem;
}

.nearby-barber-info {
    flex: 1;
}

.nearby-barber-info h5 {
    margin: 0 0 3px 0;
    color: #333;
    font-size: 0.95rem;
}

.nearby-specialty {
    color: #666;
    font-size: 0.8rem;
    margin: 0 0 5px 0;
}

.nearby-distance {
    color: #00D68F;
    font-size: 0.8rem;
    font-weight: 600;
}

.nearby-barber-meta {
    text-align: right;
}

.nearby-rating {
    color: #FFD700;
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 5px;
}

.nearby-status {
    font-size: 0.75rem;
    padding: 3px 8px;
    border-radius: 10px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.nearby-status.online {
    background: rgba(0, 214, 143, 0.1);
    color: #00D68F;
}

.nearby-status.busy {
    background: rgba(255, 93, 158, 0.1);
    color: #FF5D9E;
}

.nearby-status i {
    font-size: 0.5rem;
}

/* Servicios Populares */
.popular-services-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

.service-category-card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 3px 15px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.3s ease;
}

.service-category-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}

.service-icon {
    font-size: 2.5rem;
    margin-bottom: 10px;
}

.service-category-card h4 {
    margin: 0 0 5px 0;
    color: #333;
    font-size: 1rem;
}

.service-category-card p {
    color: #00D68F;
    font-weight: 600;
    margin: 0 0 8px 0;
    font-size: 0.9rem;
}

.service-popularity {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: rgba(255, 93, 158, 0.1);
    color: #FF5D9E;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.service-popularity i {
    font-size: 0.7rem;
}

/* Recomendaciones IA */
.ai-recommendations {
background: linear-gradient(135deg, rgba(0, 214, 143, 0.05), rgba(255, 93, 158, 0.05));
padding: 20px;
border-radius: 20px;
}
.ai-recommendations-subtitle {
color: #666;
font-size: 0.9rem;
margin: -5px 0 15px 0;
}
.ai-badge {
background: linear-gradient(135deg, #00D68F, #00B87A);
color: white;
padding: 4px 12px;
border-radius: 15px;
font-size: 0.75rem;
font-weight: 600;
}
.ai-recommendations-list {
display: flex;
flex-direction: column;
gap: 12px;
}
.ai-recommendation-card {
background: white;
border-radius: 15px;
padding: 15px;
box-shadow: 0 3px 15px rgba(0,0,0,0.08);
cursor: pointer;
transition: all 0.3s ease;
border: 2px solid transparent;
}
.ai-recommendation-card:hover {
border-color: #00D68F;
transform: translateY(-3px);
}
.ai-card-content {
display: flex;
gap: 15px;
margin-bottom: 12px;
}
.ai-match-score {
text-align: center;
}
.match-circle {
width: 60px;
height: 60px;
border-radius: 50%;
background: linear-gradient(135deg, #00D68F, #00B87A);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.1rem;
font-weight: bold;
margin-bottom: 5px;
}
.ai-match-score span {
font-size: 0.75rem;
color: #666;
}
.ai-barber-info {
display: flex;
gap: 12px;
flex: 1;
}
.ai-barber-avatar {
width: 50px;
height: 50px;
border-radius: 50%;
background: linear-gradient(135deg, #FF5D9E, #FF8E8E);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
}
.ai-barber-details h5 {
margin: 0 0 3px 0;
color: #333;
font-size: 0.95rem;
}
.ai-barber-details p {
color: #666;
font-size: 0.8rem;
margin: 0 0 8px 0;
}
.ai-match-reasons {
display: flex;
flex-wrap: wrap;
gap: 5px;
}
.match-tag {
background: rgba(0, 214, 143, 0.1);
color: #00D68F;
padding: 3px 8px;
border-radius: 10px;
font-size: 0.7rem;
font-weight: 600;
display: inline-flex;
align-items: center;
gap: 3px;
}
.match-tag i {
font-size: 0.6rem;
}
.btn-ai-book {
width: 100%;
padding: 10px;
background: #00D68F;
color: white;
border: none;
border-radius: 10px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}
.btn-ai-book:hover {
background: #00B87A;
}
/* Actividad Social */
.social-activity {
background: #F5F5F5;
padding: 20px;
border-radius: 20px;
}
.activity-feed {
display: flex;
flex-direction: column;
gap: 12px;
}
.activity-item {
background: white;
border-radius: 12px;
padding: 12px;
display: flex;
align-items: center;
gap: 12px;
}
.activity-avatar {
width: 40px;
height: 40px;
border-radius: 50%;
background: linear-gradient(135deg, #00D68F, #00B87A);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
font-size: 0.9rem;
}
.activity-content {
flex: 1;
}
.activity-content p {
margin: 0 0 3px 0;
color: #333;
font-size: 0.9rem;
}
.activity-time {
color: #999;
font-size: 0.75rem;
}
.activity-preview img {
width: 50px;
height: 50px;
border-radius: 8px;
object-fit: cover;
}
.activity-action {
font-size: 1.2rem;
}
/* CTA Final */
.home-cta-section {
margin-top: 30px;
}
.home-cta-card {
background: linear-gradient(135deg, #FF5D9E, #FF8E8E);
color: white;
border-radius: 20px;
padding: 30px 20px;
text-align: center;
box-shadow: 0 5px 25px rgba(255, 93, 158, 0.3);
}
.home-cta-card h3 {
margin: 0 0 10px 0;
font-size: 1.5rem;
}
.home-cta-card p {
margin: 0 0 20px 0;
opacity: 0.95;
}
.btn-cta-join {
background: white;
color: #FF5D9E;
border: none;
padding: 12px 30px;
border-radius: 25px;
font-size: 1rem;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}
.btn-cta-join:hover {
transform: scale(1.05);
box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
/* Responsive */
@media (max-width: 768px) {
.hero-title {
font-size: 1.5rem;
}
.popular-services-grid {
    grid-template-columns: 1fr;
}

.featured-barber-card {
    min-width: 180px;
}
}




/* BÚSQUEDA AVANZADA */
.advanced-search-bar {
    max-width: 700px;
    margin: 0 auto;
    position: relative;
}

.search-input-container {
    position: relative;
    display: flex;
    align-items: center;
    background: #F5F5F5;
    border-radius: 25px;
    padding: 5px 10px;
    gap: 10px;
}

.filter-toggle-btn {
    background: #00D68F;
    border: none;
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-toggle-btn:hover {
    background: #00B87A;
    transform: scale(1.1);
}

.advanced-filters-panel {
    position: absolute;
    top: 55px;
    left: 0;
    right: 0;
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.15);
    display: none;
    z-index: 1005;
    animation: slideDown 0.3s ease;
}

.advanced-filters-panel.active {
    display: block;
}

@keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.filter-group {
    margin-bottom: 15px;
}

.filter-label {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
}

.filter-input, .filter-select {
    width: 100%;
    padding: 10px 15px;
    border: 2px solid #E5E5E5;
    border-radius: 10px;
    font-size: 0.95rem;
    transition: border-color 0.3s ease;
}

.filter-input:focus, .filter-select:focus {
    outline: none;
    border-color: #00D68F;
}

.filter-slider {
    width: 100%;
    height: 6px;
    border-radius: 5px;
    background: linear-gradient(to right, #00D68F 0%, #00D68F 25%, #E5E5E5 25%, #E5E5E5 100%);
    outline: none;
    -webkit-appearance: none;
}

.filter-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00D68F;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.price-range {
    display: flex;
    gap: 10px;
    align-items: center;
}

.price-input {
    flex: 1;
    padding: 10px;
    border: 2px solid #E5E5E5;
    border-radius: 10px;
    font-size: 0.9rem;
}

.filter-actions {
    display: flex;
    gap: 10px;
    margin-top: 20px;
}

.btn-filter-apply, .btn-filter-clear {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-filter-apply {
    background: #00D68F;
    color: white;
}

.btn-filter-apply:hover {
    background: #00B87A;
    transform: scale(1.05);
}

.btn-filter-clear {
    background: #F5F5F5;
    color: #333;
}

.btn-filter-clear:hover {
    background: #E5E5E5;
}













/* PERFIL MEJORADO */
.barber-profile-enhanced {
    display: none;
    background: #F5F5F5;
    min-height: 100vh;
    padding-bottom: 100px;
}

.barber-profile-enhanced.active {
    display: block;
}

.profile-hero {
    position: relative;
    background: white;
    margin-bottom: 20px;
}

.profile-cover {
    height: 150px;
    overflow: hidden;
}

.profile-cover img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.profile-main-info {
    padding: 0 20px 20px;
    position: relative;
    margin-top: -50px;
}

.profile-photo-container {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 0 auto 15px;
}

.profile-photo {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00D68F, #00B87A);
    border: 4px solid white;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2.5rem;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
}

.profile-status {
    position: absolute;
    bottom: 5px;
    right: 5px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.profile-status.online i {
    color: #00D68F;
    font-size: 0.7rem;
}

.profile-header-text {
    text-align: center;
}

.profile-name-large {
    font-size: 1.6rem;
    color: #333;
    margin: 0 0 5px 0;
}

.profile-title-large {
    color: #666;
    margin: 0 0 15px 0;
}

.profile-stats {
    display: flex;
    justify-content: space-around;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #E5E5E5;
}

.stat-item {
    text-align: center;
}

.stat-number {
    font-size: 1.3rem;
    font-weight: bold;
    color: #00D68F;
}

.stat-label {
    font-size: 0.75rem;
    color: #666;
    margin-top: 2px;
}

/* Tabs */
.profile-tabs {
    background: white;
    display: flex;
    border-bottom: 2px solid #E5E5E5;
    overflow-x: auto;
}

.tab-item {
    flex: 1;
    padding: 15px 10px;
    text-align: center;
    cursor: pointer;
    color: #666;
    font-size: 0.85rem;
    font-weight: 600;
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.tab-item.active {
    color: #00D68F;
    border-bottom-color: #00D68F;
}

.tab-item i {
    display: block;
    font-size: 1.2rem;
    margin-bottom: 5px;
}

/* Contenido de tabs */
.profile-tab-content {
    background: white;
    min-height: 400px;
}

.tab-pane {
    display: none;
    padding: 25px;
    animation: fadeIn 0.3s ease;
}

.tab-pane.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.section-heading {
    color: #333;
    font-size: 1.1rem;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.profile-bio {
    color: #666;
    line-height: 1.6;
    background: #F5F5F5;
    padding: 15px;
    border-radius: 10px;
}

.specialties-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.specialty-tag {
    background: linear-gradient(135deg, #00D68F, #00B87A);
    color: white;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 0.85rem;
    font-weight: 500;
}

.schedule-list {
    background: #F5F5F5;
    border-radius: 10px;
    overflow: hidden;
}

.schedule-item {
    display: flex;
    justify-content: space-between;
    padding: 12px 15px;
    border-bottom: 1px solid #E5E5E5;
}

.schedule-item:last-child {
    border-bottom: none;
}

.schedule-day {
    font-weight: 600;
    color: #333;
}

.schedule-time {
    color: #666;
}

/* Servicios mejorados */
.services-list-enhanced .service-item {
    background: #F5F5F5;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
}

.services-list-enhanced .service-item:hover {
    background: #00D68F;
    color: white;
    transform: translateX(5px);
}

/* Galería mejorada */
.gallery-grid-enhanced {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
}

.gallery-item-enhanced {
    aspect-ratio: 1;
    background: linear-gradient(135deg, #E5E5E5, #D5D5D5);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    cursor: pointer;
}

.gallery-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: #999;
}

.gallery-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 214, 143, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.gallery-item-enhanced:hover .gallery-overlay {
    opacity: 1;
}

/* Reseñas */
.reviews-summary {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 20px;
    margin-bottom: 25px;
    padding: 20px;
    background: #F5F5F5;
    border-radius: 12px;
}

.summary-rating {
    text-align: center;
}

.big-rating {
    font-size: 3rem;
    font-weight: bold;
    color: #00D68F;
}

.stars-large {
    color: #FFD700;
    font-size: 1.2rem;
    margin: 5px 0;
}

.reviews-count {
    color: #666;
    font-size: 0.85rem;
}

.rating-bar-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.bar-label {
    font-size: 0.85rem;
    width: 40px;
    color: #666;
}

.bar-container {
    flex: 1;
    height: 8px;
    background: #E5E5E5;
    border-radius: 4px;
    overflow: hidden;
}

.bar-fill {
    height: 100%;
    background: #FFD700;
    border-radius: 4px;
}

.bar-count {
    font-size: 0.85rem;
    color: #666;
    width: 30px;
    text-align: right;
}

.review-card {
    background: #F5F5F5;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 12px;
}

.review-header {
    display: flex;
    gap: 12px;
    margin-bottom: 10px;
}

.reviewer-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #FF5D9E, #FF8E8E);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 0.9rem;
}

.reviewer-info h5 {
    margin: 0 0 4px 0;
    font-size: 0.95rem;
    color: #333;
}

.review-meta {
    display: flex;
    gap: 10px;
    font-size: 0.8rem;
}

.review-stars {
    color: #FFD700;
}

.review-date {
    color: #999;
}

.review-text {
    color: #666;
    line-height: 1.5;
    margin: 10px 0;
}

.review-actions {
    display: flex;
    gap: 10px;
}

.review-action-btn {
    background: none;
    border: 1px solid #E5E5E5;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    color: #666;
    cursor: pointer;
    transition: all 0.3s ease;
}

.review-action-btn:hover {
    background: #00D68F;
    color: white;
    border-color: #00D68F;
}

.btn-load-more-reviews {
    width: 100%;
    padding: 12px;
    background: #F5F5F5;
    border: 2px dashed #E5E5E5;
    border-radius: 10px;
    color: #666;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-load-more-reviews:hover {
    background: #E5E5E5;
}

/* Barra de acciones */
.profile-action-bar {
    position: absolute;
    left: 0;
    right: 0;
    background: white;
    padding: 15px 20px;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    display: flex;
    gap: 10px;
    z-index: 999;
}

.btn-action-primary, .btn-action-secondary {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
}

.btn-action-primary {
    background: #00D68F;
    color: white;
}

.btn-action-secondary {
    background: #F5F5F5;
    color: #333;
}

.btn-action-primary:hover {
    background: #00B87A;
    transform: scale(1.05);
}

.btn-action-secondary:hover {
    background: #E5E5E5;
}

@media (max-width: 768px) {
    .reviews-summary {
        grid-template-columns: 1fr;
    }
    
    .profile-action-bar {
        flex-direction: column;
    }
    
    .btn-action-secondary:first-child {
        display: none;
    }
}






/* ================================ */
/* RED SOCIAL - ESTILOS */
/* ================================ */

/* Tabs de Red Social */
.social-tabs {
    background: white;
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    border-bottom: 2px solid #E5E5E5;
    position: sticky;
    top: 0;
    z-index: 100;
}

.social-tab {
    flex: 1;
    text-align: center;
    padding: 10px;
    cursor: pointer;
    color: #666;
    font-size: 0.85rem;
    font-weight: 600;
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
}

.social-tab.active {
    color: #00D68F;
    border-bottom-color: #00D68F;
}

.social-tab i {
    display: block;
    font-size: 1.2rem;
    margin-bottom: 4px;
}

.social-tab-content {
    display: none;
    padding: 15px;
}

.social-tab-content.active {
    display: block;
}

/* Stories */
.stories-section {
    background: white;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 12px;
}

.social-section-title {
    font-size: 1rem;
    color: #333;
    margin: 0 0 12px 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.stories-slider {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    padding-bottom: 8px;
}

.stories-slider::-webkit-scrollbar {
    height: 4px;
}

.story-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    cursor: pointer;
}

.story-ring {
    width: 65px;
    height: 65px;
    border-radius: 50%;
    padding: 3px;
    background: linear-gradient(135deg, #FF5D9E, #FFD700);
}

.story-ring.viewed {
    background: #E5E5E5;
}

.story-avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: linear-gradient(135deg, #00D68F, #00B87A);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    border: 3px solid white;
}

.story-name {
    font-size: 0.75rem;
    color: #666;
    max-width: 65px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Publicaciones */
.social-feed {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.post-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}

.post-header {
    padding: 12px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.post-author-info {
    display: flex;
    gap: 10px;
    align-items: center;
}

.post-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00D68F, #00B87A);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

.post-author-details h4 {
    margin: 0;
    font-size: 0.95rem;
    color: #333;
}

.post-time {
    font-size: 0.75rem;
    color: #999;
}

.post-time i {
    font-size: 0.7rem;
}

.post-options-btn {
    background: none;
    border: none;
    color: #666;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px;
}

.post-content {
    padding: 0 15px 12px;
}

.post-text {
    color: #333;
    line-height: 1.5;
    margin: 0;
}

.post-hashtag {
    color: #00D68F;
    font-weight: 600;
    cursor: pointer;
}

.post-media {
    width: 100%;
    max-height: 500px;
    overflow: hidden;
}

.post-media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    cursor: pointer;
}

.post-stats {
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    border-top: 1px solid #E5E5E5;
    font-size: 0.85rem;
    color: #666;
}

.post-stat-item {
    display: flex;
    align-items: center;
    gap: 4px;
}

.post-stat-item i {
    font-size: 0.8rem;
}

.post-actions {
    padding: 8px 10px;
    display: flex;
    justify-content: space-around;
    border-top: 1px solid #E5E5E5;
}

.post-action-btn {
    flex: 1;
    background: none;
    border: none;
    color: #666;
    font-size: 0.9rem;
    font-weight: 600;
    padding: 8px;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.post-action-btn:hover {
    background: #F5F5F5;
}

.post-action-btn.liked {
    color: #FF5D9E;
}

.post-action-btn.liked i {
    animation: heartBeat 0.5s;
}

@keyframes heartBeat {
    0%, 100% { transform: scale(1); }
    25% { transform: scale(1.3); }
    50% { transform: scale(1.1); }
}

/* Comentarios */
.post-comments {
    border-top: 1px solid #E5E5E5;
    padding: 12px 15px;
}

.comments-list {
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: 12px;
}

.comment-item {
    display: flex;
    gap: 10 px;
margin-bottom: 12px;
}


.comment-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
background: linear-gradient(135deg, #FF5D9E, #FF8E8E);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-size: 0.8rem;
font-weight: bold;
flex-shrink: 0;
}
.comment-content {
flex: 1;
}
.comment-header {
display: flex;
align-items: center;
gap: 8px;
margin-bottom: 4px;
}
.comment-header strong {
font-size: 0.9rem;
color: #333;
}
.comment-time {
font-size: 0.75rem;
color: #999;
}
.comment-content p {
margin: 0 0 6px 0;
font-size: 0.9rem;
color: #333;
line-height: 1.4;
}
.comment-actions {
display: flex;
gap: 12px;
}
.comment-actions button {
background: none;
border: none;
color: #666;
font-size: 0.8rem;
cursor: pointer;
padding: 2px 0;
}
.comment-input-area {
display: flex;
gap: 8px;
align-items: center;
}
.comment-avatar-small {
width: 32px;
height: 32px;
border-radius: 50%;
background: linear-gradient(135deg, #00D68F, #00B87A);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: bold;
font-size: 0.8rem;
}
.comment-input {
flex: 1;
border: 1px solid #E5E5E5;
border-radius: 20px;
padding: 8px 15px;
font-size: 0.9rem;
outline: none;
}
.comment-input:focus {
border-color: #00D68F;
}
.send-comment-btn {
background: #00D68F;
border: none;
color: white;
width: 32px;
height: 32px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.3s ease;
}
.send-comment-btn:hover {
background: #00B87A;
transform: scale(1.1);
}
/* Promociones */
.post-service {
border: 2px solid #FFD700;
}
.service-promo {
background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 93, 158, 0.1));
padding: 20px;
text-align: center;
border-radius: 12px;
}

.service-promo h3 {
margin: 0 0 8px 0;
color: #333;
font-size: 1.2rem;
}
.service-promo p {
margin: 0 0 15px 0;
color: #666;
}
.btn-promo-book {
background: #FF5D9E;
color: white;
border: none;
padding: 12px 30px;
border-radius: 25px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}
.btn-promo-book:hover {
background: #FF4D8E;
transform: scale(1.05);
}
/* Botón cargar más */
.btn-load-more-posts {
width: 100%;
padding: 12px;
background: white;
border: 2px dashed #E5E5E5;
border-radius: 12px;
color: #666;
font-weight: 600;
cursor: pointer;
margin-top: 15px;
transition: all 0.3s ease;
}
.btn-load-more-posts:hover {
background: #F5F5F5;
border-color: #00D68F;
}
/* Siguiendo */
.following-header {
background: white;
padding: 15px;
border-radius: 12px;
margin-bottom: 15px;
}
.following-header h3 {
margin: 0 0 5px 0;
color: #333;
}
.following-count {
margin: 0;
color: #666;
font-size: 0.9rem;
}
.following-list {
display: flex;
flex-direction: column;
gap: 12px;
}
.following-item {
background: white;
border-radius: 12px;
padding: 15px;
display: flex;
align-items: center;
gap: 12px;
}
.following-avatar {
width: 50px;
height: 50px;
border-radius: 50%;
background: linear-gradient(135deg, #00D68F, #00B87A);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: bold;
cursor: pointer;
}
.following-info {
flex: 1;
}
.following-info h5 {
margin: 0 0 3px 0;
color: #333;
font-size: 0.95rem;
}
.following-info p {
margin: 0 0 5px 0;
color: #666;
font-size: 0.8rem;
}
.following-stats {
font-size: 0.75rem;
color: #999;
}
.btn-following {
background: #F5F5F5;
border: 1px solid #E5E5E5;
color: #666;
padding: 8px 16px;
border-radius: 20px;
font-size: 0.85rem;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}
.btn-following:hover {
background: #FF5D9E;
color: white;
border-color: #FF5D9E;
}
/* Tendencias */
.trending-header {
background: white;
padding: 15px;
border-radius: 12px;
margin-bottom: 15px;
display: flex;
justify-content: space-between;
align-items: center;
}
.trending-filter {
border: 1px solid #E5E5E5;
border-radius: 8px;
padding: 6px 12px;
font-size: 0.85rem;
background: white;
}
.trending-tags {
background: white;
border-radius: 12px;
padding: 10px;
margin-bottom: 15px;
}
.trending-tag-item {
padding: 12px;
display: flex;
align-items: center;
gap: 12px;
border-bottom: 1px solid #E5E5E5;
cursor: pointer;
transition: all 0.3s ease;
}
.trending-tag-item:last-child {
border-bottom: none;
}
.trending-tag-item:hover {
background: #F5F5F5;
}
.tag-rank {
width: 30px;
height: 30px;
background: linear-gradient(135deg, #FFD700, #FFA500);
color: white;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
}
.tag-info {
flex: 1;
}
.tag-info h5 {
margin: 0 0 3px 0;
color: #00D68F;
font-size: 0.95rem;
}
.tag-info p {
margin: 0;
color: #666;
font-size: 0.8rem;
}
.trending-posts-grid {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 4px;
}
.trending-post-thumb {
aspect-ratio: 1;
position: relative;
cursor: pointer;
overflow: hidden;
}
.trending-post-thumb img {
width: 100%;
height: 100%;
object-fit: cover;
}
.thumb-overlay {
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.4);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: 600;
opacity: 0;
transition: opacity 0.3s ease;
}
.trending-post-thumb:hover .thumb-overlay {
opacity: 1;
}
/* Guardados */
.saved-collections {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 12px;
margin-bottom: 15px;
}
.collection-card {
background: white;
border-radius: 12px;
padding: 20px;
text-align: center;
cursor: pointer;
transition: all 0.3s ease;
}
.collection-card:hover {
transform: translateY(-5px);
box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.collection-icon {
font-size: 2.5rem;
margin-bottom: 10px;
}
.collection-card h5 {
margin: 0 0 5px 0;
color: #333;
}
.collection-card p {
margin: 0;
color: #666;
font-size: 0.85rem;
}
/* Modales */
.image-viewer-modal {
display: none;
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.95);
z-index: 10000;
align-items: center;
justify-content: center;
}
.image-viewer-modal.active {
display: flex;
}
.close-viewer-btn {
position: absolute;
top: 20px;
right: 20px;
background: rgba(255,255,255,0.2);
border: none;
color: white;
width: 40px;
height: 40px;
border-radius: 50%;
font-size: 1.2rem;
cursor: pointer;
z-index: 10001;
}
#viewerImage {
max-width: 90%;
max-height: 90%;
object-fit: contain;
}
.viewer-actions {
position: absolute;
bottom: 30px;
left: 50%;
transform: translateX(-50%);
display: flex;
gap: 15px;
}
.viewer-actions button {
background: rgba(255,255,255,0.2);
border: none;
color: white;
width: 50px;
height: 50px;
border-radius: 50%;
font-size: 1.2rem;
cursor: pointer;
backdrop-filter: blur(10px);
}
/* Historias Modal */
.story-viewer-modal {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: black;
z-index: 10000;
}
.story-viewer-container {
position: relative;
height: 100%;
max-width: 500px;
margin: 0 auto;
}
.close-story-btn {
position: absolute;
top: 20px;
right: 20px;
background: rgba(255,255,255,0.3);
border: none;
color: white;
width: 40px;
height: 40px;
border-radius: 50%;
font-size: 1.2rem;
cursor: pointer;
z-index: 10001;
}
.story-progress-bars {
position: absolute;
top: 10px;
left: 10px;
right: 10px;
display: flex;
gap: 4px;
z-index: 10001;
}
.progress-bar {
flex: 1;
height: 3px;
background: rgba(255,255,255,0.3);
border-radius: 2px;
overflow: hidden;
}
.progress-bar.active {
background: white;
animation: progressFill 5s linear;
}
@keyframes progressFill {
from { width: 0%; }
to { width: 100%; }
}
.story-header {
position: absolute;
top: 25px;
left: 10px;
right: 10px;
z-index: 10001;
}
.story-author-info {
display: flex;
align-items: center;
gap: 10px;
}
.story-author-avatar {
width: 35px;
height: 35px;
border-radius: 50%;
background: linear-gradient(135deg, #00D68F, #00B87A);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: bold;
border: 2px solid white;
}
.story-author-details h5 {
margin: 0;
color: white;
font-size: 0.9rem;
}
.story-author-details span {
color: rgba(255,255,255,0.8);
font-size: 0.75rem;
}
.story-content {
width: 100%;
height: 100%;
display: flex;
align-items: center;
justify-content: center;
}
.story-content img {
max-width: 100%;
max-height: 100%;
object-fit: contain;
}
.story-navigation {
position: absolute;
top: 0;
bottom: 0;
left: 0;
right: 0;
display: flex;
justify-content: space-between;
align-items: center;
padding: 0 10px;
}
.story-nav-btn {
background: rgba(255,255,255,0.2);
border: none;
color: white;
width: 40px;
height: 40px;
border-radius: 50%;
font-size: 1.2rem;
cursor: pointer;
backdrop-filter: blur(10px);
}
@media (max-width: 768px) {
.social-tab span {
display: none;
}
.trending-posts-grid {
    grid-template-columns: repeat(2, 1fr);
}

}


/* Popup personalizado */
.custom-popup .leaflet-popup-content-wrapper {
    border-radius: 15px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.2);
    padding: 0;
}

.custom-popup .leaflet-popup-tip {
    background: white;
}

.custom-popup .leaflet-popup-content {
    margin: 0;
}

.custom-marker {
    cursor: pointer;
}

.custom-marker:hover {
    transform: scale(1.1);
    z-index: 1000 !important;
}




/* ================================ */
/* FORO COMUNITARIO */
/* ================================ */

.forum-header {
    background: white;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.forum-title {
    margin: 0;
    font-size: 1.3rem;
    color: #333;
    display: flex;
    align-items: center;
    gap: 10px;
}

.btn-new-topic {
    background: linear-gradient(135deg, #00D68F, #00B87A);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 214, 143, 0.3);
}

.btn-new-topic:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 214, 143, 0.4);
}

/* Categorías */
.forum-categories {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding: 10px 0;
    margin-bottom: 15px;
}

.category-pill {
    background: white;
    border: 2px solid #E5E5E5;
    color: #666;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 6px;
}

.category-pill:hover, .category-pill.active {
    background: #00D68F;
    color: white;
    border-color: #00D68F;
}

/* Lista de temas */
.forum-topics-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.forum-topic {
    background: white;
    border-radius: 15px;
    padding: 15px;
    display: flex;
    gap: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    position: relative;
}

.forum-topic:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

.forum-topic.pinned {
    border: 2px solid #FFD700;
}

.forum-topic.hot {
    border: 2px solid #FF5D9E;
}

.topic-pin-badge, .topic-hot-badge {
    position: absolute;
    top: -10px;
    right: 15px;
    background: #FFD700;
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 700;
    box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
}

.topic-hot-badge {
    background: #FF5D9E;
    box-shadow: 0 2px 8px rgba(255, 93, 158, 0.3);
}

.topic-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    flex-shrink: 0;
}

.topic-content {
    flex: 1;
}

.topic-title {
    margin: 0 0 8px 0;
    font-size: 1rem;
    color: #333;
    line-height: 1.4;
}

.topic-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 8px;
    font-size: 0.8rem;
    color: #666;
}

.topic-author strong {
    color: #00D68F;
}

.topic-category {
    background: rgba(0, 214, 143, 0.1);
    color: #00D68F;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 600;
}

.topic-preview {
    margin: 0;
    color: #666;
    font-size: 0.9rem;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.topic-stats {
    display: flex;
    flex-direction: column;
    gap: 8px;
    justify-content: center;
    align-items: center;
    border-left: 1px solid #E5E5E5;
    padding-left: 15px;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.85rem;
    color: #666;
}

.stat-item i {
    color: #00D68F;
}

/* Modal de tema completo */
.forum-topic-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 3000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.forum-modal-content {
    background: white;
    border-radius: 20px;
    max-width: 700px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    padding: 30px;
}

.close-forum-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #F5F5F5;
    border: none;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    color: #666;
}

/* Modal nuevo tema */
.new-topic-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 3000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.new-topic-content {
    background: white;
    border-radius: 20px;
    max-width: 600px;
    width: 100%;
    padding: 30px;
}

.new-topic-content h3 {
    margin: 0 0 20px 0;
    color: #333;
    display: flex;
    align-items: center;
    gap: 10px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #333;
}

.form-input, .form-textarea {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #E5E5E5;
    border-radius: 10px;
    font-size: 1rem;
    font-family: inherit;
}

.form-input:focus, .form-textarea:focus {
    outline: none;
    border-color: #00D68F;
}

.form-textarea {
    resize: vertical;
}

.form-actions {
    display: flex;
    gap: 10px;
    margin-top: 25px;
}

.btn-cancel, .btn-publish {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel {
    background: #F5F5F5;
    color: #666;
}

.btn-publish {
    background: #00D68F;
    color: white;
}

.btn-publish:hover {
    background: #00B87A;
    transform: scale(1.05);
}

@media (max-width: 768px) {
    .topic-stats {
        flex-direction: row;
        border-left: none;
        border-top: 1px solid #E5E5E5;
        padding: 10px 0 0 0;
        width: 100%;
    }

    .forum-topic {
        flex-wrap: wrap;
    }
}




/* ================================ */
/* TIENDA DE PRODUCTOS DE BARBERÍA */
/* ================================ */

/* Banner */
.store-banner {
    background: linear-gradient(135deg, #ff5d9e 0%, #00d68f 100%);
    color: white;
    padding: 30px 20px;
    border-radius: 20px;
    margin-bottom: 20px;
    text-align: center;
}

.banner-content h1 {
    margin: 0 0 10px 0;
    font-size: 2rem;
}

.banner-content p {
    margin: 0 0 15px 0;
    opacity: 0.9;
}

.banner-promo {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}

.promo-badge {
background: #FFD700;
color: #333;
padding: 4px 12px;
border-radius: 15px;
font-size: 0.75rem;
font-weight: 700;
display: inline-block;
margin-bottom: 10px;
}

.promo-text {
    font-size: 0.9rem;
    opacity: 0.95;
}

/* Buscador Tienda */
.store-search-bar {
    background: white;
    border-radius: 15px;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}

.store-search-bar i {
    color: #fff;
    font-size: 1.2rem;
}

h2#texti {
    margin-bottom: 17px;
}

#storeSearchInput {
    flex: 1;
    border: none;
    font-size: 1rem;
    outline: none;
}

.filter-btn {
    background: #00D68F;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-btn:hover {
    background: #00B87A;
}

/* Filtros */
.store-filters {
    background: white;
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}

.filter-group {
    margin-bottom: 15px;
}

.filter-group:last-child {
    margin-bottom: 0;
}

.filter-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: #333;
}

.filter-select {
    width: 100%;
    padding: 10px 15px;
    border: 2px solid #E5E5E5;
    border-radius: 10px;
    font-size: 0.95rem;
}

.price-range-filter {
    display: flex;
    gap: 8px;
    align-items: center;
}

.price-input-small {
    flex: 1;
    padding: 8px 12px;
    border: 2px solid #E5E5E5;
    border-radius: 8px;
    font-size: 0.9rem;
}

.apply-price-btn {
    background: #00D68F;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
}

/* Categorías Tienda */
.store-categories {
    margin-bottom: 30px;
}

.section-title-store {
    font-size: 1.3rem;
    color: #333;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.categories-grid-store {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
}

.store-category-card {
    background: white;
    border-radius: 15px;
    padding: 20px 15px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    border: 2px solid transparent;
}

.store-category-card:hover,
.store-category-card.active {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    border-color: #00D68F;
}

.category-icon-store {
    font-size: 2.5rem;
    margin-bottom: 10px;
}

.category-name-store {
    font-weight: 600;
    color: #333;
    margin-bottom: 5px;
}

.category-count {
    font-size: 0.8rem;
    color: #666;
}

/* Grid de Productos */
.products-grid-main {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.product-card-store {
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
    cursor: pointer;
}

.product-card-store:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.product-image-store {
    width: 100%;
    height: 220px;
    overflow: hidden;
    position: relative;
    background: #f5f5f5;
}

.product-image-store img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.product-card-store:hover .product-image-store img {
    transform: scale(1.1);
}

.product-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #FF5D9E;
    color: white;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.75rem;
    font-weight: 700;
}

.product-stock-low {
    background: #FFD700;
    color: #333;
}

.product-info-store {
    padding: 15px;
}

.product-brand {
    color: #00D68F;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 5px;
}

.product-name-store {
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
    font-size: 1rem;
    line-height: 1.3;
}

.product-rating-store {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 10px;
}

.product-stars {
    color: #FFD700;
    font-size: 0.9rem;
}

.product-rating-num {
    color: #666;
    font-size: 0.85rem;
}

.product-price-store {
    color: #00D68F;
    font-size: 1.3rem;
    font-weight: bold;
    margin-bottom: 10px;
}

.product-stock {
    font-size: 0.8rem;
    color: #666;
    margin-bottom: 12px;
}

.product-stock.low {
    color: #FF5D9E;
    font-weight: 600;
}

.add-to-cart-store {
    width: 100%;
    padding: 12px;
    background: #FF5D9E;
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.add-to-cart-store:hover {
    background: #FF4D8E;
    transform: scale(1.05);
}

/* Slider de Destacados */
.products-slider {
    display: flex;
    gap: 15px;
    overflow-x: auto;
    padding-bottom: 15px;
    scroll-snap-type: x mandatory;
}

.products-slider::-webkit-scrollbar {
    height: 6px;
}

.products-slider::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.products-slider::-webkit-scrollbar-thumb {
    background: #00D68F;
    border-radius: 10px;
}

.product-card-slider {
    min-width: 220px;
    scroll-snap-align: start;
}

/* Headers */
.section-header-store {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.view-all-link {
    color: #00D68F;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 5px;
}

.results-count {
    color: #666;
    font-size: 0.9rem;
}

.featured-products-section,
.products-main-section {
    margin-bottom: 30px;
}

/* Responsive */
@media (max-width: 768px) {
    .banner-content h1 {
        font-size: 1.5rem;
    }
    
    .categories-grid-store {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .products-grid-main {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    }
    
    .product-image-store {
        height: 180px;
    }
}






    </style>
</head>
<body>
    <div class="landing-page" id="landingPage">
        <div class="landing-logo"><img id="logo_barber" src="logo.png" alt=""></div>
        <p class="landing-tagline">Un corte de innovación para tu estilo de vida</p>
        <button class="landing-cta" onclick="showApp()">!Quiero un Corte!</button>
        <p class="landing-signin">¿No tienes cuenta? <a onclick="showSignUp()">Regístrate aquí</a></p>
        <p class="landing-signin">¿Ya tienes cuenta? <a onclick="showSignIn()">Inicia sesión</a></p>
    </div>

    <div class="auth-container" id="signUpForm">
        <div class="auth-header"><h2>Crear Cuenta</h2><p>Únete a BarberLink</p></div>
        <div class="form-group"><label>Nombre Completo</label><input type="text" id="signUpName" placeholder="Juan Pérez"></div>
        <div class="form-group"><label>Email</label><input type="email" id="signUpEmail" placeholder="tu@email.com"></div>
        <div class="form-group"><label>Teléfono</label><input type="tel" id="signUpPhone" placeholder="+57 300 123 4567"></div>
        <div class="form-group"><label>Contraseña</label><input type="password" id="signUpPassword" placeholder="••••••••"></div>
        <div class="form-actions">
            <button class="auth-btn auth-btn-secondary" onclick="closeAuthForms()">Cancelar</button>
            <button class="auth-btn auth-btn-primary" onclick="handleSignUp()">Registrarse</button>
        </div>
        <div class="auth-toggle">¿Ya tienes cuenta? <a onclick="switchToSignIn()">Inicia sesión</a></div>
    </div>

    <div class="auth-container" id="signInForm">
        <div class="auth-header"><h2>Iniciar Sesión</h2><p>Bienvenido de nuevo</p></div>
        <div class="form-group"><label>Email</label><input type="email" id="signInEmail" placeholder="tu@email.com"></div>
        <div class="form-group"><label>Contraseña</label><input type="password" id="signInPassword" placeholder="••••••••"></div>
        <div class="form-actions">
            <button class="auth-btn auth-btn-secondary" onclick="closeAuthForms()">Cancelar</button>
            <button class="auth-btn auth-btn-primary" onclick="handleSignIn()">Entrar</button>
        </div>
        <div class="auth-toggle">¿No tienes cuenta? <a onclick="switchToSignUp()">Regístrate</a></div>
    </div>

    <div class="app-container" id="appContainer">
        <div class="main-header">
            <div class="header-logo" onclick="easterEgg()">BARBERLINK</div>
            <div class="header-user">
                <i class="fas fa-bell" style="font-size: 1.2rem; cursor: pointer;" onclick="showNotifications()"></i>
                <div style="position: relative;">
                    <i class="fas fa-shopping-cart" style="font-size: 1.2rem; cursor: pointer;" onclick="showCart()"></i>
                    <span class="cart-badge" id="cartBadge">0</span>
                </div>
                <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">U</div>
            </div>
        </div>

        <div class="main-nav">
           <!-- BÚSQUEDA MEJORADA - Reemplazar search-bar existente -->
<div class="advanced-search-bar">
    <div class="search-input-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" class="search-input" id="advancedSearchInput" 
               placeholder="Buscar barberos, servicios...">
        <button class="filter-toggle-btn" onclick="toggleAdvancedFilters()">
            <i class="fas fa-sliders-h"></i>
        </button>
    </div>
    
    <!-- Panel de filtros avanzados -->
    <div class="advanced-filters-panel" id="advancedFiltersPanel">
        <div class="filter-group">
            <label class="filter-label">
                <i class="fas fa-map-marker-alt"></i> Ubicación
            </label>
            <input type="text" class="filter-input" id="locationFilter" 
                   placeholder="QuibdÓ, Chocó" value="QuibdÓ">
        </div>
        
        <div class="filter-group">
            <label class="filter-label">
                <i class="fas fa-ruler-horizontal"></i> Radio: <span id="radiusValue">5</span> km
            </label>
            <input type="range" class="filter-slider" id="radiusSlider" 
                   min="1" max="20" value="5" 
                   oninput="updateRadiusValue(this.value)">
        </div>
        
        <div class="filter-group">
            <label class="filter-label">
                <i class="fas fa-cut"></i> Tipo de servicio
            </label>
            <select class="filter-select" id="serviceTypeFilter">
                <option value="all">Todos los servicios</option>
                <option value="corte">Corte clásico</option>
                <option value="barba">Arreglo de barba</option>
                <option value="diseno">Diseños</option>
                <option value="degradado">Degradados</option>
                <option value="combo">Combo completo</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label class="filter-label">
                <i class="fas fa-dollar-sign"></i> Rango de precio
            </label>
            <div class="price-range">
                <input type="number" class="price-input" id="minPrice" 
                       placeholder="Min" value="10000">
                <span>-</span>
                <input type="number" class="price-input" id="maxPrice" 
                       placeholder="Max" value="50000">
            </div>
        </div>
        
        <div class="filter-actions">
            <button class="btn-filter-apply" onclick="applyAdvancedFilters()">
                <i class="fas fa-check"></i> Aplicar filtros
            </button>
            <button class="btn-filter-clear" onclick="clearAdvancedFilters()">
                <i class="fas fa-times"></i> Limpiar
            </button>
        </div>
    </div>
</div>
        </div>

        <div class="main-content" id="mainContent">
       
            <!-- HOME MEJORADO CON SECCIONES DINÁMICAS -->
<div id="shopView">
    <!-- Sección Hero/Banner Principal -->
    <div class="home-hero">
        <div class="hero-content">
            <h1 class="hero-title">Encuentra tu estilo perfecto</h1>
            <p class="hero-subtitle">Conecta con los mejores barberos de QuibdÓ</p>
            <button class="hero-cta" onclick="showBarbers()">
                <i class="fas fa-search"></i> Explorar ahora
            </button>
        </div>
        <div class="hero-stats">
            <div class="hero-stat-item">
                <div class="hero-stat-number">150+</div>
                <div class="hero-stat-label">Barberos</div>
            </div>
            <div class="hero-stat-item">
                <div class="hero-stat-number">5K+</div>
                <div class="hero-stat-label">Clientes</div>
            </div>
            <div class="hero-stat-item">
                <div class="hero-stat-number">4.8★</div>
                <div class="hero-stat-label">Rating</div>
            </div>
        </div>
    </div>

    <!-- Búsqueda Rápida en Home -->

    <!-- Sección: Barberos Destacados -->    <div class="home-quick-search">
        <div class="quick-search-container">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="¿Qué servicio buscas? Ej: Degradado, barba..." 
                   class="quick-search-input" id="homeQuickSearch"
                   onfocus="showQuickSearchSuggestions()">
        </div>
    </div>

    <section class="home-section">
        <div class="section-header-home">
            <h2 class="section-title-home">
                <i class="fas fa-star"></i> Barberos Destacados
            </h2>
            <a href="#" class="section-link" onclick="event.preventDefault(); showBarbers()">
                Ver todos <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        
        <div class="featured-barbers-slider" id="featuredBarbers">
            <!-- Barbero destacado 1 -->
            <div class="featured-barber-card" onclick="showBarberProfile(1)">
                <div class="featured-badge">
                    <i class="fas fa-crown"></i> TOP
                </div>
                <div class="featured-barber-avatar">JD</div>
                <h4>Juan Domínguez</h4>
                <p class="featured-specialty">Especialista en Degradados</p>
                <div class="featured-rating">
                    <span class="stars">★★★★★</span>
                    <span>4.9 (45)</span>
                </div>
                <div class="featured-price">Desde $15.000</div>
                <button class="btn-featured-book" onclick="event.stopPropagation(); currentBarber = 1; openBooking()">
                    Reservar
                </button>
            </div>

            <!-- Barbero destacado 2 -->
            <div class="featured-barber-card" onclick="showBarberProfile(2)">
                <div class="featured-badge">
                    <i class="fas fa-crown"></i> TOP
                </div>
                <div class="featured-barber-avatar">CP</div>
                <h4>Carlos Palacios</h4>
                <p class="featured-specialty">Barbero Tradicional</p>
                <div class="featured-rating">
                    <span class="stars">★★★★★</span>
                    <span>4.7 (32)</span>
                </div>
                <div class="featured-price">Desde $12.000</div>
                <button class="btn-featured-book" onclick="event.stopPropagation(); currentBarber = 2; openBooking()">
                    Reservar
                </button>
            </div>

            <!-- Barbero destacado 3 -->
            <div class="featured-barber-card" onclick="showBarberProfile(3)">
                <div class="featured-badge">
                    <i class="fas fa-crown"></i> TOP
                </div>
                <div class="featured-barber-avatar">MT</div>
                <h4>Miguel Torres</h4>
                <p class="featured-specialty">Diseños Artísticos</p>
                <div class="featured-rating">
                    <span class="stars">★★★★★</span>
                    <span>4.8 (28)</span>
                </div>
                <div class="featured-price">Desde $20.000</div>
                <button class="btn-featured-book" onclick="event.stopPropagation(); currentBarber = 3; openBooking()">
                    Reservar
                </button>
            </div>
        </div>
    </section>

    <!-- Sección: Cerca de Ti -->
    <section class="home-section">
        <div class="section-header-home">
            <h2 class="section-title-home">
                <i class="fas fa-map-marker-alt"></i> Cerca de Ti
            </h2>
            <a href="#" class="section-link" onclick="event.preventDefault(); showBarbers()">
                Ver mapa <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        
        <div class="nearby-barbers-list" id="nearbyBarbersList">
            <!-- Barbero cercano 1 -->
            <div class="nearby-barber-item" onclick="showBarberProfile(4)">
                <div class="nearby-barber-avatar">AM</div>
                <div class="nearby-barber-info">
                    <h5>Andrés Mosquera</h5>
                    <p class="nearby-specialty">Servicio a Domicilio</p>
                    <div class="nearby-distance">
                        <i class="fas fa-location-arrow"></i> 0.5 km
                    </div>
                </div>
                <div class="nearby-barber-meta">
                    <div class="nearby-rating">★ 4.6</div>
                    <div class="nearby-status online">
                        <i class="fas fa-circle"></i> Disponible
                    </div>
                </div>
            </div>

            <!-- Barbero cercano 2 -->
            <div class="nearby-barber-item" onclick="showBarberProfile(1)">
                <div class="nearby-barber-avatar">JD</div>
                <div class="nearby-barber-info">
                    <h5>Juan Domínguez</h5>
                    <p class="nearby-specialty">Cortes Modernos</p>
                    <div class="nearby-distance">
                        <i class="fas fa-location-arrow"></i> 0.8 km
                    </div>
                </div>
                <div class="nearby-barber-meta">
                    <div class="nearby-rating">★ 4.9</div>
                    <div class="nearby-status online">
                        <i class="fas fa-circle"></i> Disponible
                    </div>
                </div>
            </div>

            <!-- Barbero cercano 3 -->
            <div class="nearby-barber-item" onclick="showBarberProfile(2)">
                <div class="nearby-barber-avatar">CP</div>
                <div class="nearby-barber-info">
                    <h5>Carlos Palacios</h5>
                    <p class="nearby-specialty">Barbero Profesional</p>
                    <div class="nearby-distance">
                        <i class="fas fa-location-arrow"></i> 1.2 km
                    </div>
                </div>
                <div class="nearby-barber-meta">
                    <div class="nearby-rating">★ 4.7</div>
                    <div class="nearby-status busy">
                        <i class="fas fa-circle"></i> Ocupado
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección: Servicios Populares -->
    <section class="home-section">
        <div class="section-header-home">
            <h2 class="section-title-home">
                <i class="fas fa-fire"></i> Servicios Populares
            </h2>
        </div>
        
        <div class="popular-services-grid">
            <div class="service-category-card" onclick="filterByService('degradado')">
                <div class="service-icon">✂️</div>
                <h4>Degradados</h4>
                <p>$15.000 - $25.000</p>
                <span class="service-popularity">
                    <i class="fas fa-fire"></i> 320 servicios/mes
                </span>
            </div>

            <div class="service-category-card" onclick="filterByService('barba')">
                <div class="service-icon">💈</div>
                <h4>Arreglo Barba</h4>
                <p>$8.000 - $15.000</p>
                <span class="service-popularity">
                    <i class="fas fa-fire"></i> 280 servicios/mes
                </span>
            </div>

            <div class="service-category-card" onclick="filterByService('diseno')">
                <div class="service-icon">🎨</div>
                <h4>Diseños</h4>
                <p>$20.000 - $35.000</p>
                <span class="service-popularity">
                    <i class="fas fa-fire"></i> 195 servicios/mes
                </span>
            </div>

            <div class="service-category-card" onclick="filterByService('combo')">
                <div class="service-icon">💇‍</div>
                <h4>Combo Completo</h4>
                <p>$25.000 - $40.000</p>
                <span class="service-popularity">
                    <i class="fas fa-fire"></i> 250 servicios/mes
                </span>
            </div>
        </div>
    </section>

    <!-- Sección: Recomendados por IA -->
    <section class="home-section ai-recommendations">
        <div class="section-header-home">
            <h2 class="section-title-home">
                <i class="fas fa-robot"></i> Recomendados para Ti
            </h2>
            <span class="ai-badge">
                <i class="fas fa-magic"></i> IA
            </span>
        </div>
        
        <p class="ai-recommendations-subtitle">
            Basado en tus preferencias y ubicación
        </p>
        
        <div class="ai-recommendations-list">
            <div class="ai-recommendation-card" onclick="showBarberProfile(1)">
                <div class="ai-card-content">
                    <div class="ai-match-score">
                        <div class="match-circle">95%</div>
                        <span>Match</span>
                    </div>
                    <div class="ai-barber-info">
                        <div class="ai-barber-avatar">JD</div>
                        <div class="ai-barber-details">
                            <h5>Juan Domínguez</h5>
                            <p>Especialista en Cortes Modernos</p>
                            <div class="ai-match-reasons">
                                <span class="match-tag">
                                    <i class="fas fa-check"></i> Cerca de ti
                                </span>
                                <span class="match-tag">
                                    <i class="fas fa-check"></i> Alta calificación
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn-ai-book" onclick="event.stopPropagation(); currentBarber = 1; openBooking()">
                    Ver disponibilidad
                </button>
            </div>

            <div class="ai-recommendation-card" onclick="showBarberProfile(3)">
                <div class="ai-card-content">
                    <div class="ai-match-score">
                        <div class="match-circle">88%</div>
                        <span>Match</span>
                    </div>
                    <div class="ai-barber-info">
                        <div class="ai-barber-avatar">MT</div>
                        <div class="ai-barber-details">
                            <h5>Miguel Torres</h5>
                            <p>Diseños y Degradados</p>
                            <div class="ai-match-reasons">
                                <span class="match-tag">
                                    <i class="fas fa-check"></i> Estilo similar
                                </span>
                                <span class="match-tag">
                                    <i class="fas fa-check"></i> Disponible hoy
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn-ai-book" onclick="event.stopPropagation(); currentBarber = 3; openBooking()">
                    Ver disponibilidad
                </button>
            </div>
        </div>
    </section>

    <!-- Sección: Actividad Reciente de la Red Social -->
    <section class="home-section social-activity">
        <div class="section-header-home">
            <h2 class="section-title-home">
                <i class="fas fa-users"></i> Actividad Reciente
            </h2>
            <a href="#" class="section-link" onclick="event.preventDefault(); showSocial()">
                Ver todo <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        
        <div class="activity-feed" id="activityFeed">
            <!-- Actividad 1 -->
            <div class="activity-item">
                <div class="activity-avatar">CM</div>
                <div class="activity-content">
                    <p><strong>Carlos Méndez</strong> dejó una reseña ★★★★★</p>
                    <span class="activity-time">Hace 2 horas</span>
                </div>
                <div class="activity-preview">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Crect fill='%2300D68F' width='60' height='60'/%3E%3Ctext x='30' y='35' text-anchor='middle' fill='white' font-size='30'%3E✂️%3C/text%3E%3C/svg%3E" alt="Preview">
                </div>
            </div>

            <!-- Actividad 2 -->
            <div class="activity-item">
                <div class="activity-avatar">JD</div>
                <div class="activity-content">
                    <p><strong>Juan Domínguez</strong> publicó un nuevo trabajo</p>
                    <span class="activity-time">Hace 5 horas</span>
                </div>
                <div class="activity-preview">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Crect fill='%23FF5D9E' width='60' height='60'/%3E%3Ctext x='30' y='35' text-anchor='middle' fill='white' font-size='30'%3E💈%3C/text%3E%3C/svg%3E" alt="Preview">
                </div>
            </div>

            <!-- Actividad 3 -->
            <div class="activity-item">
                <div class="activity-avatar">AF</div>
                <div class="activity-content">
                    <p><strong>Ana Fernández</strong> guardó a un barbero en favoritos</p>
                    <span class="activity-time">Hace 1 día</span>
                </div>
                <div class="activity-action">
                    <i class="fas fa-heart" style="color: #FF5D9E;"></i>
                </div>
            </div>

            <!-- Actividad 4 -->
            <div class="activity-item">
                <div class="activity-avatar">MT</div>
                <div class="activity-content">
                    <p><strong>Miguel Torres</strong> completó 50 servicios</p>
                    <span class="activity-time">Hace 2 días</span>
                </div>
                <div class="activity-action">
                    <i class="fas fa-trophy" style="color: #FFD700;"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección: Categorías (Mantenida del diseño original) -->
    <section class="home-section">
        <h2 class="section-title-home" id="texti">
            <i class="fas fa-th-large"></i> Explora Más Categorías
        </h2>
        <div class="categories-grid">
            <div class="category-card" onclick="showBarbers()">
                <div class="category-icon">✂️</div>
                <div class="category-name">Máquinas</div>
            </div>
            <div class="category-card" onclick="showProducts('sneakers')">
                <div class="category-icon">💈</div>
                <div class="category-name">Sneakers</div>
            </div>
            <div class="category-card" onclick="showProducts('perfume')">
                <div class="category-icon">🎭</div>
                <div class="category-name">Cuidado</div>
            </div>
            <div class="category-card" onclick="showProducts('fashion')">
                <div class="category-icon">🎒</div>
                <div class="category-name">Accesorios</div>
            </div>
            <div class="category-card" onclick="showProducts('food')">
                <div class="category-icon">📦</div>
                <div class="category-name">Kits</div>
            </div>
            <div class="category-card" onclick="showProducts('tech')">
                <div class="category-icon">💻</div>
                <div class="category-name">Technology</div>
            </div>
        </div>
    </section>

    <!-- Sección: Call to Action Final -->
    <section class="home-cta-section">
        <div class="home-cta-card">
            <h3>¿Eres barbero?</h3>
            <p>Únete a nuestra plataforma y conecta con miles de clientes</p>
            <button class="btn-cta-join" onclick="alert('Función de registro de barberos en desarrollo')">
                <i class="fas fa-user-plus"></i> Registrarte como barbero
            </button>
        </div>
    </section>
</div>
















































            <div id="barbersView" style="display: none;">
                <div class="map-search-container">
                    <h2 class="section-title"><i class="fas fa-map-marker-alt"></i> Buscar Barberos</h2>
                    
                    <!-- Controles de búsqueda del mapa -->
                    <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                        <button onclick="searchNearbyBarbers()" style="
                            flex: 1;
                            min-width: 150px;
                            padding: 12px 20px;
                            background: linear-gradient(135deg, #00D68F, #00B87A);
                            color: white;
                            border: none;
                            border-radius: 12px;
                            font-weight: 600;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 8px;
                            transition: all 0.3s ease;
                        ">
                            <i class="fas fa-search-location"></i> Buscar cerca de mí
                        </button>
                        <button onclick="showAllBarbers()" style="
                            flex: 1;
                            min-width: 150px;
                            padding: 12px 20px;
                            background: #F5F5F5;
                            color: #333;
                            border: none;
                            border-radius: 12px;
                            font-weight: 600;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 8px;
                            transition: all 0.3s ease;
                        ">
                            <i class="fas fa-users"></i> Ver todos
                        </button>
                        <button onclick="clearMapSearch()" style="
                            padding: 12px 20px;
                            background: #FF5D9E;
                            color: white;
                            border: none;
                            border-radius: 12px;
                            font-weight: 600;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 8px;
                            transition: all 0.3s ease;
                        ">
                            <i class="fas fa-times"></i> Limpiar
                        </button>
                    </div>
                    
                    <!-- Información del radio de búsqueda -->
                    <div id="searchRadiusInfo" style="
                        background: rgba(0, 214, 143, 0.1);
                        padding: 10px 15px;
                        border-radius: 10px;
                        margin-bottom: 15px;
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        font-size: 0.9rem;
                        color: #00B87A;
                    ">
                        <i class="fas fa-info-circle"></i>
                        <span>Radio de búsqueda: <strong id="currentRadiusDisplay">5</strong> km</span>
                        <span style="margin-left: auto; color: #666;" id="barbersFoundCount">Usa los filtros o botones para buscar</span>
                    </div>
                    
                    <div id="barberMap"></div>
                </div>
                <div class="barbers-list" id="barbersList"></div>
            </div>

            <div id="productsView" style="display: none;">
                <h2 class="section-title"><i class="fas fa-shopping-bag"></i><span id="productsTitle">Productos</span></h2>
                <div class="products-grid" id="productsList"></div>
            </div>

<!-- VISTA DE TIENDA (NUEVA) -->
<div id="storeView" style="display: none;">
    <!-- Banner de Tienda -->
    <div class="store-banner">
        <div class="banner-content">
            <h1>🏪 BarberShop Store</h1>
            <p>Todo lo que necesitas para tu barbería profesional</p>
        </div>
        <div class="banner-promo">
            <span class="promo-badge">🔥 ENVÍO GRATIS</span>
            <span class="promo-text">En compras superiores a $150.000</span>
        </div>
    </div>

    <!-- Buscador de Tienda -->
    <div class="store-search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Buscar productos, marcas..." id="storeSearchInput" onkeyup="searchProducts(this.value)">
        <button class="filter-btn" onclick="toggleStoreFilters()">
            <i class="fas fa-sliders-h"></i> Filtros
        </button>
    </div>

    <!-- Filtros Desplegables -->
    <div class="store-filters" id="storeFilters" style="display: none;">
        <div class="filter-group">
            <label>Ordenar por:</label>
            <select onchange="sortProducts(this.value)" class="filter-select">
                <option value="featured">Destacados</option>
                <option value="price-low">Menor precio</option>
                <option value="price-high">Mayor precio</option>
                <option value="rating">Mejor valorados</option>
                <option value="name">Nombre A-Z</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label>Rango de precio:</label>
            <div class="price-range-filter">
                <input type="number" placeholder="Min" id="minPriceFilter" class="price-input-small">
                <span>-</span>
                <input type="number" placeholder="Max" id="maxPriceFilter" class="price-input-small">
                <button class="apply-price-btn" onclick="applyPriceFilter()">Aplicar</button>
            </div>
        </div>
    </div>

    <!-- Categorías de Productos -->
    <div class="store-categories">
        <h2 class="section-title-store">
            <i class="fas fa-tags"></i> Categorías
        </h2>
        <div class="categories-grid-store">
            <div class="store-category-card active" data-category="all" onclick="filterProductsByCategory('all')">
                <div class="category-icon-store">🛍️</div>
                <div class="category-name-store">Todos</div>
                <div class="category-count">24 productos</div>
            </div>

        
            <div class="store-category-card" data-category="tijeras" onclick="filterProductsByCategory('tijeras')">
                <div class="category-icon-store">✂️</div>
                <div class="category-name-store">Maquinas & Tijeras</div>
                <div class="category-count">4 productos</div>
            </div>

            <div class="store-category-card" data-category="productos" onclick="filterProductsByCategory('productos')">
                <div class="category-icon-store">💈</div>
                <div class="category-name-store">Productos</div>
                <div class="category-count">4 productos</div>
            </div>

            <div class="store-category-card" data-category="cuidado" onclick="filterProductsByCategory('cuidado')">
                <div class="category-icon-store">🎭</div>
                <div class="category-name-store">Cuidado</div>
                <div class="category-count">4 productos</div>
            </div>

            <div class="store-category-card" data-category="accesorios" onclick="filterProductsByCategory('accesorios')">
                <div class="category-icon-store">🎒</div>
                <div class="category-name-store">Accesorios</div>
                <div class="category-count">4 productos</div>
            </div>

            <div class="store-category-card" data-category="kits" onclick="filterProductsByCategory('kits')">
                <div class="category-icon-store">📦</div>
                <div class="category-name-store">Kits</div>
                <div class="category-count">4 productos</div>
            </div>
        </div>
    </div>

    <!-- Productos Destacados -->
    <div class="featured-products-section">
        <div class="section-header-store">
            <h2 class="section-title-store">
                <i class="fas fa-star"></i> Productos Destacados
            </h2>
            <a href="#" class="view-all-link" onclick="event.preventDefault(); filterProductsByCategory('all')">
                Ver todos <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        
        <div class="products-slider" id="featuredProductsSlider">
            <!-- Se llena dinámicamente -->
        </div>
    </div>

    <!-- Grid Principal de Productos -->
    <div class="products-main-section">
        <div class="section-header-store">
            <h2 class="section-title-store" id="currentCategoryTitle">
                <i class="fas fa-shopping-bag"></i> Todos los Productos
            </h2>
            <div class="results-count">
                <span id="productsCount">24</span> productos encontrados
            </div>
        </div>
        
        <div class="products-grid-main" id="productsGridMain">
            <!-- Se llena dinámicamente -->
        </div>
    </div>
</div>

<!-- VISTA DE RED SOCIAL -->
<div id="socialView" style="display: none;">
    <!-- Tabs de Red Social -->
    <div class="social-tabs">
        <div class="social-tab active" data-tab="feed" onclick="switchSocialTab('feed')">
            <i class="fas fa-home"></i>
            <span>Feed</span>
        </div>
        <div class="social-tab" data-tab="following" onclick="switchSocialTab('following')">
            <i class="fas fa-user-friends"></i>
            <span>Siguiendo</span>
        </div>
        <div class="social-tab" data-tab="forum" onclick="switchSocialTab('forum')">
            <i class="fas fa-comments"></i>
            <span>Foro</span>
        </div>
        <div class="social-tab" data-tab="trending" onclick="switchSocialTab('trending')">
            <i class="fas fa-fire"></i>
            <span>Tendencias</span>
                    </div>
        <div class="social-tab" data-tab="saved" onclick="switchSocialTab('saved')">
            <i class="fas fa-bookmark"></i>
            <span>Guardados</span>
        </div>
    </div>

    <!-- TAB: Feed Principal -->
    <div class="social-tab-content active" id="tabFeed">
        <!-- Stories/Destacados -->
        <div class="stories-section">
            <h3 class="social-section-title">
                <i class="fas fa-bolt"></i> Historias
            </h3>
            <div class="stories-slider">
                <div class="story-item" onclick="viewStory(1)">
                    <div class="story-ring">
                        <div class="story-avatar">JD</div>
                    </div>
                    <span class="story-name">Juan D.</span>
                </div>
                
                <div class="story-item" onclick="viewStory(2)">
                    <div class="story-ring viewed">
                        <div class="story-avatar">MT</div>
                    </div>
                    <span class="story-name">Miguel T.</span>
                </div>
                
                <div class="story-item" onclick="viewStory(3)">
                    <div class="story-ring">
                        <div class="story-avatar">CP</div>
                    </div>
                    <span class="story-name">Carlos P.</span>
                </div>
                
                <div class="story-item" onclick="viewStory(4)">
                    <div class="story-ring">
                        <div class="story-avatar">AM</div>
                    </div>
                    <span class="story-name">Andrés M.</span>
                </div>
            </div>
        </div>

        <!-- Feed de Publicaciones -->
        <div class="social-feed" id="socialFeedContainer">
            <!-- Publicación 1 -->
            <article class="post-card" data-post-id="1">
                <div class="post-header">
                    <div class="post-author-info">
                        <div class="post-avatar" onclick="showBarberProfile(1)">JD</div>
                        <div class="post-author-details">
                            <h4 class="post-author-name">Juan Domínguez</h4>
                            <span class="post-time">
                                <i class="fas fa-clock"></i> Hace 2 horas
                            </span>
                        </div>
                    </div>
                    <button class="post-options-btn" onclick="showPostOptions(1)">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>

                <div class="post-content">
                    <p class="post-text">
                        Nuevo degradado con diseño personalizado 🔥 ¿Qué les parece? 
                        <span class="post-hashtag">#BarberLife</span> 
                        <span class="post-hashtag">#Degradado</span>
                    </p>
                </div>

                <div class="post-media">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Crect fill='%2300D68F' width='400' height='400'/%3E%3Ctext x='200' y='220' text-anchor='middle' fill='white' font-size='120'%3E✂️%3C/text%3E%3C/svg%3E" 
                         alt="Post image" 
                         onclick="openImageViewer(this.src)">
                </div>

                <div class="post-stats">
                    <span class="post-stat-item">
                        <i class="fas fa-heart"></i> 124 Me gusta
                    </span>
                    <span class="post-stat-item">
                        <i class="fas fa-comment"></i> 18 comentarios
                    </span>
                    <span class="post-stat-item">
                        <i class="fas fa-share"></i> 5 compartidos
                    </span>
                </div>

                <div class="post-actions">
                    <button class="post-action-btn" onclick="toggleLike(1)">
                        <i class="far fa-heart"></i> Me gusta
                    </button>
                    <button class="post-action-btn" onclick="toggleComments(1)">
                        <i class="far fa-comment"></i> Comentar
                    </button>
                    <button class="post-action-btn" onclick="sharePost(1)">
                        <i class="far fa-share-square"></i> Compartir
                    </button>
                    <button class="post-action-btn" onclick="savePost(1)">
                        <i class="far fa-bookmark"></i> Guardar
                    </button>
                </div>

                <div class="post-comments" id="comments-1" style="display: none;">
                    <div class="comments-list">
                        <div class="comment-item">
                            <div class="comment-avatar">CM</div>
                            <div class="comment-content">
                                <div class="comment-header">
                                    <strong>Carlos Méndez</strong>
                                    <span class="comment-time">Hace 1 hora</span>
                                </div>
                                <p>¡Increíble trabajo! Quedó perfecto 👌</p>
                                <div class="comment-actions">
                                    <button onclick="likeComment(1, 1)">
                                        <i class="far fa-heart"></i> Me gusta (5)
                                    </button>
                                    <button onclick="replyComment(1, 1)">
                                        <i class="fas fa-reply"></i> Responder
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="comment-item">
                            <div class="comment-avatar">AF</div>
                            <div class="comment-content">
                                <div class="comment-header">
                                    <strong>Ana Fernández</strong>
                                    <span class="comment-time">Hace 30 min</span>
                                </div>
                                <p>Necesito una cita urgente 🙏</p>
                                <div class="comment-actions">
                                    <button onclick="likeComment(1, 2)">
                                        <i class="far fa-heart"></i> Me gusta (2)
                                    </button>
                                    <button onclick="replyComment(1, 2)">
                                        <i class="fas fa-reply"></i> Responder
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="comment-input-area">
                        <div class="comment-avatar-small">U</div>
                        <input type="text" class="comment-input" 
                               placeholder="Escribe un comentario..." 
                               onkeypress="handleCommentKeyPress(event, 1)">
                        <button class="send-comment-btn" onclick="sendComment(1)">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </article>

            <!-- Publicación 2 -->
            <article class="post-card" data-post-id="2">
                <div class="post-header">
                    <div class="post-author-info">
                        <div class="post-avatar" onclick="showBarberProfile(3)">MT</div>
                        <div class="post-author-details">
                            <h4 class="post-author-name">Miguel Torres</h4>
                            <span class="post-time">
                                <i class="fas fa-clock"></i> Hace 5 horas
                            </span>
                        </div>
                    </div>
                    <button class="post-options-btn" onclick="showPostOptions(2)">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>

                <div class="post-content">
                    <p class="post-text">
                        Diseño artístico completado ✨ Cliente satisfecho = barbero feliz 
                        <span class="post-hashtag">#ArtBarber</span>
                    </p>
                </div>

                <div class="post-media">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Crect fill='%23FF5D9E' width='400' height='400'/%3E%3Ctext x='200' y='220' text-anchor='middle' fill='white' font-size='120'%3E💈%3C/text%3E%3C/svg%3E" 
                         alt="Post image"
                         onclick="openImageViewer(this.src)">
                </div>

                <div class="post-stats">
                    <span class="post-stat-item">
                        <i class="fas fa-heart"></i> 89 Me gusta
                    </span>
                    <span class="post-stat-item">
                        <i class="fas fa-comment"></i> 12 comentarios
                    </span>
                </div>

                <div class="post-actions">
                    <button class="post-action-btn liked" onclick="toggleLike(2)">
                        <i class="fas fa-heart"></i> Me gusta
                    </button>
                    <button class="post-action-btn" onclick="toggleComments(2)">
                        <i class="far fa-comment"></i> Comentar
                    </button>
                    <button class="post-action-btn" onclick="sharePost(2)">
                        <i class="far fa-share-square"></i> Compartir
                    </button>
                    <button class="post-action-btn" onclick="savePost(2)">
                        <i class="far fa-bookmark"></i> Guardar
                    </button>
                </div>

                <div class="post-comments" id="comments-2" style="display: none;"></div>
            </article>

            <!-- Publicación 3 - Anuncio de servicio -->
            <article class="post-card post-service" data-post-id="3">
                <div class="post-header">
                    <div class="post-author-info">
                        <div class="post-avatar" onclick="showBarberProfile(2)">CP</div>
                        <div class="post-author-details">
                            <h4 class="post-author-name">Carlos Palacios</h4>
                            <span class="post-time">
                                <i class="fas fa-clock"></i> Hace 1 día
                            </span>
                        </div>
                    </div>
                </div>

                <div class="post-content">
                    <div class="service-promo">
                        <div class="promo-badge">PROMOCIÓN</div>
                        <h3>🎉 Descuento del 20% este fin de semana</h3>
                        <p>Corte + Barba por solo $20.000</p>
                        <button class="btn-promo-book" onclick="currentBarber = 2; openBooking()">
                            Reservar ahora
                        </button>
                    </div>
                </div>

                <div class="post-stats">
                    <span class="post-stat-item">
                        <i class="fas fa-heart"></i> 156 Me gusta
                    </span>
                    <span class="post-stat-item">
                        <i class="fas fa-bookmark"></i> 42 guardados
                    </span>
                </div>

                <div class="post-actions">
                    <button class="post-action-btn" onclick="toggleLike(3)">
                        <i class="far fa-heart"></i> Me gusta
                    </button>
                    <button class="post-action-btn" onclick="savePost(3)">
                        <i class="far fa-bookmark"></i> Guardar
                    </button>
                    <button class="post-action-btn" onclick="sharePost(3)">
                        <i class="far fa-share-square"></i> Compartir
                    </button>
                </div>
            </article>
        </div>

        <!-- Botón cargar más -->
        <button class="btn-load-more-posts" onclick="loadMorePosts()">
            <i class="fas fa-sync-alt"></i> Cargar más publicaciones
        </button>
    </div>

    <!-- TAB: Siguiendo -->
    <div class="social-tab-content" id="tabFollowing">
        <div class="following-header">
            <h3>Barberos que sigues</h3>
            <p class="following-count">Siguiendo a 4 barberos</p>
        </div>

        <div class="following-list">
            <div class="following-item">
                <div class="following-avatar" onclick="showBarberProfile(1)">JD</div>
                <div class="following-info">
                    <h5>Juan Domínguez</h5>
                    <p>Especialista en Degradados</p>
                    <span class="following-stats">
                        <i class="fas fa-users"></i> 1.2K seguidores
                    </span>
                </div>
                <button class="btn-following" onclick="toggleFollow(1, this)">
                    <i class="fas fa-user-check"></i> Siguiendo
                </button>
            </div>

            <div class="following-item">
                <div class="following-avatar" onclick="showBarberProfile(3)">MT</div>
                <div class="following-info">
                    <h5>Miguel Torres</h5>
                    <p>Diseños Artísticos</p>
                    <span class="following-stats">
                        <i class="fas fa-users"></i> 980 seguidores
                    </span>
                </div>
                <button class="btn-following" onclick="toggleFollow(3, this)">
                    <i class="fas fa-user-check"></i> Siguiendo
                </button>
            </div>

            <div class="following-item">
                <div class="following-avatar" onclick="showBarberProfile(2)">CP</div>
                <div class="following-info">
                    <h5>Carlos Palacios</h5>
                    <p>Barbero Tradicional</p>
                    <span class="following-stats">
                        <i class="fas fa-users"></i> 750 seguidores
                    </span>
                </div>
                <button class="btn-following" onclick="toggleFollow(2, this)">
                    <i class="fas fa-user-check"></i> Siguiendo
                </button>
            </div>

            <div class="following-item">
                <div class="following-avatar" onclick="showBarberProfile(4)">AM</div>
                <div class="following-info">
                    <h5>Andrés Mosquera</h5>
                    <p>Servicio a Domicilio</p>
                    <span class="following-stats">
                        <i class="fas fa-users"></i> 620 seguidores
                    </span>
                </div>
                <button class="btn-following" onclick="toggleFollow(4, this)">
                    <i class="fas fa-user-check"></i> Siguiendo
                </button>
            </div>
        </div>

        <div class="suggestions-section">
            <h4>Sugerencias para seguir</h4>
            <div class="suggestions-list">
                <!-- Similar a following-item pero con botón "Seguir" -->
            </div>
        </div>
    </div>



    <!-- TAB: FORO -->
<div class="social-tab-content" id="tabForum">
    <!-- Header del Foro -->
    <div class="forum-header">
        <h2 class="forum-title">
            <i class="fas fa-comments"></i> Foro de la Comunidad
        </h2>
        <button class="btn-new-topic" onclick="createNewTopic()">
            <i class="fas fa-plus"></i> Nuevo tema
        </button>
    </div>

    <!-- Categorías del Foro -->
    <div class="forum-categories">
        <div class="category-pill active" data-category="all" onclick="filterForumCategory('all')">
            <i class="fas fa-globe"></i> Todos
        </div>
        <div class="category-pill" data-category="tips" onclick="filterForumCategory('tips')">
            <i class="fas fa-lightbulb"></i> Consejos
        </div>
        <div class="category-pill" data-category="questions" onclick="filterForumCategory('questions')">
            <i class="fas fa-question-circle"></i> Preguntas
        </div>
        <div class="category-pill" data-category="showcase" onclick="filterForumCategory('showcase')">
            <i class="fas fa-star"></i> Mostrar trabajos
        </div>
        <div class="category-pill" data-category="tools" onclick="filterForumCategory('tools')">
            <i class="fas fa-tools"></i> Herramientas
        </div>
        <div class="category-pill" data-category="business" onclick="filterForumCategory('business')">
            <i class="fas fa-briefcase"></i> Negocios
        </div>
    </div>

    <!-- Lista de Temas -->
    <div class="forum-topics-list" id="forumTopicsList">
        <!-- Tema destacado 1 -->
        <div class="forum-topic pinned" data-category="tips" onclick="openForumTopic(1)">
            <div class="topic-pin-badge">
                <i class="fas fa-thumbtack"></i> Destacado
            </div>
            <div class="topic-avatar">JD</div>
            <div class="topic-content">
                <h4 class="topic-title">
                    📌 Los 10 mejores consejos para degradados perfectos
                </h4>
                <div class="topic-meta">
                    <span class="topic-author">Por <strong>Juan Domínguez</strong></span>
                    <span class="topic-category">
                        <i class="fas fa-tag"></i> Consejos
                    </span>
                    <span class="topic-date">
                        <i class="far fa-clock"></i> Hace 2 días
                    </span>
                </div>
                <p class="topic-preview">
                    Después de 5 años perfeccionando la técnica, aquí comparto mis secretos para lograr degradados profesionales...
                </p>
            </div>
            <div class="topic-stats">
                <div class="stat-item">
                    <i class="fas fa-eye"></i>
                    <span>1.2K</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-comment"></i>
                    <span>48</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-heart"></i>
                    <span>156</span>
                </div>
            </div>
        </div>

        <!-- Tema 2 -->
        <div class="forum-topic hot" data-category="questions" onclick="openForumTopic(2)">
            <div class="topic-hot-badge">
                <i class="fas fa-fire"></i> Popular
            </div>
            <div class="topic-avatar">CM</div>
            <div class="topic-content">
                <h4 class="topic-title">
                    ❓ ¿Qué máquinas recomiendan para principiantes?
                </h4>
                <div class="topic-meta">
                    <span class="topic-author">Por <strong>Carlos Méndez</strong></span>
                    <span class="topic-category">
                        <i class="fas fa-tag"></i> Preguntas
                    </span>
                    <span class="topic-date">
                        <i class="far fa-clock"></i> Hace 5 horas
                    </span>
                </div>
                <p class="topic-preview">
                    Estoy comenzando en el mundo de la barbería y quiero invertir en buenas máquinas. ¿Qué marcas me recomiendan?
                </p>
            </div>
            <div class="topic-stats">
                <div class="stat-item">
                    <i class="fas fa-eye"></i>
                    <span>324</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-comment"></i>
                    <span>27</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-heart"></i>
                    <span>42</span>
                </div>
            </div>
        </div>

        <!-- Tema 3 -->
        <div class="forum-topic" data-category="showcase" onclick="openForumTopic(3)">
            <div class="topic-avatar">MT</div>
            <div class="topic-content">
                <h4 class="topic-title">
                    ⭐ Mi primer diseño artístico - ¿Qué opinan?
                </h4>
                <div class="topic-meta">
                    <span class="topic-author">Por <strong>Miguel Torres</strong></span>
                    <span class="topic-category">
                        <i class="fas fa-tag"></i> Mostrar trabajos
                    </span>
                    <span class="topic-date">
                        <i class="far fa-clock"></i> Hace 1 día
                    </span>
                </div>
                <p class="topic-preview">
                    Les comparto mi primer intento de diseño artístico. Cualquier crítica constructiva es bienvenida 🙏
                </p>
            </div>
            <div class="topic-stats">
                <div class="stat-item">
                    <i class="fas fa-eye"></i>
                    <span>567</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-comment"></i>
                    <span>34</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-heart"></i>
                    <span>89</span>
                </div>
            </div>
        </div>

        <!-- Tema 4 -->
        <div class="forum-topic" data-category="business" onclick="openForumTopic(4)">
            <div class="topic-avatar">AF</div>
            <div class="topic-content">
                <h4 class="topic-title">
                    💼 ¿Cómo consiguen más clientes? Estrategias de marketing
                </h4>
                <div class="topic-meta">
                    <span class="topic-author">Por <strong>Ana Fernández</strong></span>
                    <span class="topic-category">
                        <i class="fas fa-tag"></i> Negocios
                    </span>
                    <span class="topic-date">
                        <i class="far fa-clock"></i> Hace 3 días
                    </span>
                </div>
                <p class="topic-preview">
                    Quiero expandir mi base de clientes. ¿Qué estrategias de redes sociales les han funcionado mejor?
                </p>
            </div>
            <div class="topic-stats">
                <div class="stat-item">
                    <i class="fas fa-eye"></i>
                    <span>892</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-comment"></i>
                    <span>61</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-heart"></i>
                    <span>124</span>
                </div>
            </div>
        </div>

        <!-- Tema 5 -->
        <div class="forum-topic" data-category="tools" onclick="openForumTopic(5)">
            <div class="topic-avatar">CP</div>
            <div class="topic-content">
                <h4 class="topic-title">
                    🔧 Mantenimiento de máquinas: Guía completa
                </h4>
                <div class="topic-meta">
                    <span class="topic-author">Por <strong>Carlos Palacios</strong></span>
                    <span class="topic-category">
                        <i class="fas fa-tag"></i> Herramientas
                    </span>
                    <span class="topic-date">
                        <i class="far fa-clock"></i> Hace 1 semana
                    </span>
                </div>
                <p class="topic-preview">
                    Tutorial paso a paso sobre cómo mantener tus máquinas en perfecto estado y alargar su vida útil.
                </p>
            </div>
            <div class="topic-stats">
                <div class="stat-item">
                    <i class="fas fa-eye"></i>
                    <span>1.5K</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-comment"></i>
                    <span>73</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-heart"></i>
                    <span>201</span>
                </div>
            </div>
        </div>

        <!-- Tema 6 -->
        <div class="forum-topic" data-category="questions" onclick="openForumTopic(6)">
            <div class="topic-avatar">MR</div>
            <div class="topic-content">
                <h4 class="topic-title">
                    🤔 ¿Cómo manejan a clientes difíciles?
                </h4>
                <div class="topic-meta">
                    <span class="topic-author">Por <strong>María Rodríguez</strong></span>
                    <span class="topic-category">
                        <i class="fas fa-tag"></i> Preguntas
                    </span>
                    <span class="topic-date">
                        <i class="far fa-clock"></i> Hace 4 días
                    </span>
                </div>
                <p class="topic-preview">
                    A veces llegan clientes con expectativas irreales. ¿Cómo los manejan sin perder la paciencia?
                </p>
            </div>
            <div class="topic-stats">
                <div class="stat-item">
                    <i class="fas fa-eye"></i>
                    <span>445</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-comment"></i>
                    <span>38</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-heart"></i>
                    <span>67</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal para Ver Tema Completo -->
<div class="forum-topic-modal" id="forumTopicModal" style="display: none;">
    <div class="forum-modal-content">
        <button class="close-forum-btn" onclick="closeForumTopic()">
            <i class="fas fa-times"></i>
        </button>

        <div class="forum-topic-full" id="forumTopicFull">
            <!-- Se llena dinámicamente -->
        </div>
    </div>
</div>

<!-- Modal para Crear Nuevo Tema -->
<div class="new-topic-modal" id="newTopicModal" style="display: none;">
    <div class="new-topic-content">
        <h3>
            <i class="fas fa-plus-circle"></i> Crear Nuevo Tema
        </h3>
        
        <div class="form-group">
            <label>Categoría</label>
            <select id="newTopicCategory" class="form-input">
                <option value="tips">Consejos</option>
                <option value="questions">Preguntas</option>
                <option value="showcase">Mostrar trabajos</option>
                <option value="tools">Herramientas</option>
                <option value="business">Negocios</option>
            </select>
        </div>

        <div class="form-group">
            <label>Título del tema</label>
            <input type="text" id="newTopicTitle" class="form-input" 
                   placeholder="Escribe un título llamativo...">
        </div>

        <div class="form-group">
            <label>Descripción</label>
            <textarea id="newTopicDescription" class="form-textarea" 
                      rows="6" placeholder="Describe tu tema en detalle..."></textarea>
        </div>

        <div class="form-actions">
            <button class="btn-cancel" onclick="closeNewTopicModal()">
                Cancelar
            </button>
            <button class="btn-publish" onclick="publishNewTopic()">
                <i class="fas fa-paper-plane"></i> Publicar
            </button>
        </div>
    </div>
</div>

    <!-- TAB: Tendencias -->
    <div class="social-tab-content" id="tabTrending">
        <div class="trending-header">
            <h3>🔥 Tendencias en BarberLink</h3>
            <select class="trending-filter" onchange="filterTrending(this.value)">
                <option value="today">Hoy</option>
                <option value="week">Esta semana</option>
                <option value="month">Este mes</option>
            </select>
        </div>

        <div class="trending-tags">
            <div class="trending-tag-item" onclick="searchHashtag('BarberLife')">
                <div class="tag-rank">1</div>
                <div class="tag-info">
                    <h5>#BarberLife</h5>
                    <p>2.5K publicaciones</p>
                </div>
                <i class="fas fa-chevron-right"></i>
            </div>

            <div class="trending-tag-item" onclick="searchHashtag('Degradado')">
                <div class="tag-rank">2</div>
                <div class="tag-info">
                    <h5>#Degradado</h5>
                    <p>1.8K publicaciones</p>
                </div>
                <i class="fas fa-chevron-right"></i>
            </div>

            <div class="trending-tag-item" onclick="searchHashtag('ArtBarber')">
                <div class="tag-rank">3</div>
                <div class="tag-info">
                    <h5>#ArtBarber</h5>
                    <p>1.2K publicaciones</p>
                </div>
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>

        <h4 class="trending-posts-title">Publicaciones destacadas</h4>
        <div class="trending-posts-grid">
            <div class="trending-post-thumb" onclick="viewPost(1)">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%2300D68F' width='200' height='200'/%3E%3Ctext x='100' y='110' text-anchor='middle' fill='white' font-size='60'%3E✂️%3C/text%3E%3C/svg%3E" alt="">
                <div class="thumb-overlay">
                    <span><i class="fas fa-heart"></i> 124</span>
                </div>
            </div>
            <div class="trending-post-thumb" onclick="viewPost(2)">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23FF5D9E' width='200' height='200'/%3E%3Ctext x='100' y='110' text-anchor='middle' fill='white' font-size='60'%3E💈%3C/text%3E%3C/svg%3E" alt="">
                <div class="thumb-overlay">
                    <span><i class="fas fa-heart"></i> 89</span>
                </div>
            </div>
            <!-- Más thumbnails... -->
        </div>
    </div>

    <!-- TAB: Guardados -->
    <div class="social-tab-content" id="tabSaved">
        <div class="saved-header">
            <h3>📑 Publicaciones guardadas</h3>
            <p class="saved-count">12 publicaciones guardadas</p>
        </div>

        <div class="saved-collections">
            <div class="collection-card">
                <div class="collection-icon">✂️</div>
                <h5>Cortes favoritos</h5>
                <p>8 publicaciones</p>
            </div>
            <div class="collection-card">
                <div class="collection-icon">💰</div>
                <h5>Promociones</h5>
                <p>4 publicaciones</p>
            </div>
        </div>

        <div class="saved-posts-grid">
            <!-- Similar a trending-posts-grid -->
        </div>
    </div>
</div>

<!-- Modal de Visor de Imágenes -->
<div class="image-viewer-modal" id="imageViewerModal" onclick="closeImageViewer()">
    <button class="close-viewer-btn">
        <i class="fas fa-times"></i>
    </button>
    <img src="" alt="Imagen ampliada" id="viewerImage">
    <div class="viewer-actions">
        <button onclick="downloadImage()">
            <i class="fas fa-download"></i>
        </button>
        <button onclick="shareImage()">
            <i class="fas fa-share-alt"></i>
        </button>
    </div>
</div>

<!-- Modal de Historias -->
<div class="story-viewer-modal" id="storyViewerModal" style="display: none;">
    <div class="story-viewer-container">
        <button class="close-story-btn" onclick="closeStoryViewer()">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="story-progress-bars">
            <div class="progress-bar active"></div>
            <div class="progress-bar"></div>
            <div class="progress-bar"></div>
        </div>
        
        <div class="story-header">
            <div class="story-author-info">
                <div class="story-author-avatar">JD</div>
                <div class="story-author-details">
                    <h5>Juan Domínguez</h5>
                    <span>Hace 3 horas</span>
                </div>
            </div>
        </div>
        
        <div class="story-content" id="storyContent">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='700'%3E%3Crect fill='%2300D68F' width='400' height='700'/%3E%3Ctext x='200' y='360' text-anchor='middle' fill='white' font-size='100'%3E✂️%3C/text%3E%3C/svg%3E" alt="Story">
        </div>
        
        <div class="story-navigation">
            <button class="story-nav-btn" onclick="previousStory()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="story-nav-btn" onclick="nextStory()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>
</div>



        </div>

        <div class="bottom-nav">
            <div class="nav-item active" onclick="showHome()"><i class="fas fa-home"></i><span>Inicio</span></div>
            <div class="nav-item" onclick="showBarbers()"><i class="fas fa-search"></i><span>Buscar</span></div>
            <div class="nav-item" onclick="showSocial()"><i class="fas fa-users"></i><span>Social</span></div>
            <div class="nav-item" onclick="showStore()"><i class="fas fa-shopping-bag"></i><span>Tienda</span></div>
            <div class="nav-item" onclick="toggleUserMenu()"><i class="fas fa-user"></i><span>Perfil</span></div>
        </div>
    </div>

    <div class="user-menu" id="userMenu" onclick="closeUserMenu(event)">
        <div class="user-menu-content" onclick="event.stopPropagation()">
            <div class="user-menu-header">
                <div class="user-menu-avatar" id="userMenuAvatar">U</div>
                <div class="user-menu-name" id="userMenuName">Usuario</div>
            </div>
            <div class="menu-options">
                <div class="menu-option" onclick="showProfile()"><i class="fas fa-user"></i><span>Mi Perfil</span></div>
                <div class="menu-option" onclick="showAppointments()"><i class="fas fa-calendar"></i><span>Mis Citas</span></div>
                <div class="menu-option" onclick="showNotifications()"><i class="fas fa-bell"></i><span>Notificaciones</span></div>
                <div class="menu-option" onclick="showMessages()"><i class="fas fa-comment"></i><span>Mensajes</span></div>
                <div class="menu-option" onclick="showPurchases()"><i class="fas fa-shopping-cart"></i><span>Mis Compras</span></div>
                <div class="menu-option" onclick="showSettings()"><i class="fas fa-cog"></i><span>Configuración</span></div>
                <div class="menu-option" onclick="logout()"><i class="fas fa-sign-out-alt"></i><span>Cerrar Sesión</span></div>
            </div>
            <button class="close-menu" onclick="toggleUserMenu()">Cerrar</button>
        </div>
    </div>

    <div class="booking-modal" id="bookingModal" onclick="closeBookingClick(event)">
        <div class="booking-content" onclick="event.stopPropagation()">
            <div class="booking-header"><h2>Reservar Cita</h2><p id="bookingBarberName">Selecciona fecha y hora</p></div>
            <h3 style="margin-bottom: 15px;">Selecciona un día</h3>
            <div class="date-selector" id="dateSelector"></div>
            <h3 style="margin-bottom: 15px;">Selecciona una hora</h3>
            <div class="time-slots" id="timeSlots"></div>
            <h3 style="margin-bottom: 15px;">Selecciona un servicio</h3>
            <div class="service-selector" id="serviceSelector"></div>
            <div class="form-actions">
                <button class="auth-btn auth-btn-secondary" onclick="closeBooking()">Cancelar</button>
                <button class="auth-btn auth-btn-primary" onclick="confirmBooking()">Confirmar Reserva</button>
            </div>
        </div>
    </div>

    <!-- PERFIL DE BARBERO MEJORADO -->
<div class="barber-profile-enhanced" id="barberProfile">
    <div class="profile-hero">
        <button class="back-button" onclick="hideBarberProfile()">
            <i class="fas fa-arrow-left"></i>
        </button>
        
        <div class="profile-cover">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200'%3E%3Crect fill='%2300D68F' width='400' height='200'/%3E%3C/svg%3E" alt="Cover">
        </div>
        
        <div class="profile-main-info">
            <div class="profile-photo-container">
                <div class="profile-photo" id="profilePhoto">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-status online" title="En línea">
                    <i class="fas fa-circle"></i>
                </div>
            </div>
            
            <div class="profile-header-text">
                <h2 class="profile-name-large" id="profileNameLarge">Juan Domínguez</h2>
                <p class="profile-title-large" id="profileTitleLarge">Barbero Profesional</p>
                
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-number" id="profileRatingNum">4.9</div>
                        <div class="stat-label">Rating</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="profileReviewsNum">45</div>
                        <div class="stat-label">Reseñas</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="profileServicesNum">120</div>
                        <div class="stat-label">Servicios</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="profileExperienceNum">5+</div>
                        <div class="stat-label">Años</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tabs de navegación -->
    <div class="profile-tabs">
        <div class="tab-item active" data-tab="about" onclick="switchProfileTab('about')">
            <i class="fas fa-info-circle"></i> Sobre mí
        </div>
        <div class="tab-item" data-tab="services" onclick="switchProfileTab('services')">
            <i class="fas fa-cut"></i> Servicios
        </div>
        <div class="tab-item" data-tab="gallery" onclick="switchProfileTab('gallery')">
            <i class="fas fa-images"></i> Galería
        </div>
        <div class="tab-item" data-tab="reviews" onclick="switchProfileTab('reviews')">
            <i class="fas fa-star"></i> Reseñas
        </div>
    </div>
    
    <!-- Contenido de tabs -->
    <div class="profile-tab-content">
        <!-- Tab: Sobre mí -->
        <div class="tab-pane active" id="tabAbout">
            <div class="profile-section">
                <h3 class="section-heading">
                    <i class="fas fa-user-circle"></i> Biografía
                </h3>
                <p class="profile-bio" id="profileBioText">
                    Especialista en cortes modernos y diseños personalizados con más de 5 años de experiencia. 
                    Apasionado por las tendencias urbanas y el estilo único de cada cliente.
                </p>
            </div>
            
            <div class="profile-section">
                <h3 class="section-heading">
                    <i class="fas fa-award"></i> Especialidades
                </h3>
                <div class="specialties-tags" id="profileSpecialties">
                    <span class="specialty-tag">Degradados</span>
                    <span class="specialty-tag">Diseños</span>
                    <span class="specialty-tag">Barba</span>
                    <span class="specialty-tag">Cortes modernos</span>
                </div>
            </div>
            
            <div class="profile-section">
                <h3 class="section-heading">
                    <i class="fas fa-clock"></i> Horario de atención
                </h3>
                <div class="schedule-list">
                    <div class="schedule-item">
                        <span class="schedule-day">Lunes - Viernes</span>
                        <span class="schedule-time">9:00 AM - 7:00 PM</span>
                    </div>
                    <div class="schedule-item">
                        <span class="schedule-day">Sábados</span>
                        <span class="schedule-time">10:00 AM - 6:00 PM</span>
                    </div>
                    <div class="schedule-item">
                        <span class="schedule-day">Domingos</span>
                        <span class="schedule-time">Cerrado</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tab: Servicios -->
        <div class="tab-pane" id="tabServices">
            <div class="services-list-enhanced" id="profileServicesEnhanced">
                <!-- Se llena dinámicamente -->
            </div>
        </div>
        
        <!-- Tab: Galería -->
        <div class="tab-pane" id="tabGallery">
            <div class="gallery-grid-enhanced">
                <div class="gallery-item-enhanced">
                    <div class="gallery-placeholder">✂️</div>
                    <div class="gallery-overlay">
                        <i class="fas fa-search-plus"></i>
                    </div>
                </div>
                <div class="gallery-item-enhanced">
                    <div class="gallery-placeholder">💈</div>
                    <div class="gallery-overlay">
                        <i class="fas fa-search-plus"></i>
                    </div>
                </div>
                <div class="gallery-item-enhanced">
                    <div class="gallery-placeholder">✂️</div>
                    <div class="gallery-overlay">
                        <i class="fas fa-search-plus"></i>
                    </div>
                </div>
                <div class="gallery-item-enhanced">
                    <div class="gallery-placeholder">💈</div>
                    <div class="gallery-overlay">
                        <i class="fas fa-search-plus"></i>
                    </div>
                </div>
                <div class="gallery-item-enhanced">
                    <div class="gallery-placeholder">✂️</div>
                    <div class="gallery-overlay">
                        <i class="fas fa-search-plus"></i>
                    </div>
                </div>
                <div class="gallery-item-enhanced">
                    <div class="gallery-placeholder">💈</div>
                    <div class="gallery-overlay">
                        <i class="fas fa-search-plus"></i>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tab: Reseñas -->
        <div class="tab-pane" id="tabReviews">
            <div class="reviews-summary">
                <div class="summary-rating">
                    <div class="big-rating">4.9</div>
                    <div class="stars-large">★★★★★</div>
                    <div class="reviews-count">Basado en 45 reseñas</div>
                </div>
                
                <div class="rating-bars">
                    <div class="rating-bar-item">
                        <span class="bar-label">5 ★</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 80%"></div>
                        </div>
                        <span class="bar-count">36</span>
                    </div>
                    <div class="rating-bar-item">
                        <span class="bar-label">4 ★</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 15%"></div>
                        </div>
                        <span class="bar-count">7</span>
                    </div>
                    <div class="rating-bar-item">
                        <span class="bar-label">3 ★</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 5%"></div>
                        </div>
                        <span class="bar-count">2</span>
                    </div>
                    <div class="rating-bar-item">
                        <span class="bar-label">2 ★</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 0%"></div>
                        </div>
                        <span class="bar-count">0</span>
                    </div>
                    <div class="rating-bar-item">
                        <span class="bar-label">1 ★</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 0%"></div>
                        </div>
                        <span class="bar-count">0</span>
                    </div>
                </div>
            </div>
            
            <div class="reviews-list" id="reviewsList">
                <!-- Reseña 1 -->
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">CM</div>
                        <div class="reviewer-info">
                            <h5>Carlos Méndez</h5>
                            <div class="review-meta">
                                <span class="review-stars">★★★★★</span>
                                <span class="review-date">Hace 2 días</span>
                            </div>
                        </div>
                    </div>
                    <p class="review-text">
                        Excelente servicio, muy profesional. El degradado quedó perfecto y el ambiente 
                        es muy agradable. Totalmente recomendado.
                    </p>
                    <div class="review-actions">
                        <button class="review-action-btn">
                            <i class="far fa-thumbs-up"></i> Útil (12)
                        </button>
                    </div>
                </div>
                
                <!-- Reseña 2 -->
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">AF</div>
                        <div class="reviewer-info">
                            <h5>Ana Fernández</h5>
                            <div class="review-meta">
                                <span class="review-stars">★★★★★</span>
                                <span class="review-date">Hace 1 semana</span>
                            </div>
                        </div>
                    </div>
                    <p class="review-text">
                        Le traje a mi hijo y quedó encantado. Juan es muy paciente y sabe exactamente 
                        qué estilo queda mejor. Volveremos seguro.
                    </p>
                    <div class="review-actions">
                        <button class="review-action-btn">
                            <i class="far fa-thumbs-up"></i> Útil (8)
                        </button>
                    </div>
                </div>
                
                <!-- Reseña 3 -->
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">MR</div>
                        <div class="reviewer-info">
                            <h5>Miguel Ríos</h5>
                            <div class="review-meta">
                                <span class="review-stars">★★★★☆</span>
                                <span class="review-date">Hace 2 semanas</span>
                            </div>
                        </div>
                    </div>
                    <p class="review-text">
                        Buen corte, aunque tuve que esperar un poco más de lo esperado. Pero el resultado 
                        valió la pena.
                    </p>
                    <div class="review-actions">
                        <button class="review-action-btn">
                            <i class="far fa-thumbs-up"></i> Útil (5)
                        </button>
                    </div>
                </div>
            </div>
            
            <button class="btn-load-more-reviews">
                Cargar más reseñas <i class="fas fa-chevron-down"></i>
            </button>
        </div>
    </div>
    
    <!-- Botones de acción flotantes -->
    <div class="profile-action-bar">
<button class="btn-action-secondary" onclick="shareBarberProfile()">
<i class="fas fa-share-alt"></i> Compartir
</button>
<button class="btn-action-secondary" onclick="saveBarberFavorite()">
<i class="far fa-heart"></i> Guardar
</button>
<button class="btn-action-primary" onclick="openBooking()">
<i class="fas fa-calendar-check"></i> Reservar Cita
</button>
</div>
</div>

    <div class="loading-overlay" id="loadingOverlay"><div class="loading-spinner"></div></div>

   
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
 <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>




    <script>



// GEOLOCALIZACIÓN AUTOMÁTICA
let userCurrentLocation = null;

function initGeolocation() {
    if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
            onLocationSuccess,
            onLocationError,
            { enableHighAccuracy: true, timeout: 10000 }
        );
    } else {
        console.log("Geolocalización no disponible, usando ubicación por defecto");
        onLocationError();
    }
}





function onLocationSuccess(position) {
    // Actualizar ambas variables
    userCurrentLocation = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
    };
    
    // También actualizar userLocation para compatibilidad
    userLocation[0] = position.coords.latitude;
    userLocation[1] = position.coords.longitude;
    
    console.log("Ubicación detectada:", userCurrentLocation);
    
    // Actualizar el mapa si existe
    if (map) {
        map.setView([userCurrentLocation.lat, userCurrentLocation.lng], 15);
        
        // Actualizar marcador del usuario
        if (userMarker) {
            map.removeLayer(userMarker);
        }
        // Recrear marcador en nueva posición (necesitas agregar la función)
    }
    
    // Actualizar círculo de radio
    if (radiusCircle) {
        radiusCircle.setLatLng([userCurrentLocation.lat, userCurrentLocation.lng]);
    }
    
    // Recalcular distancias de barberos
    recalculateBarberDistances(userCurrentLocation);
    
    showNotification('📍 Ubicación detectada correctamente', 'success');
}




function onLocationError(error) {
    console.log("Error de geolocalización, usando ubicación por defecto");
    userCurrentLocation = { lat: userLocation[0], lng: userLocation[1] };
    
    if (error) {
        console.error("Código de error:", error.code, "Mensaje:", error.message);
    }
}

function recalculateBarberDistances(userLoc) {
    barbers.forEach(barber => {
        barber.distance = calculateDistance(
            userLoc.lat, userLoc.lng,
            barber.lat, barber.lng
        );
    });
    
    // Reordenar por distancia
    barbers.sort((a, b) => a.distance - b.distance);
    
    // Actualizar visualización
    loadBarbers();
}

function calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371; // Radio de la Tierra en km
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLon = (lon2 - lon1) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
              Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return parseFloat((R * c).toFixed(1));
}

function showNotification(message, type = 'info') {
    // Crear elemento de notificación
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#00D68F' : type === 'error' ? '#FF5D9E' : '#FFD700'};
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        z-index: 10000;
        animation: slideInRight 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Agregar animaciones CSS
const style = document.createElement('style');
style.textContent = `
    @keyframes slideInRight {
        from { transform: translateX(400px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOutRight {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(400px); opacity: 0; }
    }
`;
document.head.appendChild(style);

// Llamar al iniciar la app
window.addEventListener('load', function() {
    setTimeout(initGeolocation, 1000);
});















        let map, currentUser = null, currentBarber = null, cart = [], selectedDate = null, selectedTime = null, selectedService = null, logoClicks = 0;
        let radiusCircle = null;
        let barberMarkers = [];
        let advancedFiltersActive = false;
        const userLocation = [5.687220, -76.661182];
      


            const barbers = [
    {
        id: 1, 
        name: 'Juan Domínguez', 
        specialty: 'Especialista en Cortes Modernos', 
        avatar: 'https://randomuser.me/api/portraits/men/32.jpg',
        rating: 4.9, 
        reviews: 45, 
        distance: 0.8, 
        lat: 5.688500, 
        lng: -76.662000, 
        available: true, 
        services: [
            {name: 'Corte Clásico', price: 15000, duration: '30 min'}, 
            {name: 'Corte + Barba', price: 25000, duration: '45 min'}, 
            {name: 'Diseño Personalizado', price: 30000, duration: '60 min'}
        ], 
        description: 'Especialista en cortes modernos y diseños personalizados. Con más de 5 años de experiencia en las últimas tendencias urbanas.',
        phone: '+57 300 123 4567',
        experience: '5 años'
    },
    {
        id: 2, 
        name: 'Carlos Palacios', 
        specialty: 'Barbero Profesional', 
        avatar: 'https://randomuser.me/api/portraits/men/45.jpg',
        rating: 4.7, 
        reviews: 32, 
        distance: 1.2, 
        lat: 5.685800, 
        lng: -76.659500, 
        available: true, 
        services: [
            {name: 'Corte Tradicional', price: 12000, duration: '30 min'}, 
            {name: 'Afeitado Clásico', price: 18000, duration: '40 min'}, 
            {name: 'Combo Completo', price: 28000, duration: '60 min'}
        ], 
        description: 'Barbero profesional con técnicas tradicionales y modernas. Experto en afeitado a navaja.',
        phone: '+57 301 234 5678',
        experience: '8 años'
    },
    {
        id: 3, 
        name: 'Miguel Torres', 
        specialty: 'Diseños y Degradados', 
        avatar: 'https://randomuser.me/api/portraits/men/22.jpg',
        rating: 4.8, 
        reviews: 28, 
        distance: 1.5, 
        lat: 5.689200, 
        lng: -76.663800, 
        available: false, 
        services: [
            {name: 'Degradado Profesional', price: 20000, duration: '45 min'}, 
            {name: 'Diseño Artístico', price: 35000, duration: '75 min'}, 
            {name: 'Tratamiento Capilar', price: 25000, duration: '50 min'}
        ], 
        description: 'Especialista en degradados y diseños artísticos únicos. Ganador del Barber Battle 2023.',
        phone: '+57 302 345 6789',
        experience: '6 años'
    },
    {
        id: 4, 
        name: 'Andrés Mosquera', 
        specialty: 'Barbero a Domicilio', 
        avatar: 'https://randomuser.me/api/portraits/men/58.jpg',
        rating: 4.6, 
        reviews: 21, 
        distance: 0.5, 
        lat: 5.686800, 
        lng: -76.660200, 
        available: true, 
        services: [
            {name: 'Corte a Domicilio', price: 18000, duration: '40 min'}, 
            {name: 'Servicio Premium', price: 35000, duration: '60 min'}
        ], 
        description: 'Servicio de barbería profesional en la comodidad de tu hogar. Atención personalizada.',
        phone: '+57 303 456 7890',
        experience: '4 años'
    },
    {
        id: 5, 
        name: 'Roberto Sánchez', 
        specialty: 'Barbero Clásico', 
        avatar: 'https://randomuser.me/api/portraits/men/67.jpg',
        rating: 4.9, 
        reviews: 67, 
        distance: 2.1, 
        lat: 5.687200, 
        lng: -76.664500, 
        available: true, 
        services: [
            {name: 'Corte Vintage', price: 16000, duration: '35 min'}, 
            {name: 'Barba Profesional', price: 14000, duration: '30 min'}, 
            {name: 'Paquete Completo', price: 27000, duration: '55 min'}
        ], 
        description: 'Más de 10 años de experiencia en técnicas clásicas de barbería. Especialista en estilos retro.',
        phone: '+57 304 567 8901',
        experience: '10 años'
    },
    {
        id: 6, 
        name: 'Luis Fernández', 
        specialty: 'Estilista Urbano', 
        avatar: 'https://randomuser.me/api/portraits/men/36.jpg',
        rating: 4.5, 
        reviews: 39, 
        distance: 1.8, 
        lat: 5.690100, 
        lng: -76.661800, 
        available: true, 
        services: [
            {name: 'Corte Urbano', price: 17000, duration: '35 min'}, 
            {name: 'Diseño con Color', price: 40000, duration: '90 min'}, 
            {name: 'Alisado Express', price: 30000, duration: '50 min'}
        ], 
        description: 'Estilista especializado en tendencias urbanas y diseños con color. Instagram: @luisbarber',
        phone: '+57 305 678 9012',
        experience: '7 años'
    },
    {
        id: 7, 
        name: 'David Morales', 
        specialty: 'Barber & Tattoo Artist', 
        avatar: 'https://randomuser.me/api/portraits/men/75.jpg',
        rating: 4.7, 
        reviews: 44, 
        distance: 2.5, 
        lat: 5.684300, 
        lng: -76.663200, 
        available: false, 
        services: [
            {name: 'Corte Moderno', price: 19000, duration: '40 min'}, 
            {name: 'Diseño Extremo', price: 38000, duration: '80 min'}, 
            {name: 'Barbería + Tattoo', price: 55000, duration: '120 min'}
        ], 
        description: 'Combinación única de barbería profesional y arte en tatuajes. Especialista en diseños urbanos.',
        phone: '+57 306 789 0123',
        experience: '9 años'
    },
    {
        id: 8, 
        name: 'Javier Castro', 
        specialty: 'Barbero Infantil', 
        avatar: 'https://randomuser.me/api/portraits/men/41.jpg',
        rating: 4.8, 
        reviews: 52, 
        distance: 1.3, 
        lat: 5.688900, 
        lng: -76.660700, 
        available: true, 
        services: [
            {name: 'Corte Niños', price: 10000, duration: '25 min'}, 
            {name: 'Primer Corte', price: 8000, duration: '20 min'}, 
            {name: 'Corte Padre + Hijo', price: 22000, duration: '50 min'}
        ], 
        description: 'Especializado en cortes para niños y familias. Ambiente amigable y divertido para los más pequeños.',
        phone: '+57 307 890 1234',
        experience: '6 años'
    },
    {
        id: 9, 
        name: 'Santiago Ruiz', 
        specialty: 'Barbero Premium', 
        avatar: 'https://randomuser.me/api/portraits/men/53.jpg',
        rating: 5.0, 
        reviews: 78, 
        distance: 3.2, 
        lat: 5.691500, 
        lng: -76.665100, 
        available: true, 
        services: [
            {name: 'Corte Premium', price: 25000, duration: '45 min'}, 
            {name: 'Royal Treatment', price: 50000, duration: '90 min'}, 
            {name: 'VIP Experience', price: 75000, duration: '120 min'}
        ], 
        description: 'Servicio premium con productos de alta gama. Experiencia VIP con bebidas incluidas y masaje capilar.',
        phone: '+57 308 901 2345',
        experience: '12 años'
    },
    {
        id: 10, 
        name: 'Diego Ramírez', 
        specialty: 'Cortes Afro', 
        avatar: 'https://randomuser.me/api/portraits/men/29.jpg',
        rating: 4.9, 
        reviews: 36, 
        distance: 2.8, 
        lat: 5.686500, 
        lng: -76.658900, 
        available: true, 
        services: [
            {name: 'Corte Afro', price: 18000, duration: '40 min'}, 
            {name: 'Trenzas', price: 22000, duration: '60 min'}, 
            {name: 'Tratamiento Afro', price: 28000, duration: '50 min'}
        ], 
        description: 'Especialista en cabello afro y texturas rizadas. Técnicas especializadas y productos naturales.',
        phone: '+57 309 012 3456',
        experience: '5 años'
    },
    {
        id: 11, 
        name: 'Fabián López', 
        specialty: 'Barbero Nocturno', 
        avatar: 'https://randomuser.me/api/portraits/men/62.jpg',
        rating: 4.6, 
        reviews: 29, 
        distance: 1.9, 
        lat: 5.687800, 
        lng: -76.662800, 
        available: true, 
        services: [
            {name: 'Corte Express', price: 15000, duration: '25 min'}, 
            {name: 'Servicio Nocturno', price: 20000, duration: '35 min'}, 
            {name: 'After Party', price: 18000, duration: '30 min'}
        ], 
        description: 'Horario extendido hasta las 11 PM. Perfecto para quienes salen del trabajo tarde.',
        phone: '+57 310 123 4567',
        experience: '4 años'
    },
    {
        id: 12, 
        name: 'Oscar Méndez', 
        specialty: 'Barbero & Colorista', 
        avatar: 'https://randomuser.me/api/portraits/men/18.jpg',
        rating: 4.7, 
        reviews: 41, 
        distance: 2.3, 
        lat: 5.689800, 
        lng: -76.659300, 
        available: false, 
        services: [
            {name: 'Corte + Color', price: 35000, duration: '70 min'}, 
            {name: 'Decoloración', price: 45000, duration: '90 min'}, 
            {name: 'Mechas Hombre', price: 40000, duration: '80 min'}
        ], 
        description: 'Experto en colorimetría masculina. Tintes fashion, mechas y decoloraciones profesionales.',
        phone: '+57 311 234 5678',
        experience: '8 años'
    }
];














const products = {
    maquinas: [
        {id: 1, name: 'Wahl Magic Clip', price: 320000, category: 'maquinas', image: 'https://images.unsplash.com/photo-1622287162716-f311baa1a2b8?w=400', brand: 'Wahl', rating: 4.9, stock: 15},
        {id: 2, name: 'Andis Master', price: 380000, category: 'maquinas', image: 'https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=400', brand: 'Andis', rating: 4.8, stock: 8},
        {id: 3, name: 'Oster Fast Feed', price: 290000, category: 'maquinas', image: 'https://images.unsplash.com/photo-1633681926022-84c23e8cb2d6?w=400', brand: 'Oster', rating: 4.7, stock: 12},
        {id: 4, name: 'BaByliss Pro FX', price: 450000, category: 'maquinas', image: 'https://images.unsplash.com/photo-1586495777744-4413f21062fa?w=400', brand: 'BaByliss', rating: 5.0, stock: 5}
    ],
    tijeras: [
        {id: 5, name: 'Tijera Profesional 6.5"', price: 180000, category: 'tijeras', image: 'https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=400', brand: 'Jaguar', rating: 4.8, stock: 20},
        {id: 6, name: 'Kit Tijeras Entresacar', price: 220000, category: 'tijeras', image: 'https://images.unsplash.com/photo-1634495278866-0a96c7c71310?w=400', brand: 'Kasho', rating: 4.9, stock: 10},
        {id: 7, name: 'Tijera Barber 7"', price: 250000, category: 'tijeras', image: 'https://images.unsplash.com/photo-1622287162716-f311baa1a2b8?w=400', brand: 'Kamisori', rating: 5.0, stock: 7},
        {id: 8, name: 'Navaja Barbera Clásica', price: 95000, category: 'tijeras', image: 'https://images.unsplash.com/photo-1595348020949-87cdfbb44174?w=400', brand: 'Dovo', rating: 4.7, stock: 18}
    ],
    productos: [
        {id: 9, name: 'Pomada Suavecito', price: 35000, category: 'productos', image: 'https://images.unsplash.com/photo-1571875257727-256c39da42af?w=400', brand: 'Suavecito', rating: 4.6, stock: 45},
        {id: 10, name: 'Cera American Crew', price: 42000, category: 'productos', image: 'https://images.unsplash.com/photo-1535585209827-a15fcdbc4c2d?w=400', brand: 'American Crew', rating: 4.8, stock: 35},
        {id: 11, name: 'Aceite para Barba', price: 28000, category: 'productos', image: 'https://images.unsplash.com/photo-1619451334792-150fd785ee74?w=400', brand: 'Beard Oil Co', rating: 4.7, stock: 50},
        {id: 12, name: 'Spray Fijador Strong', price: 38000, category: 'productos', image: 'https://images.unsplash.com/photo-1631214524020-7e18db9a8f92?w=400', brand: 'Redken', rating: 4.5, stock: 30}
    ],
    cuidado: [
        {id: 13, name: 'Shampoo Anticaída', price: 45000, category: 'cuidado', image: 'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=400', brand: 'Nioxin', rating: 4.8, stock: 25},
        {id: 14, name: 'Tratamiento Capilar', price: 65000, category: 'cuidado', image: 'https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=400', brand: 'Kerastase', rating: 4.9, stock: 15},
        {id: 15, name: 'Aceite Argan Profesional', price: 55000, category: 'cuidado', image: 'https://images.unsplash.com/photo-1615485500834-bc10199bc768?w=400', brand: 'Moroccanoil', rating: 5.0, stock: 20},
        {id: 16, name: 'Bálsamo After Shave', price: 32000, category: 'cuidado', image: 'https://images.unsplash.com/photo-1612817288484-6f916006741a?w=400', brand: 'Proraso', rating: 4.6, stock: 40}
    ],
    accesorios: [
        {id: 17, name: 'Capa de Corte Premium', price: 45000, category: 'accesorios', image: 'https://images.unsplash.com/photo-1621607512214-68297480165e?w=400', brand: 'Barber Pro', rating: 4.5, stock: 30},
        {id: 18, name: 'Peine Carbón Profesional', price: 18000, category: 'accesorios', image: 'https://images.unsplash.com/photo-1522338242992-e1a54906a8da?w=400', brand: 'YS Park', rating: 4.7, stock: 50},
        {id: 19, name: 'Brocha de Afeitar', price: 35000, category: 'accesorios', image: 'https://images.unsplash.com/photo-1610992015762-45dca7e4e2f6?w=400', brand: 'Edwin Jagger', rating: 4.8, stock: 22},
        {id: 20, name: 'Espejo Barbero LED', price: 125000, category: 'accesorios', image: 'https://images.unsplash.com/photo-1618220179428-22790b461013?w=400', brand: 'Conair', rating: 4.6, stock: 12}
    ],
    kits: [
        {id: 21, name: 'Kit Barbero Completo', price: 850000, category: 'kits', image: 'https://images.unsplash.com/photo-1503951914875-452162b0f3f1?w=400', brand: 'Pro Barber', rating: 5.0, stock: 6},
        {id: 22, name: 'Kit Inicio Barbería', price: 450000, category: 'kits', image: 'https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400', brand: 'Starter Pack', rating: 4.7, stock: 10},
        {id: 23, name: 'Kit Cuidado Barba', price: 95000, category: 'kits', image: 'https://images.unsplash.com/photo-1587402092301-725e37c70fd8?w=400', brand: 'Beard Kit Pro', rating: 4.8, stock: 18},
        {id: 24, name: 'Kit Herramientas Premium', price: 650000, category: 'kits', image: 'https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400', brand: 'Elite Tools', rating: 4.9, stock: 8}
    ]
};
        function showSignUp() { document.getElementById('signUpForm').classList.add('active'); document.getElementById('signInForm').classList.remove('active'); }
        function showSignIn() { document.getElementById('signInForm').classList.add('active'); document.getElementById('signUpForm').classList.remove('active'); }
        function switchToSignIn() { document.getElementById('signUpForm').classList.remove('active'); document.getElementById('signInForm').classList.add('active'); }
        function switchToSignUp() { document.getElementById('signInForm').classList.remove('active'); document.getElementById('signUpForm').classList.add('active'); }
        function closeAuthForms() { document.getElementById('signUpForm').classList.remove('active'); document.getElementById('signInForm').classList.remove('active'); }

        function handleSignUp() {
            const name = document.getElementById('signUpName').value;
            const email = document.getElementById('signUpEmail').value;
            if (!name || !email) { alert('Por favor completa todos los campos'); return; }
            showLoading();
            setTimeout(() => {
                currentUser = { name: name, email: email, avatar: name.charAt(0).toUpperCase() };
                hideLoading();
                closeAuthForms();
                showApp();
                updateUserInfo();
                alert('¡Registro exitoso! Bienvenido ' + name);
            }, 1500);
        }

        function handleSignIn() {
            const email = document.getElementById('signInEmail').value;
            if (!email) { alert('Por favor ingresa tu email'); return; }
            showLoading();
            setTimeout(() => {
                currentUser = { name: 'Usuario Demo', email: email, avatar: 'U' };
                hideLoading();
                closeAuthForms();
                showApp();
                updateUserInfo();
                alert('¡Inicio de sesión exitoso!');
            }, 1500);
        }

        function logout() {
            if (confirm('¿Estás seguro de que deseas cerrar sesión?')) {
                currentUser = null;
                document.getElementById('appContainer').classList.remove('active');
                document.getElementById('landingPage').style.display = 'flex';
                toggleUserMenu();
            }
        }

        function updateUserInfo() {
            if (currentUser) {
                document.getElementById('userAvatar').textContent = currentUser.avatar;
                document.getElementById('userMenuAvatar').textContent = currentUser.avatar;
                document.getElementById('userMenuName').textContent = currentUser.name;
            }
        }

        function showApp() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('appContainer').classList.add('active');
            if (!currentUser) { currentUser = { name: 'Usuario', avatar: 'U' }; updateUserInfo(); }
        }

      

        function showHome() {
    document.getElementById('shopView').style.display = 'block';
    document.getElementById('barbersView').style.display = 'none';
    document.getElementById('productsView').style.display = 'none';
    document.getElementById('storeView').style.display = 'none';
    document.getElementById('socialView').style.display = 'none';
    updateNavActive(0);
}

function showBarbers() {
    document.getElementById('shopView').style.display = 'none';
    document.getElementById('barbersView').style.display = 'block';
    document.getElementById('productsView').style.display = 'none';
    document.getElementById('storeView').style.display = 'none';
    document.getElementById('socialView').style.display = 'none';
    updateNavActive(1);
    if (!map) initMap();
    // NO cargar barberos automáticamente - solo con búsqueda
    showMapMessage('Usa el buscador para encontrar barberos cerca de ti');
}

function showSocial() {
    document.getElementById('shopView').style.display = 'none';
    document.getElementById('barbersView').style.display = 'none';
    document.getElementById('productsView').style.display = 'none';
    document.getElementById('storeView').style.display = 'none';
    document.getElementById('socialView').style.display = 'block';
    updateNavActive(2);
}

// NUEVA FUNCIÓN PARA LA TIENDA
function showStore() {
    document.getElementById('shopView').style.display = 'none';
    document.getElementById('barbersView').style.display = 'none';
    document.getElementById('productsView').style.display = 'none';
    document.getElementById('storeView').style.display = 'block';
    document.getElementById('socialView').style.display = 'none';
    updateNavActive(3);
    
    // Cargar productos si aún no se han cargado
    if (allStoreProducts.length === 0) {
        loadAllProducts();
        loadFeaturedProducts();
    }
}



function showProducts(category) {
    document.getElementById('shopView').style.display = 'none';
    document.getElementById('barbersView').style.display = 'none';
    document.getElementById('productsView').style.display = 'block';
    document.getElementById('storeView').style.display = 'none';
    document.getElementById('socialView').style.display = 'none';
    
    const categoryNames = { 
        maquinas: 'Máquinas y Cortadoras',
        tijeras: 'Tijeras y Navajas',
        productos: 'Productos de Estilizado',
        cuidado: 'Cuidado Capilar',
        accesorios: 'Accesorios',
        kits: 'Kits Profesionales'
    };
    
    document.getElementById('productsTitle').textContent = categoryNames[category] || 'Productos';
    loadProducts(category);
}
      
        function updateNavActive(index) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, i) => { item.classList.toggle('active', i === index); });
        }




        function initMap() {
    map = L.map('barberMap').setView(userLocation, 15);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { 
        attribution: '© OpenStreetMap', 
        maxZoom: 19 
    }).addTo(map);
    
    // Marcador de usuario mejorado
    const userIcon = L.divIcon({ 
        className: 'custom-marker', 
        html: `
            <div style="
                width: 50px; 
                height: 50px; 
                background: linear-gradient(135deg, #00D68F, #00B87A); 
                border-radius: 50%; 
                border: 4px solid white; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                color: white; 
                font-size: 24px; 
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            ">📍</div>
        `, 
        iconSize: [50, 50], 
        iconAnchor: [25, 25] 
    });
    
    L.marker(userLocation, { icon: userIcon }).addTo(map)
        .bindPopup('<b>Tu ubicación</b><br>Quibdó, Chocó');
    
    // Agregar círculo de radio de búsqueda
    const initialRadius = parseFloat(document.getElementById('radiusSlider')?.value || 5);
    radiusCircle = L.circle(userLocation, {
        color: '#00D68F',
        fillColor: '#00D68F',
        fillOpacity: 0.1,
        radius: initialRadius * 1000, // km a metros
        weight: 2,
        dashArray: '10, 5'
    }).addTo(map);
    
    // Mensaje inicial - barberos se muestran solo con búsqueda
    showMapMessage('Usa el buscador para encontrar barberos cerca de ti');
}

// Función para mostrar mensaje en el mapa
function showMapMessage(message) {
    const list = document.getElementById('barbersList');
    list.innerHTML = `
        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666; background: white; border-radius: 15px; margin: 10px 0;">
            <i class="fas fa-search" style="font-size: 3rem; color: #00D68F; margin-bottom: 15px; display: block;"></i>
            <h3 style="color: #333; margin-bottom: 10px;">Busca barberos</h3>
            <p>${message}</p>
            <p style="margin-top: 10px; font-size: 0.9rem; color: #999;">Usa la barra de búsqueda o los filtros avanzados</p>
        </div>
    `;
}

// Función para agregar marcadores de barberos al mapa
function addBarbersToMap(barbersToShow) {
    // Limpiar marcadores anteriores
    barberMarkers.forEach(marker => map.removeLayer(marker));
    barberMarkers = [];
    
    barbersToShow.forEach(barber => {
        const barberIcon = L.divIcon({ 
            className: 'custom-marker', 
            html: `
              <div style="position: relative;">
                <div style="
                    width: 50px;
                    height: 50px;
                    background: white;
                    border-radius: 50%;
                    border: 3px solid ${barber.available ? '#00D68F' : '#FF5D9E'};
                    overflow: hidden;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.4);
                ">
                    <img src="${barber.avatar}" 
                         style="width: 100%; height: 100%; object-fit: cover;"
                         onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Crect fill=%22%23667eea%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2255%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2230%22 font-weight=%22bold%22%3E${barber.name.charAt(0)}%3C/text%3E%3C/svg%3E'">
                </div>
                <div style="
                    position: absolute;
                    bottom: -2px;
                    right: -2px;
                    width: 16px;
                    height: 16px;
                    background: ${barber.available ? '#00D68F' : '#FF5D9E'};
                    border: 3px solid white;
                    border-radius: 50%;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                "></div>
            </div>
        `,
            iconSize: [45, 45], 
            iconAnchor: [22, 22] 
        });
        
        const marker = L.marker([barber.lat, barber.lng], { icon: barberIcon }).addTo(map);
        barberMarkers.push(marker);
        
        const popupContent = `
        <div style="text-align: center; padding: 15px; min-width: 220px;">
            <div style="
                width: 70px;
                height: 70px;
                background: white;
                border-radius: 50%;
                margin: 0 auto 12px;
                overflow: hidden;
                border: 3px solid ${barber.available ? '#00D68F' : '#FF5D9E'};
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            ">
                <img src="${barber.avatar}" 
                     style="width: 100%; height: 100%; object-fit: cover;"
                     onerror="this.style.display='none'">
            </div>
            
            <h4 style="margin: 0 0 5px 0; color: #333; font-size: 16px;">${barber.name}</h4>
            <p style="margin: 0 0 8px 0; color: #666; font-size: 13px;">${barber.specialty}</p>
            
            <div style="
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 5px;
                margin-bottom: 8px;
            ">
                <span style="color: #FFD700; font-size: 14px;">★★★★★</span>
                <span style="color: #666; font-size: 13px;">${barber.rating} (${barber.reviews})</span>
            </div>
            
            <div style="
                background: ${barber.available ? 'rgba(0, 214, 143, 0.1)' : 'rgba(255, 93, 158, 0.1)'};
                color: ${barber.available ? '#00D68F' : '#FF5D9E'};
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: 600;
                margin-bottom: 8px;
                display: inline-block;
            ">
                ${barber.available ? '● Disponible ahora' : '● Ocupado'}
            </div>
            
            <div style="
                color: #00D68F;
                font-weight: 600;
                font-size: 13px;
                margin-bottom: 10px;
            ">
                📍 ${barber.distance} km • ⏱️ ${barber.experience}
            </div>
            
            <div style="display: flex; gap: 5px; margin-bottom: 10px;">
                <button onclick="showRoute(${barber.lat}, ${barber.lng}, '${barber.name}')" style="
                    flex: 1;
                    padding: 8px;
                    background: #00D68F;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 600;
                    font-size: 12px;
                ">
                    🗺️ Cómo llegar
                </button>
            </div>
            
            <button onclick="showBarberProfile(${barber.id})" style="
                width: 100%;
                padding: 10px;
                background: linear-gradient(135deg, #FF5D9E, #FF8E8E);
                color: white;
                border: none;
                border-radius: 10px;
                cursor: pointer;
                font-weight: 600;
                font-size: 12px;
                transition: all 0.3s ease;
                box-shadow: 0 3px 10px rgba(255, 93, 158, 0.3);
            ">
                👁️ Ver Perfil Completo
            </button>
        </div>
    `;
        
        marker.bindPopup(popupContent, {
            maxWidth: 250,
            className: 'custom-popup'
        });
    });
    
    // Ajustar vista del mapa para mostrar todos los marcadores
    if (barbersToShow.length > 0) {
        const group = new L.featureGroup(barberMarkers);
        map.fitBounds(group.getBounds().pad(0.2));
    }
}



















// ACTUALIZAR RADIO DEL CÍRCULO
function updateSearchRadius(value) {
    document.getElementById('radiusValue').textContent = value;
    
    if (radiusCircle && map) {
        // Actualizar radio del círculo (convertir km a metros)
        radiusCircle.setRadius(value * 1000);
        
        // Ajustar zoom del mapa según el radio
        const zoom = value <= 5 ? 14 : value <= 10 ? 13 : value <= 20 ? 12 : 11;
        map.setView(userLocation, zoom);
    }
}

// MOSTRAR RUTA EN EL MAPA
let currentRoute = null;
let routeShadow = null;



function showRoute(destLat, destLng, barberName) {
    // Eliminar ruta anterior
    clearRoute();
    
    // Obtener punto de inicio
    const startLat = userCurrentLocation ? userCurrentLocation.lat : userLocation[0];
    const startLng = userCurrentLocation ? userCurrentLocation.lng : userLocation[1];
    
    // Crear waypoints
    const waypoints = [
        L.latLng(startLat, startLng),
        L.latLng(destLat, destLng)
    ];
    
    // Verificar si Leaflet Routing Machine está disponible
    if (typeof L.Routing !== 'undefined') {
        // Usar routing real con OSRM
        currentRoute = L.Routing.control({
            waypoints: waypoints,
            routeWhileDragging: false,
            addWaypoints: false,
            createMarker: function() { return null; },
            lineOptions: {
                styles: [{ 
                    color: '#00D68F', 
                    weight: 6, 
                    opacity: 0.8 
                }]
            },
            show: false,
            router: L.Routing.osrmv1({
                serviceUrl: 'https://router.project-osrm.org/route/v1'
            })
        }).addTo(map);
        
        currentRoute.on('routesfound', function(e) {
            const routes = e.routes;
            const summary = routes[0].summary;
            const distance = (summary.totalDistance / 1000).toFixed(1);
            const time = Math.round(summary.totalTime / 60);
            showRouteInfoPanel(barberName, distance, time, destLat, destLng);
        });
        
        currentRoute.on('routingerror', function(e) {
            console.error('Error de routing:', e);
            // Fallback a línea recta
            drawSimpleRoute(startLat, startLng, destLat, destLng, barberName);
        });
    } else {
        // Fallback: dibujar línea recta si no hay Routing Machine
        drawSimpleRoute(startLat, startLng, destLat, destLng, barberName);
    }
    
    // Ajustar vista
    setTimeout(() => {
        const group = new L.featureGroup([
            L.marker([startLat, startLng]),
            L.marker([destLat, destLng])
        ]);
        map.fitBounds(group.getBounds().pad(0.2));
    }, 500);
}

// Función auxiliar para ruta simple (fallback)
function drawSimpleRoute(startLat, startLng, destLat, destLng, barberName) {
    const routePoints = [
        [startLat, startLng],
        [destLat, destLng]
    ];
    
    currentRoute = L.polyline(routePoints, {
        color: '#00D68F',
        weight: 5,
        opacity: 0.8,
        dashArray: '10, 10'
    }).addTo(map);
    
    // Calcular distancia aproximada
    const distance = calculateDistance(startLat, startLng, destLat, destLng);
    const time = Math.ceil(distance * 4);
    
    showRouteInfoPanel(barberName, distance, time, destLat, destLng);
}



function showRouteInfoPanel(barberName, distance, time, destLat, destLng) {
    // Eliminar panel anterior si existe
    const existingPanel = document.getElementById('routeInfoPanel');
    if (existingPanel) {
        existingPanel.remove();
    }
    
    const panel = document.createElement('div');
    panel.id = 'routeInfoPanel';
    panel.style.cssText = `
        position: fixed;
        bottom: 80px;
        left: 50%;
        transform: translateX(-50%);
        background: white;
        border-radius: 15px;
        padding: 15px 20px;
        box-shadow: 0 5px 25px rgba(0,0,0,0.2);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 15px;
        max-width: 90%;
        animation: slideUp 0.3s ease;
    `;
    
    panel.innerHTML = `
        <div style="flex: 1;">
            <div style="font-weight: 600; color: #333; margin-bottom: 5px;">
                <i class="fas fa-route" style="color: #00D68F;"></i> Ruta a ${barberName}
            </div>
            <div style="display: flex; gap: 15px; font-size: 0.9rem; color: #666;">
                <span><i class="fas fa-map-marker-alt" style="color: #FF5D9E;"></i> ${distance} km</span>
                <span><i class="fas fa-clock" style="color: #00D68F;"></i> ~${time} min</span>
            </div>
        </div>
        <button onclick="openGoogleMapsRoute(${destLat}, ${destLng})" style="
            background: #00D68F;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        ">
            <i class="fas fa-external-link-alt"></i> Google Maps
        </button>
        <button onclick="clearRoute()" style="
            background: #FF5D9E;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
        ">
            <i class="fas fa-times"></i>
        </button>
    `;
    
    document.body.appendChild(panel);
}

function openGoogleMapsRoute(destLat, destLng) {
    const startPoint = userCurrentLocation ? [userCurrentLocation.lat, userCurrentLocation.lng] : userLocation;
    const url = `https://www.google.com/maps/dir/?api=1&origin=${startPoint[0]},${startPoint[1]}&destination=${destLat},${destLng}&travelmode=walking`;
    window.open(url, '_blank');
}

// LIMPIAR RUTA
function clearRoute() {
    if (currentRoute && map) {
        // Si es un control de routing (L.Routing.control)
        if (currentRoute.remove) {
            map.removeControl(currentRoute);
        } else {
            // Si es una polyline simple
            map.removeLayer(currentRoute);
        }
        currentRoute = null;
    }
    
    // Remover panel de información
    const panel = document.getElementById('routeInfoPanel');
    if (panel) {
        panel.remove();
    }
}

// Agregar estilos para animaciones de ruta
const routeStyles = document.createElement('style');
routeStyles.textContent = `
    @keyframes slideUp {
        from { transform: translate(-50%, 100px); opacity: 0; }
        to { transform: translate(-50%, 0); opacity: 1; }
    }
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }
`;
document.head.appendChild(routeStyles);

// FUNCIONES DE BÚSQUEDA EN EL MAPA

function searchNearbyBarbers() {
    const radius = parseFloat(document.getElementById('radiusSlider')?.value || 5);
    
    // Actualizar círculo de radio
    if (radiusCircle && map) {
        radiusCircle.setRadius(radius * 1000);
    }
    
    // Filtrar barberos por distancia
    const nearbyBarbers = barbers.filter(b => b.distance <= radius);
    
    // Agregar al mapa
    addBarbersToMap(nearbyBarbers);
    
    // Mostrar en lista
    displayFilteredBarbers(nearbyBarbers);
    
    // Actualizar contador
    updateSearchInfo(nearbyBarbers.length, radius);
    
    showNotification(`Se encontraron ${nearbyBarbers.length} barberos en un radio de ${radius} km`, 'success');
}

function showAllBarbers() {
    // Agregar todos los barberos al mapa
    addBarbersToMap(barbers);
    
    // Mostrar en lista
    displayFilteredBarbers(barbers);
    
    // Actualizar contador
    const maxDistance = Math.max(...barbers.map(b => b.distance));
    updateSearchInfo(barbers.length, maxDistance);
    
    // Ajustar radio del círculo para incluir a todos
    if (radiusCircle && map) {
        radiusCircle.setRadius(maxDistance * 1000 + 500);
    }
    
    showNotification(`Mostrando todos los ${barbers.length} barberos`, 'success');
}

function clearMapSearch() {
    // Limpiar marcadores del mapa
    barberMarkers.forEach(marker => map.removeLayer(marker));
    barberMarkers = [];
    
    // Limpiar ruta si existe
    clearRoute();
    
    // Resetear radio
    if (radiusCircle && map) {
        radiusCircle.setRadius(5000);
    }
    
    // Mostrar mensaje inicial
    showMapMessage('Usa el buscador para encontrar barberos cerca de ti');
    
    // Actualizar info
    document.getElementById('barbersFoundCount').textContent = 'Usa los filtros o botones para buscar';
    document.getElementById('currentRadiusDisplay').textContent = '5';
    
    // Resetear vista del mapa
    map.setView(userLocation, 15);
    
    showNotification('Búsqueda limpiada', 'info');
}

function updateSearchInfo(count, radius) {
    document.getElementById('barbersFoundCount').innerHTML = `<strong>${count}</strong> barberos encontrados`;
    document.getElementById('currentRadiusDisplay').textContent = radius.toFixed(1);
}

// CAMBIAR VISTA DEL MAPA
function changeMapView(viewType) {
    document.querySelectorAll('.control-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // Aquí podrías cambiar entre diferentes capas de mapa
    showNotification(`Vista cambiada a: ${viewType}`, 'info');
}

// CENTRAR EN UBICACIÓN DEL USUARIO
function centerOnUserLocation() {
    if (map) {
        map.setView(userLocation, 15);
        showNotification('📍 Centrado en tu ubicación', 'success');
    }
}















  function loadBarbers() {
    const list = document.getElementById('barbersList');
    list.innerHTML = '';
    barbers.forEach(barber => {
        const card = document.createElement('div');
        card.className = 'barber-card';
        card.onclick = () => showBarberProfile(barber.id);
        
        const availability = barber.available ? 
            '<span style="color: #00D68F; font-size: 0.85rem;">● Disponible</span>' : 
            '<span style="color: #FF5D9E; font-size: 0.85rem;">● Ocupado</span>';
        
        card.innerHTML = `
            <div class="barber-header">
                <div class="barber-avatar" style="
                    width: 60px;
                    height: 60px;
                    background: white;
                    border-radius: 50%;
                    overflow: hidden;
                    border: 3px solid ${barber.available ? '#00D68F' : '#FF5D9E'};
                ">
                    <img src="${barber.avatar}" 
                         style="width: 100%; height: 100%; object-fit: cover;"
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'width:100%; height:100%; background: linear-gradient(135deg, #00D68F, #00B87A); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.3rem;\'>${barber.name.charAt(0)}</div>'">
                </div>
                <div class="barber-info">
                    <h4>${barber.name}</h4>
                    <div class="barber-specialty">${barber.specialty}</div>
                    ${availability}
                </div>
            </div>
            <div class="barber-rating">
                <div class="stars">★★★★★</div>
                <div class="rating-text">${barber.rating} (${barber.reviews} reseñas)</div>
            </div>
            <div class="barber-distance">${barber.distance} km • ${barber.experience}</div>
            <div class="barber-actions">
                <button class="btn btn-primary" onclick="event.stopPropagation(); contactBarber(${barber.id})">Contactar</button>
                <button class="btn btn-secondary" onclick="event.stopPropagation(); currentBarber = ${barber.id}; openBooking()">Reservar</button>
            </div>
        `;
        list.appendChild(card);
    });
}
     

     function loadProducts(category) {
    const list = document.getElementById('productsList');
    list.innerHTML = '';
    const categoryProducts = products[category] || [];
    categoryProducts.forEach(product => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = '<div class="product-image">' + product.icon + '</div><div class="product-info"><div class="product-name">' + product.name + '</div><div class="product-price">$' + product.price.toLocaleString() + '</div><button class="add-to-cart" onclick="addToCart(' + product.id + ')"><i class="fas fa-cart-plus"></i> Agregar al carrito</button></div>';
        list.appendChild(card);
    });
}

  
    function showBarberProfile(id) {
    const barber = barbers.find(b => b.id === id);
    if (!barber) return;
    currentBarber = id;
    document.getElementById('appContainer').style.display = 'none';
    document.getElementById('barberProfile').classList.add('active');
    document.getElementById('profileAvatar').textContent = barber.avatar;
    document.getElementById('profileName').textContent = barber.name;
    document.getElementById('profileRating').textContent = barber.rating + ' (' + barber.reviews + ' reseñas)';
    document.getElementById('profileDescription').textContent = barber.description;
    const servicesContainer = document.getElementById('profileServices');
    servicesContainer.innerHTML = '';
    barber.services.forEach(service => {
        const serviceItem = document.createElement('div');
        serviceItem.className = 'service-item';
        serviceItem.innerHTML = '<div><strong>' + service.name + '</strong><div style="font-size: 0.9rem; color: #666;">' + service.duration + '</div></div><div style="font-weight: bold; color: #00D68F;">$' + service.price.toLocaleString() + '</div>';
        servicesContainer.appendChild(serviceItem);
    });
}




        function hideBarberProfile() {
            document.getElementById('barberProfile').classList.remove('active');
            document.getElementById('appContainer').style.display = 'block';
        }

        function openBooking() {
            const barber = barbers.find(b => b.id === currentBarber);
            if (!barber) return;
            document.getElementById('bookingBarberName').textContent = 'Reserva con ' + barber.name;
            document.getElementById('bookingModal').classList.add('active');
            loadDates();
            loadTimeSlots();
            loadServices(barber);
        }

        function loadDates() {
            const container = document.getElementById('dateSelector');
            container.innerHTML = '';
            for (let i = 0; i < 7; i++) {
                const date = new Date();
                date.setDate(date.getDate() + i);
                const dateItem = document.createElement('div');
                dateItem.className = 'date-item';
                dateItem.innerHTML = '<div style="font-size: 0.8rem;">' + date.toLocaleDateString('es', { weekday: 'short' }) + '</div><div style="font-weight: bold;">' + date.getDate() + '</div>';
                dateItem.onclick = function() {
                    document.querySelectorAll('.date-item').forEach(item => item.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDate = date;
                };
                container.appendChild(dateItem);
            }
        }

        function loadTimeSlots() {
            const container = document.getElementById('timeSlots');
            container.innerHTML = '';
            const times = ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
            times.forEach(time => {
                const timeSlot = document.createElement('div');
                timeSlot.className = 'time-slot';
                timeSlot.textContent = time;
                timeSlot.onclick = function() {
                    document.querySelectorAll('.time-slot').forEach(item => item.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTime = time;
                };
                container.appendChild(timeSlot);
            });
        }




            function loadServices(barber) {
    const container = document.getElementById('serviceSelector');
    container.innerHTML = '';
    barber.services.forEach(service => {
        const serviceItem = document.createElement('div');
        serviceItem.className = 'service-item';
        serviceItem.innerHTML = '<div><strong>' + service.name + '</strong><div style="font-size: 0.9rem;">' + service.duration + '</div></div><div style="font-weight: bold;">$' + service.price.toLocaleString() + '</div>';
        serviceItem.onclick = function() {
            document.querySelectorAll('.service-item').forEach(item => item.classList.remove('selected'));
            this.classList.add('selected');
            selectedService = service;
        };
        container.appendChild(serviceItem);
    });
}

     function confirmBooking() {
    if (!selectedDate || !selectedTime || !selectedService) { alert('Por favor selecciona fecha, hora y servicio'); return; }
    const barber = barbers.find(b => b.id === currentBarber);
    showLoading();
    setTimeout(() => {
        hideLoading();
        alert('✅ ¡Cita confirmada!\n\nBarbero: ' + barber.name + '\nFecha: ' + selectedDate.toLocaleDateString('es') + '\nHora: ' + selectedTime + '\nServicio: ' + selectedService.name + '\nPrecio: $' + selectedService.price.toLocaleString() + '\n\nRecibirás una confirmación por WhatsApp.');
        closeBooking();
    }, 1500);
}

        function closeBooking() {
            document.getElementById('bookingModal').classList.remove('active');
            selectedDate = null;
            selectedTime = null;
            selectedService = null;
        }

        function closeBookingClick(event) {
            if (event.target.id === 'bookingModal') closeBooking();
        }

        function addToCart(productId) {
            let product = null;
            for (let category in products) {
                product = products[category].find(p => p.id === productId);
                if (product) break;
            }
            if (product) {
                cart.push(product);
                updateCartBadge();
                alert('✅ ' + product.name + ' agregado al carrito');
            }
        }

        function updateCartBadge() { document.getElementById('cartBadge').textContent = cart.length; }

     


        function showCart() {
    if (cart.length === 0) { alert('Tu carrito está vacío'); return; }
    let cartMessage = '🛒 Tu Carrito:\n\n';
    let total = 0;
    cart.forEach((item, index) => {
        cartMessage += (index + 1) + '. ' + item.name + ' - $' + item.price.toLocaleString() + '\n';
        total += item.price;
    });
    cartMessage += '\nTotal: $' + total.toLocaleString();
    if (confirm(cartMessage + '\n\n¿Proceder al pago?')) processPayment(total);
}

function processPayment(total) {
    showLoading();
    setTimeout(() => {
        hideLoading();
        alert('✅ ¡Compra exitosa!\n\nTotal pagado: $' + total.toLocaleString() + '\n\nRecibirás tu pedido en 2-3 días hábiles.');
        cart = [];
        updateCartBadge();
    }, 2000);
}
























     

        function performSearch(value) {
            if (!value) { 
                showMapMessage('Usa el buscador para encontrar barberos cerca de ti');
                // Limpiar marcadores del mapa
                barberMarkers.forEach(marker => map.removeLayer(marker));
                barberMarkers = [];
                return; 
            }
            const filtered = barbers.filter(b => b.name.toLowerCase().includes(value.toLowerCase()) || b.specialty.toLowerCase().includes(value.toLowerCase()));
            
            // Agregar barberos filtrados al mapa
            addBarbersToMap(filtered);
            
            // Mostrar lista de barberos
            const list = document.getElementById('barbersList');
            list.innerHTML = '';
            filtered.forEach(barber => {
                const card = document.createElement('div');
                card.className = 'barber-card';
                card.onclick = () => showBarberProfile(barber.id);
                card.innerHTML = `
                    <div class="barber-header">
                        <div class="barber-avatar" style="background-image: url('${barber.avatar}'); background-size: cover; background-position: center;"></div>
                        <div class="barber-info">
                            <h4>${barber.name}</h4>
                            <div class="barber-specialty">${barber.specialty}</div>
                        </div>
                    </div>
                    <div class="barber-rating">
                        <div class="stars">★★★★★</div>
                        <div class="rating-text">${barber.rating} (${barber.reviews})</div>
                    </div>
                    <div class="barber-distance">${barber.distance} km de distancia</div>
                    <div class="barber-actions">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showRoute(${barber.lat}, ${barber.lng}, '${barber.name}')">
                            <i class="fas fa-route"></i> Cómo llegar
                        </button>
                        <button class="btn btn-secondary" onclick="event.stopPropagation(); currentBarber = ${barber.id}; openBooking()">Reservar</button>
                    </div>
                `;
                list.appendChild(card);
            });
            if (filtered.length === 0) list.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">No se encontraron resultados</p>';
            
            showNotification(`Se encontraron ${filtered.length} barberos`, 'success');
        }


// SISTEMA DE TABS EN PERFIL
function switchProfileTab(tabName) {
    // Desactivar todos los tabs
    document.querySelectorAll('.tab-item').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.tab-pane').forEach(pane => {
        pane.classList.remove('active');
    });
    
    // Activar tab seleccionado
    document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
    document.getElementById(`tab${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`).classList.add('active');
}

// Funciones de acciones del perfil
function shareBarberProfile() {
    if (navigator.share) {
        navigator.share({
            title: 'BarberLink - Perfil',
            text: 'Mira este barbero increíble en BarberLink',
            url: window.location.href
        });
    } else {
        const url = window.location.href;
        navigator.clipboard.writeText(url);
        alert('✓ Enlace copiado al portapapeles');
    }
}

function saveBarberFavorite() {
    const btn = event.target.closest('button');
    const icon = btn.querySelector('i');
    
    if (icon.classList.contains('far')) {
        icon.classList.remove('far');
        icon.classList.add('fas');
        btn.innerHTML = '<i class="fas fa-heart"></i> Guardado';
        alert('❤️ Guardado en favoritos');
    } else {
        icon.classList.remove('fas');
        icon.classList.add('far');
        btn.innerHTML = '<i class="far fa-heart"></i> Guardar';
        alert('Eliminado de favoritos');
    }
}





        function filterByService(serviceType) {
    showBarbers();
    
    setTimeout(() => {
        document.getElementById('serviceTypeFilter').value = serviceType;
        applyAdvancedFilters();
    }, 500);
}


// Cargar barberos destacados dinámicamente
function loadFeaturedBarbers() {
    const featured = barbers
        .filter(b => b.rating >= 4.7)
        .sort((a, b) => b.rating - a.rating)
        .slice(0, 3);
    
    // Actualizar cards de destacados...
    // (ya están hardcodeados en HTML, pero puedes hacerlo dinámico)
}

// Cargar barberos cercanos dinámicamente
function loadNearbyBarbers() {
    const nearby = barbers
        .sort((a, b) => a.distance - b.distance)
        .slice(0, 3);
    
    // Actualizar lista de cercanos...
    // (ya están hardcodeados en HTML, pero puedes hacerlo dinámico)
}

// Cargar actividad social simulada
function loadSocialActivity() {
    const activities = [
        {
            type: 'review',
            user: 'Carlos Méndez',
            avatar: 'CM',
            time: '2 horas',
            preview: true
        },
        {
            type: 'post',
            user: 'Juan Domínguez',
            avatar: 'JD',
            time: '5 horas',
            preview: true
        },
        {
            type: 'favorite',
            user: 'Ana Fernández',
            avatar: 'AF',
            time: '1 día',
            preview: false
        }
    ];
    
    // Renderizar actividades...
}

// Inicializar home al cargar
document.addEventListener('DOMContentLoaded', function() {
    loadFeaturedBarbers();
    loadNearbyBarbers();
    loadSocialActivity();
});



// Sugerencias de búsqueda rápida
function showQuickSearchSuggestions() {
    const input = document.getElementById('homeQuickSearch');
    const suggestions = [
        '🔥 Degradado profesional',
        '🧔 Arreglo de barba completo',
        '🎨 Diseños personalizados',
        '💈 Corte + Barba combo',
        '✂️ Corte clásico'
    ];
    
    // Crear dropdown de sugerencias
    let dropdown = document.getElementById('homeSuggestionsDropdown');
    
    // Si no existe, crearlo
    if (!dropdown) {
        dropdown = document.createElement('div');
        dropdown.id = 'homeSuggestionsDropdown';
        dropdown.className = 'suggestions-dropdown-home';
        dropdown.style.cssText = `
    position: absolute;
    top: 84%;
    left: 22px;
    right: 0px;
    background: white;
    border: 1px solid rgb(233, 236, 239);
    border-radius: 0px 0px 12px 12px;
    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;
    z-index: 1000;
    max-height: 234px;
    overflow-y: auto;
    margin-top: 9px;
    display: block;
    max-width: 520px;
    border-radius: 20px;
        `;
        
        // Insertar después del input
        input.parentElement.appendChild(dropdown);
    }
    
    // Llenar con sugerencias
    dropdown.innerHTML = suggestions.map(suggestion => `
        <div class="suggestion-item-home" 
             onclick="selectHomeSuggestion('${suggestion.replace(/[🔥🧔🎨💈✂️]/g, '').trim()}')" 
             style="
                padding: 12px 20px;
                cursor: pointer;
                border-bottom: 1px solid #f0f0f0;
                transition: background 0.2s ease;
                display: flex;
                align-items: center;
                gap: 10px;
             "
             onmouseover="this.style.background='#f8f9fa'" 
             onmouseout="this.style.background='white'">
            <i class="fas fa-search" style="color: #6c757d; font-size: 0.9rem;"></i>
            <span>${suggestion}</span>
        </div>
    `).join('');
    
    // Mostrar dropdown
    dropdown.style.display = 'block';
    
    // Auto-ocultar al hacer click fuera
    setTimeout(() => {
        document.addEventListener('click', function hideDropdown(e) {
            if (!input.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.style.display = 'none';
                document.removeEventListener('click', hideDropdown);
            }
        });
    }, 100);
}

// Función para seleccionar sugerencia
function selectHomeSuggestion(suggestion) {
    const input = document.getElementById('homeQuickSearch');
    input.value = suggestion;
    
    // Ocultar dropdown
    const dropdown = document.getElementById('homeSuggestionsDropdown');
    if (dropdown) {
        dropdown.style.display = 'none';
    }
    
    // Ejecutar búsqueda
    showBarbers();
    setTimeout(() => {
        performSearch(suggestion);
    }, 500);
}











// ================================
// FUNCIONES DE RED SOCIAL
// ================================

let followingList = [1, 2, 3, 4]; // IDs de barberos que sigue el usuario
let likedPosts = [2]; // IDs de posts con like
let savedPosts = []; // IDs de posts guardados
let currentStoryIndex = 0;
let storyTimer = null;

// Cambiar tabs de red social
function switchSocialTab(tabName) {
    document.querySelectorAll('.social-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.social-tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
    document.getElementById(`tab${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`).classList.add('active');
}

// Mostrar vista social desde navegación


// ================================
// GESTIÓN DE LIKES
// ================================
function toggleLike(postId) {
    const btn = event.target.closest('.post-action-btn');
    const icon = btn.querySelector('i');
    const statsContainer = btn.closest('.post-card').querySelector('.post-stats');
    const likeStat = statsContainer.querySelector('.post-stat-item:first-child');
    
    if (likedPosts.includes(postId)) {
        // Quitar like
        likedPosts = likedPosts.filter(id => id !== postId);
        btn.classList.remove('liked');
        icon.classList.remove('fas');
        icon.classList.add('far');
        btn.innerHTML = '<i class="far fa-heart"></i> Me gusta';
        
        // Actualizar contador
        const currentLikes = parseInt(likeStat.textContent.match(/\d+/)[0]);
        likeStat.innerHTML = `<i class="fas fa-heart"></i> ${currentLikes - 1} Me gusta`;
        
    } else {
        // Dar like
        likedPosts.push(postId);
        btn.classList.add('liked');
        icon.classList.remove('far');
        icon.classList.add('fas');
        btn.innerHTML = '<i class="fas fa-heart"></i> Me gusta';
        
        // Actualizar contador
        const currentLikes = parseInt(likeStat.textContent.match(/\d+/)[0]);
        likeStat.innerHTML = `<i class="fas fa-heart"></i> ${currentLikes + 1} Me gusta`;
        
        // Animación de corazón
        showLikeAnimation(btn);
    }
}

function showLikeAnimation(element) {
    const heart = document.createElement('div');
    heart.innerHTML = '❤️';
    heart.style.cssText = `
        position: absolute;
        font-size: 3rem;
        animation: likeFloat 1s ease-out forwards;
        pointer-events: none;
        z-index: 1000;
    `;
    
    const rect = element.getBoundingClientRect();
    heart.style.left = rect.left + rect.width / 2 + 'px';
    heart.style.top = rect.top + 'px';
    
    document.body.appendChild(heart);
    
    setTimeout(() => heart.remove(), 1000);
}

// Agregar animación al CSS
const likeAnimationStyle = document.createElement('style');
likeAnimationStyle.textContent = `
    @keyframes likeFloat {
        0% { transform: translateY(0) scale(0); opacity: 1; }
        50% { transform: translateY(-50px) scale(1.2); opacity: 1; }
        100% { transform: translateY(-100px) scale(0.8); opacity: 0; }
    }
`;
document.head.appendChild(likeAnimationStyle);

// ================================
// GESTIÓN DE COMENTARIOS
// ================================
function toggleComments(postId) {
    const commentsSection = document.getElementById(`comments-${postId}`);
    
    if (commentsSection.style.display === 'none' || !commentsSection.style.display) {
        commentsSection.style.display = 'block';
        commentsSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    } else {
        commentsSection.style.display = 'none';
    }
}

function handleCommentKeyPress(event, postId) {
    if (event.key === 'Enter') {
        event.preventDefault();
        sendComment(postId);
    }
}

function sendComment(postId) {
    const commentsSection = document.getElementById(`comments-${postId}`);
    const input = commentsSection.querySelector('.comment-input');
    const commentText = input.value.trim();
    
    if (!commentText) {
        alert('Escribe un comentario primero');
        return;
    }
    
    // Crear elemento de comentario
    const commentsList = commentsSection.querySelector('.comments-list');
    const newComment = document.createElement('div');
    newComment.className = 'comment-item';
    
    const userAvatar = currentUser?.avatar || 'U';
    const userName = currentUser?.name || 'Usuario';
    
    newComment.innerHTML = `
        <div class="comment-avatar">${userAvatar}</div>
        <div class="comment-content">
            <div class="comment-header">
                <strong>${userName}</strong>
                <span class="comment-time">Ahora</span>
            </div>
            <p>${commentText}</p>
            <div class="comment-actions">
                <button onclick="likeComment(${postId}, 'new')">
                    <i class="far fa-heart"></i> Me gusta (0)
                </button>
                <button onclick="replyComment(${postId}, 'new')">
                    <i class="fas fa-reply"></i> Responder
                </button>
            </div>
        </div>
    `;
    
    commentsList.appendChild(newComment);
    
    // Actualizar contador de comentarios
    const statsContainer = commentsSection.closest('.post-card').querySelector('.post-stats');
    const commentStat = statsContainer.querySelectorAll('.post-stat-item')[1];
    const currentCount = parseInt(commentStat.textContent.match(/\d+/)[0]);
    commentStat.innerHTML = `<i class="fas fa-comment"></i> ${currentCount + 1} comentarios`;
    
    // Limpiar input
    input.value = '';
    
    // Scroll al nuevo comentario
    newComment.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    
    // Mostrar notificación
    showNotification('✓ Comentario publicado', 'success');
}

function likeComment(postId, commentId) {
    const btn = event.target.closest('button');
    const icon = btn.querySelector('i');
    
    if (icon.classList.contains('far')) {
        icon.classList.remove('far');
        icon.classList.add('fas');
        const currentLikes = parseInt(btn.textContent.match(/\d+/)[0]);
        btn.innerHTML = `<i class="fas fa-heart"></i> Me gusta (${currentLikes + 1})`;
    } else {
        icon.classList.remove('fas');
        icon.classList.add('far');
        const currentLikes = parseInt(btn.textContent.match(/\d+/)[0]);
        btn.innerHTML = `<i class="far fa-heart"></i> Me gusta (${currentLikes - 1})`;
    }
}

function replyComment(postId, commentId) {
    const commentsSection = document.getElementById(`comments-${postId}`);
    const input = commentsSection.querySelector('.comment-input');
    input.focus();
    input.placeholder = 'Escribe tu respuesta...';
}

// ================================
// COMPARTIR Y GUARDAR
// ================================
function sharePost(postId) {
    if (navigator.share) {
        navigator.share({
            title: 'BarberLink - Publicación',
            text: 'Mira esta publicación en BarberLink',
            url: window.location.href + '#post-' + postId
        }).then(() => {
            showNotification('✓ Compartido exitosamente', 'success');
        }).catch(err => {
            console.log('Error al compartir:', err);
        });
    } else {
        // Fallback: copiar enlace
        const url = window.location.href + '#post-' + postId;
        navigator.clipboard.writeText(url);
        showNotification('✓ Enlace copiado al portapapeles', 'success');
    }
}

function savePost(postId) {
    const btn = event.target.closest('.post-action-btn');
    const icon = btn.querySelector('i');
    
    if (savedPosts.includes(postId)) {
        // Quitar de guardados
        savedPosts = savedPosts.filter(id => id !== postId);
        icon.classList.remove('fas');
        icon.classList.add('far');
        btn.innerHTML = '<i class="far fa-bookmark"></i> Guardar';
        showNotification('Eliminado de guardados', 'info');
    } else {
        // Guardar
        savedPosts.push(postId);
        icon.classList.remove('far');
        icon.classList.add('fas');
        btn.innerHTML = '<i class="fas fa-bookmark"></i> Guardado';
        showNotification('✓ Guardado en tus colecciones', 'success');
    }
}

function showPostOptions(postId) {
    const options = [
        'Reportar publicación',
        'No me interesa',
        'Ocultar publicación',
        'Dejar de seguir',
        'Cancelar'
    ];
    
    const choice = prompt('Opciones:\n\n' + options.map((opt, i) => `${i + 1}. ${opt}`).join('\n'));
    
    if (choice) {
        showNotification('Opción registrada', 'info');
    }
}

// ================================
// SEGUIR/DEJAR DE SEGUIR
// ================================
function toggleFollow(barberId, buttonElement) {
    const btn = buttonElement || event.target.closest('button');
    
    if (followingList.includes(barberId)) {
        // Dejar de seguir
        if (confirm('¿Dejar de seguir a este barbero?')) {
            followingList = followingList.filter(id => id !== barberId);
            btn.classList.remove('btn-following');
            btn.classList.add('btn-follow');
            btn.innerHTML = '<i class="fas fa-user-plus"></i> Seguir';
            showNotification('Has dejado de seguir', 'info');
        }
    } else {
        // Seguir
        followingList.push(barberId);
        btn.classList.remove('btn-follow');
        btn.classList.add('btn-following');
        btn.innerHTML = '<i class="fas fa-user-check"></i> Siguiendo';
        showNotification('✓ Ahora sigues a este barbero', 'success');
    }
}

// ================================
// HISTORIAS
// ================================
function viewStory(barberId) {
    const modal = document.getElementById('storyViewerModal');
    modal.style.display = 'block';
    currentStoryIndex = 0;
    playStory();
}

function playStory() {
    const progressBars = document.querySelectorAll('.progress-bar');
    progressBars.forEach((bar, index) => {
        bar.classList.remove('active');
        if (index === currentStoryIndex) {
            bar.classList.add('active');
        }
    });
    
    // Auto-avanzar después de 5 segundos
    storyTimer = setTimeout(() => {
        nextStory();
    }, 5000);
}

function nextStory() {
    clearTimeout(storyTimer);
    const progressBars = document.querySelectorAll('.progress-bar');
    
    if (currentStoryIndex < progressBars.length - 1) {
        currentStoryIndex++;
        playStory();
    } else {
        closeStoryViewer();
    }
}

function previousStory() {
    clearTimeout(storyTimer);
    
    if (currentStoryIndex > 0) {
        currentStoryIndex--;
        playStory();
    }
}

function closeStoryViewer() {
    clearTimeout(storyTimer);
    document.getElementById('storyViewerModal').style.display = 'none';
    currentStoryIndex = 0;
}

// ================================
// VISOR DE IMÁGENES
// ================================
function openImageViewer(imageSrc) {
    const modal = document.getElementById('imageViewerModal');
    const image = document.getElementById('viewerImage');
    image.src = imageSrc;
    modal.classList.add('active');
}

function closeImageViewer() {
    if (event.target.id === 'imageViewerModal' || event.target.closest('.close-viewer-btn')) {
        document.getElementById('imageViewerModal').classList.remove('active');
    }
}

function downloadImage() {
    const image = document.getElementById('viewerImage');
    const link = document.createElement('a');
    link.href = image.src;
    link.download = 'barberlink-image.jpg';
    link.click();
    showNotification('✓ Imagen descargada', 'success');
}

function shareImage() {
    sharePost(1); // Reutilizar función de compartir
}

// ================================
// CARGAR MÁS PUBLICACIONES
// ================================
function loadMorePosts() {
    const feedContainer = document.getElementById('socialFeedContainer');
    const loadBtn = event.target;
    
    loadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Cargando...';
    loadBtn.disabled = true;
    
    setTimeout(() => {
        // Simular carga de nuevas publicaciones
        const newPost = document.createElement('article');
        newPost.className = 'post-card';
        newPost.innerHTML = `
            <div class="post-header">
                <div class="post-author-info">
                    <div class="post-avatar">NP</div>
                    <div class="post-author-details">
                        <h4 class="post-author-name">Nueva Publicación</h4>
                        <span class="post-time">
                            <i class="fas fa-clock"></i> Hace 1 minuto
                        </span>
                    </div>
                </div>
            </div>
            <div class="post-content">
                <p class="post-text">Esta es una nueva publicación cargada dinámicamente 🎉</p>
            </div>
            <div class="post-actions">
                <button class="post-action-btn" onclick="toggleLike(99)">
                    <i class="far fa-heart"></i> Me gusta
                </button>
                <button class="post-action-btn" onclick="toggleComments(99)">
                    <i class="far fa-comment"></i> Comentar
                </button>
            </div>
        `;
        
        feedContainer.appendChild(newPost);
        
        loadBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Cargar más publicaciones';
        loadBtn.disabled = false;
        
        showNotification('✓ Nuevas publicaciones cargadas', 'success');
    }, 1500);
}

// ================================
// BÚSQUEDA DE HASHTAGS Y TENDENCIAS
// ================================
function searchHashtag(hashtag) {
    showNotification(`Buscando publicaciones con #${hashtag}...`, 'info');
    
    // Simular búsqueda
    setTimeout(() => {
        alert(`Se encontraron publicaciones con #${hashtag}\n\nEsta funcionalidad se completará con backend.`);
    }, 1000);
}

function filterTrending(period) {
    showNotification(`Mostrando tendencias de: ${period}`, 'info');
    // Aquí filtrarías las tendencias según el período
}

function viewPost(postId) {
    // Scroll hasta la publicación en el feed
    const postCard = document.querySelector(`[data-post-id="${postId}"]`);
    if (postCard) {
        switchSocialTab('feed');
        setTimeout(() => {
            postCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
            postCard.style.boxShadow = '0 0 0 3px #00D68F';
            setTimeout(() => {
                postCard.style.boxShadow = '';
            }, 2000);
        }, 300);
    }
}

// ================================
// INICIALIZACIÓN RED SOCIAL
// ================================
document.addEventListener('DOMContentLoaded', function() {
    // Marcar posts que ya tienen like
    likedPosts.forEach(postId => {
        const postCard = document.querySelector(`[data-post-id="${postId}"]`);
        if (postCard) {
            const likeBtn = Array.from(postCard.querySelectorAll('.post-action-btn'))
                .find(btn => btn.textContent.includes('Me gusta'));
            if (likeBtn) {
                likeBtn.classList.add('liked');
                likeBtn.innerHTML = '<i class="fas fa-heart"></i> Me gusta';
            }
        }
    });
    
    console.log('Red social inicializada');
    console.log('Siguiendo a:', followingList.length, 'barberos');
    console.log('Posts guardados:', savedPosts.length);
});




// ================================
// FUNCIONES DEL FORO
// ================================

function filterForumCategory(category) {
    document.querySelectorAll('.category-pill').forEach(pill => {
        pill.classList.remove('active');
    });
    event.target.classList.add('active');
    
    const topics = document.querySelectorAll('.forum-topic');
    topics.forEach(topic => {
        if (category === 'all' || topic.dataset.category === category) {
            topic.style.display = 'flex';
        } else {
            topic.style.display = 'none';
        }
    });
}

function createNewTopic() {
    document.getElementById('newTopicModal').style.display = 'flex';
}

function closeNewTopicModal() {
    document.getElementById('newTopicModal').style.display = 'none';
    document.getElementById('newTopicTitle').value = '';
    document.getElementById('newTopicDescription').value = '';
}

function publishNewTopic() {
    const category = document.getElementById('newTopicCategory').value;
    const title = document.getElementById('newTopicTitle').value.trim();
    const description = document.getElementById('newTopicDescription').value.trim();
    
    if (!title || !description) {
        alert('Por favor completa todos los campos');
        return;
    }
    
    showNotification('✓ Tema publicado exitosamente', 'success');
    closeNewTopicModal();
    
    // Aquí agregarías el tema a la lista (con backend real)
}

function openForumTopic(topicId) {
    const modal = document.getElementById('forumTopicModal');
    const content = document.getElementById('forumTopicFull');
    
    // Contenido de ejemplo
    content.innerHTML = `
        <h2>Los 10 mejores consejos para degradados perfectos</h2>
        <div style="margin: 15px 0; padding-bottom: 15px; border-bottom: 1px solid #E5E5E5;">
            <strong>Por Juan Domínguez</strong> • Hace 2 días • 
            <span style="color: #00D68F;">Consejos</span>
        </div>
        <p>Contenido completo del tema aquí...</p>
        <p>Esta es una funcionalidad lista para expandir con backend.</p>
    `;
    
    modal.style.display = 'flex';
}

function closeForumTopic() {
    document.getElementById('forumTopicModal').style.display = 'none';
}








// SISTEMA DE BÚSQUEDA AVANZADA
function toggleAdvancedFilters() {
    const panel = document.getElementById('advancedFiltersPanel');
    advancedFiltersActive = !advancedFiltersActive;
    panel.classList.toggle('active');
}

function updateRadiusValue(value) {
    document.getElementById('radiusValue').textContent = value;
    updateSliderBackground('radiusSlider', value, 1, 20);
}

function updateSliderBackground(sliderId, value, min, max) {
    const slider = document.getElementById(sliderId);
    const percentage = ((value - min) / (max - min)) * 100;
    slider.style.background = `linear-gradient(to right, #00D68F 0%, #00D68F ${percentage}%, #E5E5E5 ${percentage}%, #E5E5E5 100%)`;
}

function applyAdvancedFilters() {
    const searchTerm = document.getElementById('advancedSearchInput').value.toLowerCase();
    const location = document.getElementById('locationFilter').value.toLowerCase();
    const radius = parseFloat(document.getElementById('radiusSlider').value);
    const serviceType = document.getElementById('serviceTypeFilter').value;
    const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
    const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;
    
    // Actualizar círculo de radio
    if (radiusCircle && map) {
        radiusCircle.setRadius(radius * 1000);
        const zoom = radius <= 5 ? 14 : radius <= 10 ? 13 : radius <= 20 ? 12 : 11;
        map.setView(userLocation, zoom);
    }
    
    const filtered = barbers.filter(barber => {
        // Filtro por término de búsqueda
        const matchesSearch = !searchTerm || 
            barber.name.toLowerCase().includes(searchTerm) ||
            barber.specialty.toLowerCase().includes(searchTerm);
        
        // Filtro por radio de distancia
        const matchesRadius = barber.distance <= radius;
        
        // Filtro por tipo de servicio
        const matchesService = serviceType === 'all' || 
            barber.services.some(s => s.name.toLowerCase().includes(serviceType));
        
        // Filtro por rango de precio
        const matchesPrice = barber.services.some(s => 
            s.price >= minPrice && s.price <= maxPrice
        );
        
        return matchesSearch && matchesRadius && matchesService && matchesPrice;
    });
    
    // Agregar barberos filtrados al mapa
    addBarbersToMap(filtered);
    
    // Mostrar barberos en lista
    displayFilteredBarbers(filtered);
    toggleAdvancedFilters();
    
    // Mostrar notificación
    showNotification(`✓ Encontrados ${filtered.length} barberos que coinciden con tus filtros`, 'success');
}

function displayFilteredBarbers(filtered) {
    const list = document.getElementById('barbersList');
    list.innerHTML = '';
    
    if (filtered.length === 0) {
        list.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666; background: white; border-radius: 15px;">
                <i class="fas fa-search" style="font-size: 3rem; color: #ccc; margin-bottom: 15px; display: block;"></i>
                <h3 style="color: #333; margin-bottom: 10px;">No se encontraron barberos</h3>
                <p>Intenta ampliar el radio de búsqueda o modifica los filtros</p>
                <button onclick="showAllBarbers()" style="
                    margin-top: 15px;
                    padding: 12px 25px;
                    background: #00D68F;
                    color: white;
                    border: none;
                    border-radius: 10px;
                    font-weight: 600;
                    cursor: pointer;
                ">Ver todos los barberos</button>
            </div>
        `;
        return;
    }
    
    filtered.forEach(barber => {
        const card = document.createElement('div');
        card.className = 'barber-card';
        card.onclick = () => showBarberProfile(barber.id);
        
        const availability = barber.available ? 
            '<span style="color: #00D68F; font-size: 0.85rem;"><i class="fas fa-circle" style="font-size: 0.5rem;"></i> Disponible</span>' : 
            '<span style="color: #FF5D9E; font-size: 0.85rem;"><i class="fas fa-circle" style="font-size: 0.5rem;"></i> Ocupado</span>';
        
        card.innerHTML = `
            <div class="barber-header">
                <div class="barber-avatar" style="
                    background-image: url('${barber.avatar}'); 
                    background-size: cover; 
                    background-position: center;
                    border: 3px solid ${barber.available ? '#00D68F' : '#FF5D9E'};
                "></div>
                <div class="barber-info">
                    <h4>${barber.name}</h4>
                    <div class="barber-specialty">${barber.specialty}</div>
                    ${availability}
                </div>
            </div>
            <div class="barber-rating">
                <div class="stars">★★★★★</div>
                <div class="rating-text">${barber.rating} (${barber.reviews} reseñas)</div>
            </div>
            <div class="barber-distance">
                <i class="fas fa-map-marker-alt" style="color: #00D68F;"></i> ${barber.distance} km de distancia
                <span style="margin-left: 10px; color: #666;">
                    <i class="fas fa-clock"></i> ${barber.experience}
                </span>
            </div>
            <div class="barber-actions">
                <button class="btn btn-primary" onclick="event.stopPropagation(); showRoute(${barber.lat}, ${barber.lng}, '${barber.name}')">
                    <i class="fas fa-route"></i> Cómo llegar
                </button>
                <button class="btn btn-secondary" onclick="event.stopPropagation(); currentBarber = ${barber.id}; openBooking()">
                    <i class="fas fa-calendar"></i> Reservar
                </button>
            </div>
        `;
        list.appendChild(card);
    });
    
    // Actualizar contador si existe el elemento
    const countElement = document.getElementById('barbersFoundCount');
    if (countElement) {
        countElement.innerHTML = `<strong>${filtered.length}</strong> barberos encontrados`;
    }
}

function clearAdvancedFilters() {
    document.getElementById('advancedSearchInput').value = '';
    document.getElementById('locationFilter').value = 'Quibdó';
    document.getElementById('radiusSlider').value = 5;
    document.getElementById('serviceTypeFilter').value = 'all';
    document.getElementById('minPrice').value = 10000;
    document.getElementById('maxPrice').value = 50000;
    updateRadiusValue(5);
    
    // Limpiar mapa
    clearMapSearch();
    
    toggleAdvancedFilters();
}

// Inicializar slider al cargar
document.addEventListener('DOMContentLoaded', function() {
    updateRadiusValue(5);
});






// ================================
// FUNCIONES DE LA TIENDA
// ================================

let currentStoreCategory = 'all';
let allStoreProducts = [];

function loadAllProducts() {
    allStoreProducts = [];
    for (let category in products) {
        allStoreProducts = allStoreProducts.concat(products[category]);
    }
    displayProducts(allStoreProducts);
}

function loadFeaturedProducts() {
    const featured = allStoreProducts
        .filter(p => p.rating >= 4.8)
        .sort((a, b) => b.rating - a.rating)
        .slice(0, 6);
    
    const slider = document.getElementById('featuredProductsSlider');
    slider.innerHTML = '';
    
    featured.forEach(product => {
        slider.innerHTML += createProductCard(product, 'product-card-slider');
    });
}

function createProductCard(product, additionalClass = '') {
    const stockClass = product.stock < 10 ? 'low' : '';
    const stockText = product.stock < 10 ? `¡Solo ${product.stock} disponibles!` : `Stock: ${product.stock} unidades`;
    const badge = product.stock < 10 ? '<div class="product-badge product-stock-low">⚡ Últimas unidades</div>' : '';
    
    return `
        <div class="product-card-store ${additionalClass}" onclick="viewProductDetail(${product.id})">
            <div class="product-image-store">
                ${badge}
                <img src="${product.image}" 
                     alt="${product.name}"
                     onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22400%22%3E%3Crect fill=%22%23E5E5E5%22 width=%22400%22 height=%22400%22/%3E%3Ctext x=%22200%22 y=%22200%22 text-anchor=%22middle%22 fill=%22%23999%22 font-size=%2260%22%3E📦%3C/text%3E%3C/svg%3E'">
            </div>
            <div class="product-info-store">
                <div class="product-brand">${product.brand}</div>
                <h4 class="product-name-store">${product.name}</h4>
                <div class="product-rating-store">
                    <span class="product-stars">★★★★★</span>
                    <span class="product-rating-num">${product.rating}</span>
                </div>
                <div class="product-price-store">$${product.price.toLocaleString()}</div>
                <div class="product-stock ${stockClass}">${stockText}</div>
                <button class="add-to-cart-store" onclick="event.stopPropagation(); addToCartStore(${product.id})">
                    <i class="fas fa-cart-plus"></i> Agregar al carrito
                </button>
            </div>
        </div>
    `;
}

function displayProducts(productsArray) {
    const grid = document.getElementById('productsGridMain');
    grid.innerHTML = '';
    
    if (productsArray.length === 0) {
        grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">No se encontraron productos</p>';
        return;
    }
    
    productsArray.forEach(product => {
        grid.innerHTML += createProductCard(product);
    });
    
    document.getElementById('productsCount').textContent = productsArray.length;
}

function filterProductsByCategory(category) {
    currentStoreCategory = category;
    
    // Actualizar UI de categorías
    document.querySelectorAll('.store-category-card').forEach(card => {
        card.classList.remove('active');
    });
    const selectedCard = document.querySelector(`[data-category="${category}"]`);
    if (selectedCard) {
        selectedCard.classList.add('active');
    }
    
    // Filtrar productos
    let filtered;
    if (category === 'all') {
        // Cargar todos los productos si aún no están
        if (allStoreProducts.length === 0) {
            loadAllProducts();
        }
        filtered = allStoreProducts;
    } else {
        filtered = products[category] || [];
    }
    
    // Actualizar título
    const categoryNames = {
        all: 'Todos los Productos',
        maquinas: 'Máquinas y Cortadoras',
        tijeras: 'Tijeras y Navajas',
        productos: 'Productos de Estilizado',
        cuidado: 'Cuidado Capilar',
        accesorios: 'Accesorios',
        kits: 'Kits Profesionales'
    };
    
    const titleElement = document.getElementById('currentCategoryTitle');
    if (titleElement) {
        titleElement.innerHTML = `
            <i class="fas fa-shopping-bag"></i> ${categoryNames[category] || 'Productos'}
        `;
    }
    
    displayProducts(filtered);
    
    // Mostrar notificación
    showNotification(`Mostrando ${filtered.length} productos de ${categoryNames[category] || category}`, 'success');
}

function searchProducts(query) {
    if (!query.trim()) {
        // Si no hay búsqueda, mostrar productos de la categoría actual
        if (currentStoreCategory === 'all') {
            displayProducts(allStoreProducts);
        } else {
            displayProducts(products[currentStoreCategory] || []);
        }
        return;
    }
    
    // Buscar en todos los productos si la categoría es "all", sino buscar en la categoría actual
    let productsToSearch = currentStoreCategory === 'all' ? allStoreProducts : (products[currentStoreCategory] || []);
    
    const filtered = productsToSearch.filter(p => 
        p.name.toLowerCase().includes(query.toLowerCase()) ||
        p.brand.toLowerCase().includes(query.toLowerCase()) ||
        p.category.toLowerCase().includes(query.toLowerCase())
    );
    
    displayProducts(filtered);
    
    if (filtered.length === 0) {
        showNotification(`No se encontraron productos para "${query}"`, 'info');
    } else {
        showNotification(`${filtered.length} productos encontrados`, 'success');
    }
}

function sortProducts(sortType) {
    // Obtener productos de la categoría actual
    let productsToSort;
    if (currentStoreCategory === 'all') {
        if (allStoreProducts.length === 0) {
            loadAllProducts();
        }
        productsToSort = [...allStoreProducts];
    } else {
        productsToSort = [...(products[currentStoreCategory] || [])];
    }
    
    switch(sortType) {
        case 'price-low':
            productsToSort.sort((a, b) => a.price - b.price);
            showNotification('Ordenado por menor precio', 'info');
            break;
        case 'price-high':
            productsToSort.sort((a, b) => b.price - a.price);
            showNotification('Ordenado por mayor precio', 'info');
            break;
        case 'rating':
            productsToSort.sort((a, b) => b.rating - a.rating);
            showNotification('Ordenado por mejor valoración', 'info');
            break;
        case 'name':
            productsToSort.sort((a, b) => a.name.localeCompare(b.name));
            showNotification('Ordenado alfabéticamente', 'info');
            break;
        case 'featured':
        default:
            productsToSort.sort((a, b) => b.rating - a.rating);
            showNotification('Mostrando destacados', 'info');
            break;
    }
    
    displayProducts(productsToSort);
}

function toggleStoreFilters() {
    const filters = document.getElementById('storeFilters');
    filters.style.display = filters.style.display === 'none' ? 'block' : 'none';
}

function applyPriceFilter() {
    const min = parseFloat(document.getElementById('minPriceFilter').value) || 0;
    const max = parseFloat(document.getElementById('maxPriceFilter').value) || Infinity;
    
    // Aplicar filtro de categoría actual también
    let productsToFilter = currentStoreCategory === 'all' ? allStoreProducts : products[currentStoreCategory] || [];
    const filtered = productsToFilter.filter(p => p.price >= min && p.price <= max);
    displayProducts(filtered);
    
    if (filtered.length === 0) {
        showNotification('No hay productos en este rango de precio', 'info');
    } else {
        showNotification(`${filtered.length} productos encontrados`, 'success');
    }
}

// ================================
// SISTEMA DE BÚSQUEDA GLOBAL
// ================================

// Datos combinados para búsqueda global
function getAllSearchableItems() {
    const items = [];
    
    // Agregar barberos
    barbers.forEach(b => {
        items.push({
            type: 'barber',
            id: b.id,
            name: b.name,
            subtitle: b.specialty,
            icon: '✂️',
            keywords: [b.name, b.specialty, 'barbero', 'peluquero'].join(' ').toLowerCase()
        });
    });
    
    // Agregar productos
    for (let category in products) {
        products[category].forEach(p => {
            items.push({
                type: 'product',
                id: p.id,
                name: p.name,
                subtitle: `$${p.price.toLocaleString()} - ${p.brand}`,
                icon: '🛍️',
                keywords: [p.name, p.brand, category, 'producto'].join(' ').toLowerCase()
            });
        });
    }
    
    // Agregar servicios
    const services = [
        {name: 'Corte Clásico', subtitle: 'Desde $12.000', icon: '💇'},
        {name: 'Degradado', subtitle: 'Desde $15.000', icon: '✂️'},
        {name: 'Arreglo de Barba', subtitle: 'Desde $8.000', icon: '🧔'},
        {name: 'Diseño Personalizado', subtitle: 'Desde $20.000', icon: '🎨'},
        {name: 'Combo Completo', subtitle: 'Desde $25.000', icon: '💈'}
    ];
    
    services.forEach((s, i) => {
        items.push({
            type: 'service',
            id: i,
            name: s.name,
            subtitle: s.subtitle,
            icon: s.icon,
            keywords: [s.name, 'servicio'].join(' ').toLowerCase()
        });
    });
    
    return items;
}

// Crear dropdown de resultados de búsqueda global
function createGlobalSearchDropdown() {
    let dropdown = document.getElementById('globalSearchDropdown');
    
    if (!dropdown) {
        dropdown = document.createElement('div');
        dropdown.id = 'globalSearchDropdown';
        dropdown.style.cssText = `
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.15);
            z-index: 1001;
            max-height: 400px;
            overflow-y: auto;
            display: none;
        `;
        
        const searchBar = document.querySelector('.advanced-search-bar');
        searchBar.style.position = 'relative';
        searchBar.appendChild(dropdown);
    }
    
    return dropdown;
}

// Función de búsqueda global
function globalSearch(query) {
    const dropdown = createGlobalSearchDropdown();
    
    if (!query || query.length < 2) {
        dropdown.style.display = 'none';
        return;
    }
    
    const allItems = getAllSearchableItems();
    const results = allItems.filter(item => 
        item.keywords.includes(query.toLowerCase()) ||
        item.name.toLowerCase().includes(query.toLowerCase())
    ).slice(0, 10);
    
    if (results.length === 0) {
        dropdown.innerHTML = `
            <div style="padding: 20px; text-align: center; color: #666;">
                <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                No se encontraron resultados para "${query}"
            </div>
        `;
        dropdown.style.display = 'block';
        return;
    }
    
    // Agrupar resultados por tipo
    const grouped = {
        barber: results.filter(r => r.type === 'barber'),
        product: results.filter(r => r.type === 'product'),
        service: results.filter(r => r.type === 'service')
    };
    
    let html = '';
    
    if (grouped.barber.length > 0) {
        html += `<div style="padding: 10px 15px; background: #f8f9fa; font-weight: 600; color: #333; border-bottom: 1px solid #eee;">
            <i class="fas fa-cut"></i> Barberos
        </div>`;
        grouped.barber.forEach(item => {
            html += createSearchResultItem(item);
        });
    }
    
    if (grouped.product.length > 0) {
        html += `<div style="padding: 10px 15px; background: #f8f9fa; font-weight: 600; color: #333; border-bottom: 1px solid #eee;">
            <i class="fas fa-shopping-bag"></i> Productos
        </div>`;
        grouped.product.forEach(item => {
            html += createSearchResultItem(item);
        });
    }
    
    if (grouped.service.length > 0) {
        html += `<div style="padding: 10px 15px; background: #f8f9fa; font-weight: 600; color: #333; border-bottom: 1px solid #eee;">
            <i class="fas fa-concierge-bell"></i> Servicios
        </div>`;
        grouped.service.forEach(item => {
            html += createSearchResultItem(item);
        });
    }
    
    dropdown.innerHTML = html;
    dropdown.style.display = 'block';
}

function createSearchResultItem(item) {
    return `
        <div class="search-result-item" onclick="selectSearchResult('${item.type}', ${item.id}, '${item.name.replace(/'/g, "\\'")}')" style="
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s ease;
        " onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='white'">
            <span style="font-size: 1.5rem;">${item.icon}</span>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: #333;">${item.name}</div>
                <div style="font-size: 0.85rem; color: #666;">${item.subtitle}</div>
            </div>
            <i class="fas fa-chevron-right" style="color: #ccc;"></i>
        </div>
    `;
}

function selectSearchResult(type, id, name) {
    const dropdown = document.getElementById('globalSearchDropdown');
    dropdown.style.display = 'none';
    document.getElementById('advancedSearchInput').value = name;
    
    switch(type) {
        case 'barber':
            showBarbers();
            setTimeout(() => {
                const filtered = barbers.filter(b => b.id === id);
                addBarbersToMap(filtered);
                displayFilteredBarbers(filtered);
                if (filtered.length > 0) {
                    map.setView([filtered[0].lat, filtered[0].lng], 16);
                }
            }, 300);
            break;
        case 'product':
            showStore();
            setTimeout(() => {
                loadAllProducts();
                const product = allStoreProducts.find(p => p.id === id);
                if (product) {
                    displayProducts([product]);
                }
            }, 300);
            break;
        case 'service':
            showBarbers();
            setTimeout(() => {
                const serviceName = name.toLowerCase();
                if (serviceName.includes('corte')) {
                    document.getElementById('serviceTypeFilter').value = 'corte';
                } else if (serviceName.includes('degradado')) {
                    document.getElementById('serviceTypeFilter').value = 'degradado';
                } else if (serviceName.includes('barba')) {
                    document.getElementById('serviceTypeFilter').value = 'barba';
                } else if (serviceName.includes('diseño')) {
                    document.getElementById('serviceTypeFilter').value = 'diseno';
                } else if (serviceName.includes('combo')) {
                    document.getElementById('serviceTypeFilter').value = 'combo';
                }
                applyAdvancedFilters();
            }, 300);
            break;
    }
}

// Inicializar buscador global
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('advancedSearchInput');
    if (searchInput) {
        // Búsqueda en tiempo real
        searchInput.addEventListener('input', function(e) {
            globalSearch(e.target.value);
        });
        
        // Búsqueda al presionar Enter
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const dropdown = document.getElementById('globalSearchDropdown');
                if (dropdown) dropdown.style.display = 'none';
                
                // Si estamos en la vista de barberos, realizar búsqueda
                if (document.getElementById('barbersView').style.display !== 'none') {
                    performSearch(e.target.value);
                }
            }
        });
        
        // Cerrar dropdown al hacer clic fuera
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('globalSearchDropdown');
            const searchBar = document.querySelector('.advanced-search-bar');
            if (dropdown && searchBar && !searchBar.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });
    }
});

function viewProductDetail(productId) {
    const product = allStoreProducts.find(p => p.id === productId);
    if (!product) return;
    
    alert(`📦 ${product.name}\n\n💰 Precio: $${product.price.toLocaleString()}\n⭐ Rating: ${product.rating}\n🏷️ Marca: ${product.brand}\n📦 Stock: ${product.stock} unidades\n\n¡Próximamente: Vista detallada con más información!`);
}

function addToCartStore(productId) {
    let product = allStoreProducts.find(p => p.id === productId);
    
    if (product) {
        cart.push(product);
        updateCartBadge();
        showNotification(`✓ ${product.name} agregado al carrito`, 'success');
    }
}






















        function toggleUserMenu() { document.getElementById('userMenu').classList.toggle('active'); }
        function closeUserMenu(event) { if (event.target.id === 'userMenu') toggleUserMenu(); }
        function showProfile() { toggleUserMenu(); alert('Perfil de Usuario\n\nNombre: ' + (currentUser?.name || 'Usuario') + '\nEmail: ' + (currentUser?.email || 'No registrado') + '\n\nEsta sección está en desarrollo.'); }
        function showAppointments() { toggleUserMenu(); alert('📅 Mis Citas\n\nNo tienes citas programadas.\nReserva tu próximo corte en la sección de peluqueros.'); }
        function showNotifications() { alert('🔔 Notificaciones\n\n• Bienvenido a BarberLink\n• Descubre peluqueros cerca de ti\n• Explora nuestros productos'); }
        function showMessages() { toggleUserMenu(); alert('💬 Mensajes\n\nNo tienes mensajes nuevos.\nContacta a un barbero para iniciar una conversación.'); }
        function showPurchases() { toggleUserMenu(); alert('🛍️ Mis Compras\n\nAún no has realizado compras.\nExplora nuestra tienda para encontrar productos increíbles.'); }
        function showSettings() { toggleUserMenu(); alert('⚙️ Configuración\n\n• Notificaciones: Activas\n• Ubicación: Quibdó, Chocó\n• Idioma: Español\n• Tema: Claro\n\nPersonaliza tu experiencia (próximamente)'); }

        function contactBarber(barberId) {
            const barber = barbers.find(b => b.id === barberId || b.id === currentBarber);
            if (!barber) return;
            const choice = prompt('¿Cómo deseas contactar a ' + barber.name + '?\n\n1. WhatsApp\n2. Llamada telefónica\n3. Mensaje en la app');
            if (choice === '1') alert('📱 Abriendo WhatsApp...\n\n+57 300 123 4567');
            else if (choice === '2') alert('📞 Iniciando llamada...\n\n+57 300 123 4567');
            else if (choice === '3') alert('💬 Chat habilitado\n\nEscribe tu mensaje (función en desarrollo)');
        }

        function showLoading() { document.getElementById('loadingOverlay').classList.add('active'); }
        function hideLoading() { document.getElementById('loadingOverlay').classList.remove('active'); }

        function easterEgg() {
            logoClicks++;
            if (logoClicks === 3) {
                const colors = ['#FF5D9E', '#00D68F', '#FFD700', '#00B87A'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                document.querySelector('.main-header').style.background = randomColor;
                alert('🎉 ¡Easter Egg Activado!\n\n✂️ BarberLink está vivo\n🎨 Color cambiado aleatoriamente\n🚀 Gracias por explorar\n\nDesarrollado con ❤️ en Quibdó');
                logoClicks = 0;
            }
            setTimeout(() => logoClicks = 0, 2000);
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeAuthForms();
                closeBooking();
                if (document.getElementById('userMenu').classList.contains('active')) toggleUserMenu();
            }
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
        });

        window.addEventListener('load', function() {
            console.log('🎉 BarberLink cargado correctamente');
            console.log('✂️ Versión: 1.0.0');
            console.log('📍 Ubicación: Quibdó, Chocó, Colombia');
        });

        updateCartBadge();







































    </script>
</body>
</html>